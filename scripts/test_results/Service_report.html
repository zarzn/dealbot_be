<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title id="head-title">Service_report.html</title>
      <style type="text/css">body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 12px;
  /* do not increase min-width as some may use split screens */
  min-width: 800px;
  color: #999;
}

h1 {
  font-size: 24px;
  color: black;
}

h2 {
  font-size: 16px;
  color: black;
}

p {
  color: black;
}

a {
  color: #999;
}

table {
  border-collapse: collapse;
}

/******************************
 * SUMMARY INFORMATION
 ******************************/
#environment td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  vertical-align: top;
}
#environment tr:nth-child(odd) {
  background-color: #f6f6f6;
}
#environment ul {
  margin: 0;
  padding: 0 20px;
}

/******************************
 * TEST RESULT COLORS
 ******************************/
span.passed,
.passed .col-result {
  color: green;
}

span.skipped,
span.xfailed,
span.rerun,
.skipped .col-result,
.xfailed .col-result,
.rerun .col-result {
  color: orange;
}

span.error,
span.failed,
span.xpassed,
.error .col-result,
.failed .col-result,
.xpassed .col-result {
  color: red;
}

.col-links__extra {
  margin-right: 3px;
}

/******************************
 * RESULTS TABLE
 *
 * 1. Table Layout
 * 2. Extra
 * 3. Sorting items
 *
 ******************************/
/*------------------
 * 1. Table Layout
 *------------------*/
#results-table {
  border: 1px solid #e6e6e6;
  color: #999;
  font-size: 12px;
  width: 100%;
}
#results-table th,
#results-table td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  text-align: left;
}
#results-table th {
  font-weight: bold;
}

/*------------------
 * 2. Extra
 *------------------*/
.logwrapper {
  max-height: 230px;
  overflow-y: scroll;
  background-color: #e6e6e6;
}
.logwrapper.expanded {
  max-height: none;
}
.logwrapper.expanded .logexpander:after {
  content: "collapse [-]";
}
.logwrapper .logexpander {
  z-index: 1;
  position: sticky;
  top: 10px;
  width: max-content;
  border: 1px solid;
  border-radius: 3px;
  padding: 5px 7px;
  margin: 10px 0 10px calc(100% - 80px);
  cursor: pointer;
  background-color: #e6e6e6;
}
.logwrapper .logexpander:after {
  content: "expand [+]";
}
.logwrapper .logexpander:hover {
  color: #000;
  border-color: #000;
}
.logwrapper .log {
  min-height: 40px;
  position: relative;
  top: -50px;
  height: calc(100% + 50px);
  border: 1px solid #e6e6e6;
  color: black;
  display: block;
  font-family: "Courier New", Courier, monospace;
  padding: 5px;
  padding-right: 80px;
  white-space: pre-wrap;
}

div.media {
  border: 1px solid #e6e6e6;
  float: right;
  height: 240px;
  margin: 0 5px;
  overflow: hidden;
  width: 320px;
}

.media-container {
  display: grid;
  grid-template-columns: 25px auto 25px;
  align-items: center;
  flex: 1 1;
  overflow: hidden;
  height: 200px;
}

.media-container--fullscreen {
  grid-template-columns: 0px auto 0px;
}

.media-container__nav--right,
.media-container__nav--left {
  text-align: center;
  cursor: pointer;
}

.media-container__viewport {
  cursor: pointer;
  text-align: center;
  height: inherit;
}
.media-container__viewport img,
.media-container__viewport video {
  object-fit: cover;
  width: 100%;
  max-height: 100%;
}

.media__name,
.media__counter {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  flex: 0 0 25px;
  align-items: center;
}

.collapsible td:not(.col-links) {
  cursor: pointer;
}
.collapsible td:not(.col-links):hover::after {
  color: #bbb;
  font-style: italic;
  cursor: pointer;
}

.col-result {
  width: 130px;
}
.col-result:hover::after {
  content: " (hide details)";
}

.col-result.collapsed:hover::after {
  content: " (show details)";
}

#environment-header h2:hover::after {
  content: " (hide details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

#environment-header.collapsed h2:hover::after {
  content: " (show details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

/*------------------
 * 3. Sorting items
 *------------------*/
.sortable {
  cursor: pointer;
}
.sortable.desc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: -12.5px;
  border: 10px solid #4caf50;
  border-bottom: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}
.sortable.asc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: 12.5px;
  border: 10px solid #4caf50;
  border-top: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}

.hidden, .summary__reload__button.hidden {
  display: none;
}

.summary__data {
  flex: 0 0 550px;
}
.summary__reload {
  flex: 1 1;
  display: flex;
  justify-content: center;
}
.summary__reload__button {
  flex: 0 0 300px;
  display: flex;
  color: white;
  font-weight: bold;
  background-color: #4caf50;
  text-align: center;
  justify-content: center;
  align-items: center;
  border-radius: 3px;
  cursor: pointer;
}
.summary__reload__button:hover {
  background-color: #46a049;
}
.summary__spacer {
  flex: 0 0 550px;
}

.controls {
  display: flex;
  justify-content: space-between;
}

.filters,
.collapse {
  display: flex;
  align-items: center;
}
.filters button,
.collapse button {
  color: #999;
  border: none;
  background: none;
  cursor: pointer;
  text-decoration: underline;
}
.filters button:hover,
.collapse button:hover {
  color: #ccc;
}

.filter__label {
  margin-right: 10px;
}

      </style>
    
  </head>
  <body>
    <h1 id="title">Service_report.html</h1>
    <p>Report generated on 05-Mar-2025 at 02:49:07 by <a href="https://pypi.python.org/pypi/pytest-html">pytest-html</a>
        v4.1.1</p>
    <div id="environment-header">
      <h2>Environment</h2>
    </div>
    <table id="environment"></table>
    <!-- TEMPLATES -->
      <template id="template_environment_row">
      <tr>
        <td></td>
        <td></td>
      </tr>
    </template>
    <template id="template_results-table__body--empty">
      <tbody class="results-table-row">
        <tr id="not-found-message">
          <td colspan="4">No results found. Check the filters.</th>
        </tr>
    </template>
    <template id="template_results-table__tbody">
      <tbody class="results-table-row">
        <tr class="collapsible">
        </tr>
        <tr class="extras-row">
          <td class="extra" colspan="4">
            <div class="extraHTML"></div>
            <div class="media">
              <div class="media-container">
                  <div class="media-container__nav--left"><</div>
                  <div class="media-container__viewport">
                    <img src="" />
                    <video controls>
                      <source src="" type="video/mp4">
                    </video>
                  </div>
                  <div class="media-container__nav--right">></div>
                </div>
                <div class="media__name"></div>
                <div class="media__counter"></div>
            </div>
            <div class="logwrapper">
              <div class="logexpander"></div>
              <div class="log"></div>
            </div>
          </td>
        </tr>
      </tbody>
    </template>
    <!-- END TEMPLATES -->
    <div class="summary">
      <div class="summary__data">
        <h2>Summary</h2>
        <div class="additional-summary prefix">
        </div>
        <p class="run-count">139 tests took 00:00:15.</p>
        <p class="filter">(Un)check the boxes to filter the results.</p>
        <div class="summary__reload">
          <div class="summary__reload__button hidden" onclick="location.reload()">
            <div>There are still tests running. <br />Reload this page to get the latest results!</div>
          </div>
        </div>
        <div class="summary__spacer"></div>
        <div class="controls">
          <div class="filters">
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="failed" />
            <span class="failed">47 Failed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="passed" />
            <span class="passed">92 Passed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="skipped" disabled/>
            <span class="skipped">0 Skipped,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xfailed" disabled/>
            <span class="xfailed">0 Expected failures,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xpassed" disabled/>
            <span class="xpassed">0 Unexpected passes,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="error" />
            <span class="error">21 Errors,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="rerun" disabled/>
            <span class="rerun">0 Reruns</span>
          </div>
          <div class="collapse">
            <button id="show_all_details">Show all details</button>&nbsp;/&nbsp;<button id="hide_all_details">Hide all details</button>
          </div>
        </div>
      </div>
      <div class="additional-summary summary">
      </div>
      <div class="additional-summary postfix">
      </div>
    </div>
    <table id="results-table">
      <thead id="results-table-head">
        <tr>
          <th class="sortable" data-column-type="result">Result</th>
          <th class="sortable" data-column-type="testId">Test</th>
          <th class="sortable" data-column-type="duration">Duration</th>
          <th>Links</th>
        </tr>
      </thead>
    </table>
  </body>
  <footer>
    <div id="data-container" data-jsonblob="{&#34;environment&#34;: {&#34;Python&#34;: &#34;3.11.4&#34;, &#34;Platform&#34;: &#34;Windows-10-10.0.22631-SP0&#34;, &#34;Packages&#34;: {&#34;pytest&#34;: &#34;7.4.4&#34;, &#34;pluggy&#34;: &#34;1.5.0&#34;}, &#34;Plugins&#34;: {&#34;anchorpy&#34;: &#34;0.18.0&#34;, &#34;anyio&#34;: &#34;3.7.1&#34;, &#34;Faker&#34;: &#34;22.5.1&#34;, &#34;asyncio&#34;: &#34;0.21.1&#34;, &#34;cov&#34;: &#34;4.1.0&#34;, &#34;html&#34;: &#34;4.1.1&#34;, &#34;metadata&#34;: &#34;3.1.1&#34;, &#34;mock&#34;: &#34;3.12.0&#34;, &#34;timeout&#34;: &#34;2.3.1&#34;, &#34;xdist&#34;: &#34;3.6.1&#34;, &#34;xprocess&#34;: &#34;0.18.1&#34;, &#34;time-machine&#34;: &#34;2.16.0&#34;}}, &#34;tests&#34;: {&#34;backend_tests/services/test_agent_service.py::test_create_goal_analyst&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_create_goal_analyst::setup&#34;, &#34;duration&#34;: &#34;104 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_create_goal_analyst::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;104 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058287952&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058287952&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_create_deal_finder&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_create_deal_finder::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_create_deal_finder::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850047731920&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850047731920&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_create_price_analyst&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_create_price_analyst::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_create_price_analyst::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058147600&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058147600&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_create_notifier&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_create_notifier::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_create_notifier::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058163344&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058163344&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_process_goal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_process_goal::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_process_goal::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058069968&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058069968&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_process_goal_no_background_tasks&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_process_goal_no_background_tasks::setup&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_process_goal_no_background_tasks::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850047790672&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850047790672&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_add_background_task&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_add_background_task::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_add_background_task::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058296272&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058296272&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_add_background_task_no_tasks_object&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_add_background_task_no_tasks_object::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_add_background_task_no_tasks_object::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058014608&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058014608&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_process_task&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_process_task::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_process_task::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850056463184&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850056463184&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_process_task_unsupported_type&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_process_task_unsupported_type::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_process_task_unsupported_type::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058294096&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058294096&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_can_handle_task&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_can_handle_task::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_can_handle_task::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058039248&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850058039248&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_get_capabilities&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_get_capabilities::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_get_capabilities::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850057931728&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850057931728&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_health_check&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_health_check::setup&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_health_check::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850061465808&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850061465808&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_analyze_goal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_analyze_goal::setup&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_analyze_goal::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file c:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\backend_tests\\services\\test_agent_service.py, line 340\n  @service_test\n  @patch(&amp;quot;core.services.agent.logger&amp;quot;)\n  async def test_analyze_goal(agent_service, mock_logger):\n      &amp;quot;&amp;quot;&amp;quot;Test analyzing a goal.&amp;quot;&amp;quot;&amp;quot;\n      # Setup\n      goal_data = {\n          &amp;quot;goal_id&amp;quot;: str(uuid4()),\n          &amp;quot;user_id&amp;quot;: str(uuid4()),\n          &amp;quot;title&amp;quot;: &amp;quot;Test Goal&amp;quot;,\n          &amp;quot;description&amp;quot;: &amp;quot;A test goal for analysis&amp;quot;,\n          &amp;quot;criteria&amp;quot;: [&amp;quot;Low risk&amp;quot;, &amp;quot;High returns&amp;quot;],\n          &amp;quot;preferences&amp;quot;: {&amp;quot;risk_tolerance&amp;quot;: &amp;quot;medium&amp;quot;}\n      }\n\n      # Execute\n      result = await agent_service.analyze_goal(goal_data)\n\n      # Verify\n      assert &amp;quot;analysis&amp;quot; in result\n      assert &amp;quot;score&amp;quot; in result\n      assert isinstance(result[&amp;quot;score&amp;quot;], (int, float))\n      assert 0 &amp;lt;= result[&amp;quot;score&amp;quot;] &amp;lt;= 100\n      assert &amp;quot;recommendations&amp;quot; in result\n      assert isinstance(result[&amp;quot;recommendations&amp;quot;], list)\n      mock_logger.info.assert_called()\nE       fixture &amp;#x27;mock_logger&amp;#x27; not found\n&amp;gt;       available fixtures: _fixed_xprocess, _session_faker, agent_service, anyio_backend, anyio_backend_name, anyio_backend_options, auth_client, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, class_mocker, client, cov, db_session, doctest_namespace, event_loop, extra, extras, faker, include_metadata_in_junit_xml, metadata, mock_agent_repository, mock_redis_service, mocker, module_mocker, monkeypatch, no_cover, package_mocker, patch_redis, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, redis_client, reset_test_state, session_mocker, test_db, test_deal_data, test_goal_data, test_market_data, test_token, test_token_data, test_user_data, testrun_uid, time_machine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id, xprocess\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\nc:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\backend_tests\\services\\test_agent_service.py:340\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_analyze_deal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_analyze_deal::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_analyze_deal::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850061455248&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850061455248&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_search_market&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_search_market::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_search_market::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850057857168&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850057857168&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_predict_price&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_predict_price::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_predict_price::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850057884368&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850057884368&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_find_matches&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_find_matches::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_find_matches::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850060997968&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850060997968&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_validate_deal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_validate_deal::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_validate_deal::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850061858320&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850061858320&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_generate_notification&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_generate_notification::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_generate_notification::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850061323216&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850061323216&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_agent_service.py::test_initialize&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_agent_service.py::test_initialize::setup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_agent_service.py::test_initialize::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_agent_service.py:33: in mock_agent_repository\n    mock_repo.get.return_value = None\n        mock_repo  = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850057932240&amp;#x27;&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;get&amp;#x27;\n        name       = &amp;#x27;get&amp;#x27;\n        self       = &amp;lt;AsyncMock spec=&amp;#x27;AgentRepository&amp;#x27; id=&amp;#x27;2850057932240&amp;#x27;&amp;gt;\n&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_market_analytics&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_market_analytics&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_market_analytics&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_market_analytics_not_found&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_market_analytics_not_found&#34;, &#34;duration&#34;: &#34;10 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_market_analytics_not_found&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;10 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\analytics.py:63: in get_market_analytics\n    analytics_data = await self.analytics_repository.get_market_analytics(market_id)\n        market     = &amp;lt;AsyncMock name=&amp;#x27;mock.get_by_id()&amp;#x27; id=&amp;#x27;2850060865488&amp;#x27;&amp;gt;\n        market_id  = UUID(&amp;#x27;b3d5e055-6d64-46ec-b118-7aa645eafac8&amp;#x27;)\n        self       = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DD91D0&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:2237: in _execute_mock_call\n    raise effect\nE   core.exceptions.base_exceptions.NotFoundError: Market analytics not found\n        _call      = call(UUID(&amp;#x27;b3d5e055-6d64-46ec-b118-7aa645eafac8&amp;#x27;))\n        args       = (UUID(&amp;#x27;b3d5e055-6d64-46ec-b118-7aa645eafac8&amp;#x27;),)\n        effect     = NotFoundError(&amp;#x27;Market analytics not found&amp;#x27;)\n        kwargs     = {}\n        self       = &amp;lt;AsyncMock name=&amp;#x27;mock.get_market_analytics&amp;#x27; id=&amp;#x27;2850060862800&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_analytics_service.py:115: in test_get_market_analytics_not_found\n    await analytics_service.get_market_analytics(market_id)\n        analytics_service = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DD91D0&amp;gt;\n        market_id  = UUID(&amp;#x27;b3d5e055-6d64-46ec-b118-7aa645eafac8&amp;#x27;)\n        mock_analytics_repository = &amp;lt;AsyncMock spec=&amp;#x27;AnalyticsRepository&amp;#x27; id=&amp;#x27;2850060874192&amp;#x27;&amp;gt;\ncore\\services\\analytics.py:82: in get_market_analytics\n    raise MarketError(f&amp;quot;Failed to get market analytics: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to get market analytics: Market analytics not found\n        market     = &amp;lt;AsyncMock name=&amp;#x27;mock.get_by_id()&amp;#x27; id=&amp;#x27;2850060865488&amp;#x27;&amp;gt;\n        market_id  = UUID(&amp;#x27;b3d5e055-6d64-46ec-b118-7aa645eafac8&amp;#x27;)\n        self       = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DD91D0&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.analytics:Error getting market analytics: Market analytics not found\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.analytics:analytics.py:81 Error getting market analytics: Market analytics not found\n\n&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_market_comparison&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_market_comparison&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_market_comparison&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_market_price_history&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_market_price_history&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_market_price_history&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py:939: in assert_called_with\n    raise AssertionError(_error_message()) from cause\nE   AssertionError: expected call not found.\nE   Expected: get_price_history(UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\nE   Actual: get_price_history(UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;, None, None)\n        _error_message = &amp;lt;function NonCallableMock.assert_called_with.&amp;lt;locals&amp;gt;._error_message at 0x0000029794DDCF40&amp;gt;\n        actual     = call(UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;, None, None)\n        args       = (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\n        cause      = None\n        expected   = call(UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\n        kwargs     = {}\n        self       = &amp;lt;AsyncMock name=&amp;#x27;mock.get_price_history&amp;#x27; id=&amp;#x27;2850061331920&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:951: in assert_called_once_with\n    return self.assert_called_with(*args, **kwargs)\nE   AssertionError: expected call not found.\nE   Expected: get_price_history(UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\nE   Actual: get_price_history(UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;, None, None)\nE   \nE   pytest introspection follows:\nE   \nE   Args:\nE   assert (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;, None, None) == (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\nE     Left contains 2 more items, first extra item: None\nE     Full diff:\nE     - (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\nE     + (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;, None, None)\nE     ?                                                            ++++++++++++\n        args       = (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\n        kwargs     = {}\n        self       = &amp;lt;AsyncMock name=&amp;#x27;mock.get_price_history&amp;#x27; id=&amp;#x27;2850061331920&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_analytics_service.py:190: in test_get_market_price_history\n    mock_analytics_repository.get_price_history.assert_called_once_with(market_id, product_id)\nE   AssertionError: expected call not found.\nE   Expected: get_price_history(UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\nE   Actual: get_price_history(UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;, None, None)\nE   \nE   pytest introspection follows:\nE   \nE   Args:\nE   assert (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;, None, None) == (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\nE     Left contains 2 more items, first extra item: None\nE     Full diff:\nE     - (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;)\nE     + (UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), &amp;#x27;product123&amp;#x27;, None, None)\nE     ?                                                            ++++++++++++\n        analytics_service = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794160650&amp;gt;\n        expected_history = MarketPriceHistory(market_id=UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), product_id=&amp;#x27;product123&amp;#x27;, price_points=[{&amp;#x27;date&amp;#x27;: &amp;#x27;2023-01-01&amp;#x27;, &amp;#x27;price&amp;#x27;: 99.99}, {&amp;#x27;date&amp;#x27;: &amp;#x27;2023-01-15&amp;#x27;, &amp;#x27;price&amp;#x27;: 89.99}, {&amp;#x27;date&amp;#x27;: &amp;#x27;2023-02-01&amp;#x27;, &amp;#x27;price&amp;#x27;: 79.99}], average_price=89.99, lowest_price=79.99, highest_price=99.99, price_trend=&amp;#x27;decreasing&amp;#x27;)\n        history_data = {&amp;#x27;average_price&amp;#x27;: 89.99,\n &amp;#x27;highest_price&amp;#x27;: 99.99,\n &amp;#x27;lowest_price&amp;#x27;: 79.99,\n &amp;#x27;market_id&amp;#x27;: UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;),\n &amp;#x27;price_points&amp;#x27;: [{&amp;#x27;date&amp;#x27;: &amp;#x27;2023-01-01&amp;#x27;, &amp;#x27;price&amp;#x27;: 99.99},\n                  {&amp;#x27;date&amp;#x27;: &amp;#x27;2023-01-15&amp;#x27;, &amp;#x27;price&amp;#x27;: 89.99},\n                  {&amp;#x27;date&amp;#x27;: &amp;#x27;2023-02-01&amp;#x27;, &amp;#x27;price&amp;#x27;: 79.99}],\n &amp;#x27;price_trend&amp;#x27;: &amp;#x27;decreasing&amp;#x27;,\n &amp;#x27;product_id&amp;#x27;: &amp;#x27;product123&amp;#x27;}\n        market_id  = UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;)\n        mock_analytics_repository = &amp;lt;AsyncMock spec=&amp;#x27;AnalyticsRepository&amp;#x27; id=&amp;#x27;2850061392720&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;product123&amp;#x27;\n        result     = MarketPriceHistory(market_id=UUID(&amp;#x27;0ad12d0b-24ee-4f5c-94d5-aa0400404be4&amp;#x27;), product_id=&amp;#x27;product123&amp;#x27;, price_points=[{&amp;#x27;date&amp;#x27;: &amp;#x27;2023-01-01&amp;#x27;, &amp;#x27;price&amp;#x27;: 99.99}, {&amp;#x27;date&amp;#x27;: &amp;#x27;2023-01-15&amp;#x27;, &amp;#x27;price&amp;#x27;: 89.99}, {&amp;#x27;date&amp;#x27;: &amp;#x27;2023-02-01&amp;#x27;, &amp;#x27;price&amp;#x27;: 79.99}], average_price=89.99, lowest_price=79.99, highest_price=99.99, price_trend=&amp;#x27;decreasing&amp;#x27;)\n&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_market_availability&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_market_availability&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_market_availability&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_market_trends&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_market_trends&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_market_trends&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_market_performance&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_market_performance&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_market_performance&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_update_market_analytics&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_update_market_analytics&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_update_market_analytics&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_update_market_analytics_validation_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_update_market_analytics_validation_error&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_update_market_analytics_validation_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\analytics.py:211: in update_market_analytics\n    await self.analytics_repository.update_market_analytics(\n        analytics_data = {&amp;#x27;change_24h&amp;#x27;: 2.5, &amp;#x27;volume_24h&amp;#x27;: -100.0}\n        market     = &amp;lt;AsyncMock name=&amp;#x27;mock.get_by_id()&amp;#x27; id=&amp;#x27;2850060997904&amp;#x27;&amp;gt;\n        market_id  = UUID(&amp;#x27;7b216e44-583d-4737-8667-a6bb16a0ab33&amp;#x27;)\n        self       = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DFB750&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:2237: in _execute_mock_call\n    raise effect\nE   core.exceptions.base_exceptions.ValidationError: Volume cannot be negative\n        _call      = call(UUID(&amp;#x27;7b216e44-583d-4737-8667-a6bb16a0ab33&amp;#x27;), {&amp;#x27;volume_24h&amp;#x27;: -100.0, &amp;#x27;change_24h&amp;#x27;: 2.5})\n        args       = (UUID(&amp;#x27;7b216e44-583d-4737-8667-a6bb16a0ab33&amp;#x27;),\n {&amp;#x27;change_24h&amp;#x27;: 2.5, &amp;#x27;volume_24h&amp;#x27;: -100.0})\n        effect     = ValidationError(&amp;#x27;Volume cannot be negative&amp;#x27;)\n        kwargs     = {}\n        self       = &amp;lt;AsyncMock name=&amp;#x27;mock.update_market_analytics&amp;#x27; id=&amp;#x27;2850060993360&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_analytics_service.py:339: in test_update_market_analytics_validation_error\n    await analytics_service.update_market_analytics(market_id, invalid_data)\n        analytics_service = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DFB750&amp;gt;\n        invalid_data = {&amp;#x27;change_24h&amp;#x27;: 2.5, &amp;#x27;volume_24h&amp;#x27;: -100.0}\n        market_id  = UUID(&amp;#x27;7b216e44-583d-4737-8667-a6bb16a0ab33&amp;#x27;)\n        mock_analytics_repository = &amp;lt;AsyncMock spec=&amp;#x27;AnalyticsRepository&amp;#x27; id=&amp;#x27;2850061007376&amp;#x27;&amp;gt;\ncore\\services\\analytics.py:217: in update_market_analytics\n    raise MarketError(f&amp;quot;Failed to update market analytics: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to update market analytics: Volume cannot be negative\n        analytics_data = {&amp;#x27;change_24h&amp;#x27;: 2.5, &amp;#x27;volume_24h&amp;#x27;: -100.0}\n        market     = &amp;lt;AsyncMock name=&amp;#x27;mock.get_by_id()&amp;#x27; id=&amp;#x27;2850060997904&amp;#x27;&amp;gt;\n        market_id  = UUID(&amp;#x27;7b216e44-583d-4737-8667-a6bb16a0ab33&amp;#x27;)\n        self       = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DFB750&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.analytics:Error updating market analytics: Volume cannot be negative\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.analytics:analytics.py:216 Error updating market analytics: Volume cannot be negative\n\n&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_aggregate_market_stats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_aggregate_market_stats&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_aggregate_market_stats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_aggregate_market_stats_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_aggregate_market_stats_error&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_aggregate_market_stats_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\analytics.py:229: in aggregate_market_stats\n    await self.analytics_repository.aggregate_market_stats(market_id)\n        market     = &amp;lt;AsyncMock name=&amp;#x27;mock.get_by_id()&amp;#x27; id=&amp;#x27;2850061005584&amp;#x27;&amp;gt;\n        market_id  = UUID(&amp;#x27;49946a7d-083a-4348-801d-10978bb6ed12&amp;#x27;)\n        self       = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DFA0D0&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:2237: in _execute_mock_call\n    raise effect\nE   core.exceptions.analytics_exceptions.AnalyticsError: Failed to aggregate stats\n        _call      = call(UUID(&amp;#x27;49946a7d-083a-4348-801d-10978bb6ed12&amp;#x27;))\n        args       = (UUID(&amp;#x27;49946a7d-083a-4348-801d-10978bb6ed12&amp;#x27;),)\n        effect     = AnalyticsError(&amp;#x27;Failed to aggregate stats&amp;#x27;)\n        kwargs     = {}\n        self       = &amp;lt;AsyncMock name=&amp;#x27;mock.aggregate_market_stats&amp;#x27; id=&amp;#x27;2850060963792&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_analytics_service.py:369: in test_aggregate_market_stats_error\n    await analytics_service.aggregate_market_stats(market_id)\n        analytics_service = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DFA0D0&amp;gt;\n        market_id  = UUID(&amp;#x27;49946a7d-083a-4348-801d-10978bb6ed12&amp;#x27;)\n        mock_analytics_repository = &amp;lt;AsyncMock spec=&amp;#x27;AnalyticsRepository&amp;#x27; id=&amp;#x27;2850062042768&amp;#x27;&amp;gt;\n        mock_logger = &amp;lt;MagicMock name=&amp;#x27;logger&amp;#x27; id=&amp;#x27;2850061265936&amp;#x27;&amp;gt;\ncore\\services\\analytics.py:232: in aggregate_market_stats\n    raise MarketError(f&amp;quot;Failed to aggregate market stats: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to aggregate market stats: Failed to aggregate stats\n        market     = &amp;lt;AsyncMock name=&amp;#x27;mock.get_by_id()&amp;#x27; id=&amp;#x27;2850061005584&amp;#x27;&amp;gt;\n        market_id  = UUID(&amp;#x27;49946a7d-083a-4348-801d-10978bb6ed12&amp;#x27;)\n        self       = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794DFA0D0&amp;gt;\n&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_deal_analysis&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_deal_analysis&#34;, &#34;duration&#34;: &#34;5 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_deal_analysis&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;5 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_analytics_service.py:382: in test_get_deal_analysis\n    mock_deal_analysis_service.analyze_deal.return_value = AIAnalysis(\nE   pydantic_core._pydantic_core.ValidationError: 1 validation error for AIAnalysis\nE   score\nE     Field required [type=missing, input_value={&amp;#x27;deal_id&amp;#x27;: UUID(&amp;#x27;2b03dff... 4, 18, 48, 49, 373173)}, input_type=dict]\nE       For further information visit https://errors.pydantic.dev/2.10/v/missing\n        analytics_service = &amp;lt;core.services.analytics.AnalyticsService object at 0x0000029794E5EC10&amp;gt;\n        deal_id    = UUID(&amp;#x27;2b03dff2-941f-4867-b81d-cdbefb2cb810&amp;#x27;)\n        mock_analytics_repository = &amp;lt;AsyncMock spec=&amp;#x27;AnalyticsRepository&amp;#x27; id=&amp;#x27;2850060997648&amp;#x27;&amp;gt;\n        mock_deal_analysis_service = &amp;lt;AsyncMock id=&amp;#x27;2850061408336&amp;#x27;&amp;gt;\n        user_id    = UUID(&amp;#x27;3d274355-2730-438d-a92d-77c10ab194ab&amp;#x27;)\n&#34;}], &#34;backend_tests/services/test_analytics_service.py::test_get_deal_analysis_not_found&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_analytics_service.py::test_get_deal_analysis_not_found&#34;, &#34;duration&#34;: &#34;5 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_analytics_service.py::test_get_deal_analysis_not_found&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;5 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_auth_service.py::test_create_access_token&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_auth_service.py::test_create_access_token&#34;, &#34;duration&#34;: &#34;820 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_auth_service.py::test_create_access_token&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;820 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_auth_service.py::test_create_refresh_token&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_auth_service.py::test_create_refresh_token&#34;, &#34;duration&#34;: &#34;247 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_auth_service.py::test_create_refresh_token&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;247 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_auth_service.py::test_verify_invalid_token&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_auth_service.py::test_verify_invalid_token&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_auth_service.py::test_verify_invalid_token&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_auth_service.py:73: in test_verify_invalid_token\n    with pytest.raises(TokenError):\nE   Failed: DID NOT RAISE &amp;lt;class &amp;#x27;core.exceptions.auth_exceptions.TokenError&amp;#x27;&amp;gt;\n        auth_service = &amp;lt;core.services.auth.AuthService object at 0x0000029796135F90&amp;gt;\n        data       = {&amp;#x27;sub&amp;#x27;: &amp;#x27;442d5007-8310-415c-9f67-f4ff22cf9717&amp;#x27;}\n        token      = &amp;#x27;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NDJkNTAwNy04MzEwLTQxNWMtOWY2Ny1mNGZmMjJjZjk3MTciLCJ0eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzQxMjU5OTMwLjQ2NDd9.vkfWeIsCIg5j8vpoPoGRGc4fMK-Oc8nqLXHBlNkgyJs&amp;#x27;\n        user_id    = &amp;#x27;442d5007-8310-415c-9f67-f4ff22cf9717&amp;#x27;\n&#34;}], &#34;backend_tests/services/test_auth_service.py::test_blacklist_token&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_auth_service.py::test_blacklist_token&#34;, &#34;duration&#34;: &#34;240 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_auth_service.py::test_blacklist_token&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;240 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_auth_service.py::test_authenticate_user_with_valid_credentials&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_auth_service.py::test_authenticate_user_with_valid_credentials&#34;, &#34;duration&#34;: &#34;506 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_auth_service.py::test_authenticate_user_with_valid_credentials&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;506 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nWARNING:passlib.handlers.bcrypt:(trapped) error reading bcrypt version\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\passlib\\handlers\\bcrypt.py&amp;quot;, line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module &amp;#x27;bcrypt&amp;#x27; has no attribute &amp;#x27;__about__&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nWARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\passlib\\handlers\\bcrypt.py&amp;quot;, line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module &amp;#x27;bcrypt&amp;#x27; has no attribute &amp;#x27;__about__&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_auth_service.py::test_authentication_failure&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_auth_service.py::test_authentication_failure&#34;, &#34;duration&#34;: &#34;478 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_auth_service.py::test_authentication_failure&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;478 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_auth_service.py:149: in test_authentication_failure\n    await authenticate_user(\n        db_session = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297961E9B10&amp;gt;\n        unique_email = &amp;#x27;test_auth_fail_ee5c7948@example.com&amp;#x27;\ncore\\services\\auth.py:101: in authenticate_user\n    raise InvalidCredentialsError(\nE   core.exceptions.auth_exceptions.InvalidCredentialsError: Invalid email or password\n        db         = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297961E9B10&amp;gt;\n        email      = &amp;#x27;nonexistent@example.com&amp;#x27;\n        password   = &amp;#x27;testpassword123&amp;#x27;\n        result     = &amp;lt;sqlalchemy.engine.result.ChunkedIteratorResult object at 0x00000297961D1910&amp;gt;\n        stmt       = &amp;lt;sqlalchemy.sql.selectable.Select object at 0x000002979619E8D0&amp;gt;\n        user       = None\n\n----------------------------- Captured stderr call -----------------------------\nWARNING:core.services.auth:Invalid password for user: test_auth_fail_ee5c7948@example.com\nWARNING:core.services.auth:User not found or inactive: nonexistent@example.com\n\n------------------------------ Captured log call -------------------------------\nWARNING  core.services.auth:auth.py:108 Invalid password for user: test_auth_fail_ee5c7948@example.com\nWARNING  core.services.auth:auth.py:100 User not found or inactive: nonexistent@example.com\n\n&#34;}], &#34;backend_tests/services/test_auth_service.py::test_token_operations&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_auth_service.py::test_token_operations&#34;, &#34;duration&#34;: &#34;245 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_auth_service.py::test_token_operations&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;245 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_cache_service.py::test_set_get_cache&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_set_get_cache&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_set_get_cache&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_cache_service.py::test_cache_expiration&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_cache_expiration&#34;, &#34;duration&#34;: &#34;00:00:01&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_cache_expiration&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:01&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_cache_service.py:47: in test_cache_expiration\n    assert not await cache_service.exists(key)\nE   assert not True\n        cache_service = &amp;lt;core.services.cache.CacheService object at 0x00000297962A5E10&amp;gt;\n        expire     = datetime.timedelta(seconds=1)\n        key        = &amp;#x27;expiring_key&amp;#x27;\n        value      = &amp;#x27;test_value&amp;#x27;\n&#34;}], &#34;backend_tests/services/test_cache_service.py::test_delete_cache&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_delete_cache&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_delete_cache&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_cache_service.py::test_clear_pattern&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_clear_pattern&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_clear_pattern&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_cache_service.py::test_increment&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_increment&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_increment&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_cache_service.py::test_complex_data_types&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_complex_data_types&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_complex_data_types&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_cache_service.py::test_cache_pipeline&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_cache_pipeline&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_cache_pipeline&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_cache_service.py:135: in test_cache_pipeline\n    assert results[0]  # First set operation\nE   IndexError: list index out of range\n        cache_service = &amp;lt;core.services.cache.CacheService object at 0x0000029794B39C90&amp;gt;\n        pipeline   = &amp;lt;RedisMock id=&amp;#x27;2850022404752&amp;#x27;&amp;gt;\n        results    = []\n&#34;}], &#34;backend_tests/services/test_cache_service.py::test_cache_error_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_cache_error_handling&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_cache_error_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nERROR:core.services.cache:Error setting cache key test_key: Test exception\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.cache:cache.py:91 Error setting cache key test_key: Test exception\n\n&#34;}], &#34;backend_tests/services/test_cache_service.py::test_cache_connection_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_cache_connection_handling&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_cache_connection_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_cache_service.py::test_cache_prefix_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_cache_service.py::test_cache_prefix_handling&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_cache_service.py::test_cache_prefix_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal&#34;, &#34;duration&#34;: &#34;21 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;21 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\deal_analysis.py:107: in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850058089360&amp;#x27;&amp;gt;\n        goal       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850060993232&amp;#x27;&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297949A6FD0&amp;gt;\n        similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;9e6859e7-86fc-41ef-b780-b3a1b502608b&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;6f7794d3-bce5-46ee-98d2-bfe9e7d60b90&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;9377a6ff-fccd-445e-a0ed-d5ffd1c3f42e&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n        name       = &amp;#x27;price_history&amp;#x27;\n        self       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850058089360&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_deal_analysis_service.py:187: in test_analyze_deal\n    result = await deal_analysis_service.analyze_deal(mock_deal, mock_goal, mock_similar_deals)\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297949A6FD0&amp;gt;\n        mock_deal  = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850058089360&amp;#x27;&amp;gt;\n        mock_deal_service = &amp;lt;AsyncMock id=&amp;#x27;2850082678864&amp;#x27;&amp;gt;\n        mock_goal  = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850060993232&amp;#x27;&amp;gt;\n        mock_market_service = &amp;lt;AsyncMock id=&amp;#x27;2850061264272&amp;#x27;&amp;gt;\n        mock_price_history =                          date       price  volume\n0  2025-02-02 18:48:53.353069  103.291854    4163\n1  2025-02-03 18:48:53.353069   99.432066    2002\n2  2025-02-04 18:48:53.353069  104.878712    3486\n3  2025-02-05 18:48:53.353069  106.573168    2489\n4  2025-02-06 18:48:53.353069  101.263348    4259\n5  2025-02-07 18:48:53.353069  103.247605    4865\n6  2025-02-08 18:48:53.353069  105.523121    2620\n7  2025-02-09 18:48:53.353069  106.136114    2453\n8  2025-02-10 18:48:53.353069  103.434914    2532\n9  2025-02-11 18:48:53.353069   93.514075    4867\n10 2025-02-12 18:48:53.353069  110.685430    1788\n11 2025-02-13 18:48:53.353069  102.907404    2717\n12 2025-02-14 18:48:53.353069  116.980478    3059\n13 2025-02-15 18:48:53.353069  109.605543    1597\n14 2025-02-16 18:48:53.353069   98.193072    4086\n15 2025-02-17 18:48:53.353069  105.102667    1391\n16 2025-02-18 18:48:53.353069  107.568242    1896\n17 2025-02-19 18:48:53.353069  111.692076    2629\n18 2025-02-20 18:48:53.353069  107.287104    4410\n19 2025-02-21 18:48:53.353069  117.844960    3206\n20 2025-02-22 18:48:53.353069  114.150556    2137\n21 2025-02-23 18:48:53.353069  116.748608    4444\n22 2025-02-24 18:48:53.353069  114.792313    1665\n23 2025-02-25 18:48:53.353069  121.984005    1547\n24 2025-02-26 18:48:53.353069  111.462158    4135\n25 2025-02-27 18:48:53.353069  119.391908    1349\n26 2025-02-28 18:48:53.353069  118.232431    1758\n27 2025-03-01 18:48:53.353069  116.332787    3101\n28 2025-03-02 18:48:53.353069  124.713201    2470\n29 2025-03-03 18:48:53.353069  119.812351    4568\n30 2025-03-04 18:48:53.353069  120.501903    2588\n        mock_similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;9e6859e7-86fc-41ef-b780-b3a1b502608b&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;6f7794d3-bce5-46ee-98d2-bfe9e7d60b90&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;9377a6ff-fccd-445e-a0ed-d5ffd1c3f42e&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\ncore\\services\\deal_analysis.py:113: in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\nE   core.exceptions.data_exceptions.DataQualityError: Invalid price history data\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850058089360&amp;#x27;&amp;gt;\n        goal       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850060993232&amp;#x27;&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297949A6FD0&amp;gt;\n        similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;9e6859e7-86fc-41ef-b780-b3a1b502608b&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;6f7794d3-bce5-46ee-98d2-bfe9e7d60b90&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:53.354080&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:53.354080&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;9377a6ff-fccd-445e-a0ed-d5ffd1c3f42e&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:53,358 - core.services.deal_analysis - ERROR - Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n2025-03-05 02:48:53,362 - core.services.deal_analysis - WARNING - Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nWARNING:core.services.deal_analysis:Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:112 Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nWARNING  core.services.deal_analysis:deal_analysis.py:166 Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal_fetch_similar&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal_fetch_similar&#34;, &#34;duration&#34;: &#34;22 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal_fetch_similar&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;22 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\deal_analysis.py:107: in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850061435408&amp;#x27;&amp;gt;\n        goal       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850058151568&amp;#x27;&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794E64C50&amp;gt;\n        similar_deals = None\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n        name       = &amp;#x27;price_history&amp;#x27;\n        self       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850061435408&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_deal_analysis_service.py:230: in test_analyze_deal_fetch_similar\n    result = await deal_analysis_service.analyze_deal(mock_deal, mock_goal)\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794E64C50&amp;gt;\n        mock_deal  = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850061435408&amp;#x27;&amp;gt;\n        mock_goal  = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850058151568&amp;#x27;&amp;gt;\n        mock_market_service = &amp;lt;AsyncMock id=&amp;#x27;2850061452496&amp;#x27;&amp;gt;\n        mock_price_history =                          date       price  volume\n0  2025-02-02 18:48:53.470174  100.248621    3185\n1  2025-02-03 18:48:53.470174  104.553018    2533\n2  2025-02-04 18:48:53.470174   91.253565    2942\n3  2025-02-05 18:48:53.470174  105.136639    1838\n4  2025-02-06 18:48:53.470174  103.810086    4875\n5  2025-02-07 18:48:53.470174  101.695652    4503\n6  2025-02-08 18:48:53.470174  101.894212    4250\n7  2025-02-09 18:48:53.470174   96.229003    1279\n8  2025-02-10 18:48:53.470174  101.990799    3304\n9  2025-02-11 18:48:53.470174  103.815972    3015\n10 2025-02-12 18:48:53.470174   99.464196    3436\n11 2025-02-13 18:48:53.470174  107.199614    4590\n12 2025-02-14 18:48:53.470174  109.322019    2161\n13 2025-02-15 18:48:53.470174  105.941532    4516\n14 2025-02-16 18:48:53.470174  110.617539    1527\n15 2025-02-17 18:48:53.470174  108.768023    1565\n16 2025-02-18 18:48:53.470174  110.633811    3567\n17 2025-02-19 18:48:53.470174  113.288262    3209\n18 2025-02-20 18:48:53.470174  108.797571    3822\n19 2025-02-21 18:48:53.470174  114.647093    1624\n20 2025-02-22 18:48:53.470174  111.557436    2052\n21 2025-02-23 18:48:53.470174  122.255125    2964\n22 2025-02-24 18:48:53.470174  113.101987    4711\n23 2025-02-25 18:48:53.470174  112.633029    2023\n24 2025-02-26 18:48:53.470174  119.561442    1278\n25 2025-02-27 18:48:53.470174  121.917593    2886\n26 2025-02-28 18:48:53.470174  110.639530    2579\n27 2025-03-01 18:48:53.470174  116.472956    3976\n28 2025-03-02 18:48:53.470174  124.330807    1575\n29 2025-03-03 18:48:53.470174  116.508756    4911\n30 2025-03-04 18:48:53.470174  123.070533    1800\n        mock_similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:53.471239&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:53.471239&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;f4834c15-f37d-4134-9410-b3873943a398&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:53.471239&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:53.471239&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;652fcd20-34f8-4ee1-b658-c34efdd4445b&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:53.471239&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:53.471239&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;70430e39-691c-464c-a4d5-668868b16ba6&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\ncore\\services\\deal_analysis.py:113: in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\nE   core.exceptions.data_exceptions.DataQualityError: Invalid price history data\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850061435408&amp;#x27;&amp;gt;\n        goal       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850058151568&amp;#x27;&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794E64C50&amp;gt;\n        similar_deals = None\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:53,476 - core.services.deal_analysis - ERROR - Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n2025-03-05 02:48:53,479 - core.services.deal_analysis - WARNING - Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nWARNING:core.services.deal_analysis:Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:112 Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nWARNING  core.services.deal_analysis:deal_analysis.py:166 Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal_error_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal_error_handling&#34;, &#34;duration&#34;: &#34;15 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_analyze_deal_error_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;15 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\deal_analysis.py:107: in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850081506576&amp;#x27;&amp;gt;\n        goal       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850058110864&amp;#x27;&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297962F5C50&amp;gt;\n        similar_deals = None\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n        name       = &amp;#x27;price_history&amp;#x27;\n        self       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850081506576&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_deal_analysis_service.py:253: in test_analyze_deal_error_handling\n    await deal_analysis_service.analyze_deal(mock_deal, mock_goal)\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297962F5C50&amp;gt;\n        mock_deal  = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850081506576&amp;#x27;&amp;gt;\n        mock_goal  = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850058110864&amp;#x27;&amp;gt;\n        mock_market_service = &amp;lt;AsyncMock id=&amp;#x27;2850080979536&amp;#x27;&amp;gt;\ncore\\services\\deal_analysis.py:113: in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\nE   core.exceptions.data_exceptions.DataQualityError: Invalid price history data\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850081506576&amp;#x27;&amp;gt;\n        goal       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850058110864&amp;#x27;&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297962F5C50&amp;gt;\n        similar_deals = None\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:53,568 - core.services.deal_analysis - ERROR - Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n2025-03-05 02:48:53,571 - core.services.deal_analysis - WARNING - Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nWARNING:core.services.deal_analysis:Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:112 Error processing price history: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\nWARNING  core.services.deal_analysis:deal_analysis.py:166 Analysis validation error: Invalid price history data\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 107, in analyze_deal\n    price_history = pd.DataFrame(deal.price_history)\n                                 ^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;price_history&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 113, in analyze_deal\n    raise DataQualityError(&amp;quot;Invalid price history data&amp;quot;)\ncore.exceptions.data_exceptions.DataQualityError: Invalid price history data\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_generate_simplified_analysis&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_generate_simplified_analysis&#34;, &#34;duration&#34;: &#34;13 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_generate_simplified_analysis&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;13 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_deal_analysis_service.py:275: in test_generate_simplified_analysis\n    assert 0 &amp;lt;= result.risk_score &amp;lt;= 100\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029796346950&amp;gt;\n        mock_deal  = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083809680&amp;#x27;&amp;gt;\n        result     = AIAnalysis(deal_id=UUID(&amp;#x27;a103229e-aa81-48cf-a046-5cbabe0c39d9&amp;#x27;), score=0.5, confidence=0.5, price_analysis={&amp;#x27;is_good_deal&amp;#x27;: False}, market_analysis={}, recommendations=[&amp;#x27;Unable to analyze this deal.&amp;#x27;], analysis_date=datetime.datetime(2025, 3, 4, 18, 48, 53, 645022), expiration_analysis=&amp;#x27;Unknown&amp;#x27;)\n..\\venv\\Lib\\site-packages\\pydantic\\main.py:891: in __getattr__\n    raise AttributeError(f&amp;#x27;{type(self).__name__!r} object has no attribute {item!r}&amp;#x27;)\nE   AttributeError: &amp;#x27;AIAnalysis&amp;#x27; object has no attribute &amp;#x27;risk_score&amp;#x27;\n        __class__  = &amp;lt;class &amp;#x27;pydantic.main.BaseModel&amp;#x27;&amp;gt;\n        item       = &amp;#x27;risk_score&amp;#x27;\n        private_attributes = {}\n        pydantic_extra = None\n        self       = AIAnalysis(deal_id=UUID(&amp;#x27;a103229e-aa81-48cf-a046-5cbabe0c39d9&amp;#x27;), score=0.5, confidence=0.5, price_analysis={&amp;#x27;is_good_deal&amp;#x27;: False}, market_analysis={}, recommendations=[&amp;#x27;Unable to analyze this deal.&amp;#x27;], analysis_date=datetime.datetime(2025, 3, 4, 18, 48, 53, 645022), expiration_analysis=&amp;#x27;Unknown&amp;#x27;)\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:53,642 - core.services.deal_analysis - ERROR - Error generating simplified analysis: &amp;#x27;&amp;gt;&amp;#x27; not supported between instances of &amp;#x27;Mock&amp;#x27; and &amp;#x27;int&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 831, in generate_simplified_analysis\n    if original_price &amp;gt; 0:\n       ^^^^^^^^^^^^^^^^^^\nTypeError: &amp;#x27;&amp;gt;&amp;#x27; not supported between instances of &amp;#x27;Mock&amp;#x27; and &amp;#x27;int&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error generating simplified analysis: &amp;#x27;&amp;gt;&amp;#x27; not supported between instances of &amp;#x27;Mock&amp;#x27; and &amp;#x27;int&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 831, in generate_simplified_analysis\n    if original_price &amp;gt; 0:\n       ^^^^^^^^^^^^^^^^^^\nTypeError: &amp;#x27;&amp;gt;&amp;#x27; not supported between instances of &amp;#x27;Mock&amp;#x27; and &amp;#x27;int&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:874 Error generating simplified analysis: &amp;#x27;&amp;gt;&amp;#x27; not supported between instances of &amp;#x27;Mock&amp;#x27; and &amp;#x27;int&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 831, in generate_simplified_analysis\n    if original_price &amp;gt; 0:\n       ^^^^^^^^^^^^^^^^^^\nTypeError: &amp;#x27;&amp;gt;&amp;#x27; not supported between instances of &amp;#x27;Mock&amp;#x27; and &amp;#x27;int&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_price&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_price&#34;, &#34;duration&#34;: &#34;19 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_analyze_price&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;19 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\deal_analysis.py:261: in _analyze_price\n    metrics[&amp;quot;market_position&amp;quot;] = (avg_price - current_price) / avg_price\nE   TypeError: unsupported operand type(s) for -: &amp;#x27;float&amp;#x27; and &amp;#x27;decimal.Decimal&amp;#x27;\n        LinearRegression = &amp;lt;class &amp;#x27;sklearn.linear_model._base.LinearRegression&amp;#x27;&amp;gt;\n        avg_price  = 110.5\n        current_price = Decimal(&amp;#x27;110.50&amp;#x27;)\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083010640&amp;#x27;&amp;gt;\n        decomposition = &amp;lt;statsmodels.tsa.seasonal.DecomposeResult object at 0x000002979634F290&amp;gt;\n        metrics    = {&amp;#x27;current_price&amp;#x27;: Decimal(&amp;#x27;110.50&amp;#x27;),\n &amp;#x27;market_position&amp;#x27;: 0.0,\n &amp;#x27;price_momentum&amp;#x27;: 0.16468378041438897,\n &amp;#x27;price_trend&amp;#x27;: 0.5926440692148842,\n &amp;#x27;price_volatility&amp;#x27;: 0.03907722000460123,\n &amp;#x27;seasonality_score&amp;#x27;: 2.5829104194087855}\n        momentum   = 0.16468378041438897\n        price_history =                          date       price  volume\n0  2025-02-02 18:48:53.683868  101.522992    3055\n1  2025-02-03 18:48:53.683868  101.325674    3083\n2  2025-02-04 18:48:53.683868  108.499687    2690\n3  2025-02-05 18:48:53.683868  106.229804    2754\n4  2025-02-06 18:48:53.683868   96.865751    3132\n5  2025-02-07 18:48:53.683868  104.405912    2985\n6  2025-02-08 18:48:53.683868  111.669502    2680\n7  2025-02-09 18:48:53.683868   99.027007    2341\n8  2025-02-10 18:48:53.683868  104.184508    2193\n9  2025-02-11 18:48:53.683868  108.801979    2062\n10 2025-02-12 18:48:53.683868  103.745729    2863\n11 2025-02-13 18:48:53.683868  103.604510    3128\n12 2025-02-14 18:48:53.683868  117.821421    3459\n13 2025-02-15 18:48:53.683868  110.608228    4622\n14 2025-02-16 18:48:53.683868  109.152801    1841\n15 2025-02-17 18:48:53.683868  110.157560    3532\n16 2025-02-18 18:48:53.683868  111.986989    1606\n17 2025-02-19 18:48:53.683868  105.723442    3723\n18 2025-02-20 18:48:53.683868  110.821224    3041\n19 2025-02-21 18:48:53.683868  110.074620    1545\n20 2025-02-22 18:48:53.683868  119.446738    1671\n21 2025-02-23 18:48:53.683868  121.210418    2588\n22 2025-02-24 18:48:53.683868  110.837704    1744\n23 2025-02-25 18:48:53.683868  118.339775    4713\n24 2025-02-26 18:48:53.683868  117.252063    3677\n25 2025-02-27 18:48:53.683868  114.347874    4309\n26 2025-02-28 18:48:53.683868  108.577330    2489\n27 2025-03-01 18:48:53.683868  123.800594    3723\n28 2025-03-02 18:48:53.683868  116.446964    4670\n29 2025-03-03 18:48:53.683868  120.921435    3930\n30 2025-03-04 18:48:53.683868  118.242182    4210\n        prices     = array([101.52299193, 101.32567394, 108.49968705, 106.2298045 ,\n        96.8657507 , 104.40591154, 111.66950234,  99.02700726,\n       104.18450779, 108.80197911, 103.74572851, 103.60450999,\n       117.8214207 , 110.60822777, 109.1528014 , 110.15755967,\n       111.9869891 , 105.723442  , 110.82122354, 110.07461993,\n       119.44673837, 121.21041789, 110.83770442, 118.3397752 ,\n       117.25206338, 114.34787389, 108.57732968, 123.80059395,\n       116.44696435, 120.92143491, 118.24218203])\n        reg        = LinearRegression()\n        seasonal_decompose = &amp;lt;function seasonal_decompose at 0x00000297928F14E0&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x000002979619E550&amp;gt;\n        similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;d5bf9600-8124-47a7-8725-8ca3483a830c&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;ac239733-ea5d-41c2-88f5-e92a2230d0ff&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;1e3ebb55-a540-4740-a851-7597d37c381e&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\n        similar_prices = [110.5, 105.2, 115.8]\n        x          = array([[ 0],\n       [ 1],\n       [ 2],\n       [ 3],\n       [ 4],\n       [ 5],\n       [ 6],\n       [ 7],\n       [ 8],\n       [ 9],\n       [10],\n       [11],\n       [12],\n       [13],\n       [14],\n       [15],\n       [16],\n       [17],\n       [18],\n       [19],\n       [20],\n       [21],\n       [22],\n       [23],\n       [24],\n       [25],\n       [26],\n       [27],\n       [28],\n       [29],\n       [30]])\n        y          = array([[101.52299193],\n       [101.32567394],\n       [108.49968705],\n       [106.2298045 ],\n       [ 96.8657507 ],\n       [104.40591154],\n       [111.66950234],\n       [ 99.02700726],\n       [104.18450779],\n       [108.80197911],\n       [103.74572851],\n       [103.60450999],\n       [117.8214207 ],\n       [110.60822777],\n       [109.1528014 ],\n       [110.15755967],\n       [111.9869891 ],\n       [105.723442  ],\n       [110.82122354],\n       [110.07461993],\n       [119.44673837],\n       [121.21041789],\n       [110.83770442],\n       [118.3397752 ],\n       [117.25206338],\n       [114.34787389],\n       [108.57732968],\n       [123.80059395],\n       [116.44696435],\n       [120.92143491],\n       [118.24218203]])\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_deal_analysis_service.py:294: in test_analyze_price\n    result = await deal_analysis_service._analyze_price(mock_deal, mock_price_history, mock_similar_deals)\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x000002979619E550&amp;gt;\n        mock_deal  = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083010640&amp;#x27;&amp;gt;\n        mock_price_history =                          date       price  volume\n0  2025-02-02 18:48:53.683868  101.522992    3055\n1  2025-02-03 18:48:53.683868  101.325674    3083\n2  2025-02-04 18:48:53.683868  108.499687    2690\n3  2025-02-05 18:48:53.683868  106.229804    2754\n4  2025-02-06 18:48:53.683868   96.865751    3132\n5  2025-02-07 18:48:53.683868  104.405912    2985\n6  2025-02-08 18:48:53.683868  111.669502    2680\n7  2025-02-09 18:48:53.683868   99.027007    2341\n8  2025-02-10 18:48:53.683868  104.184508    2193\n9  2025-02-11 18:48:53.683868  108.801979    2062\n10 2025-02-12 18:48:53.683868  103.745729    2863\n11 2025-02-13 18:48:53.683868  103.604510    3128\n12 2025-02-14 18:48:53.683868  117.821421    3459\n13 2025-02-15 18:48:53.683868  110.608228    4622\n14 2025-02-16 18:48:53.683868  109.152801    1841\n15 2025-02-17 18:48:53.683868  110.157560    3532\n16 2025-02-18 18:48:53.683868  111.986989    1606\n17 2025-02-19 18:48:53.683868  105.723442    3723\n18 2025-02-20 18:48:53.683868  110.821224    3041\n19 2025-02-21 18:48:53.683868  110.074620    1545\n20 2025-02-22 18:48:53.683868  119.446738    1671\n21 2025-02-23 18:48:53.683868  121.210418    2588\n22 2025-02-24 18:48:53.683868  110.837704    1744\n23 2025-02-25 18:48:53.683868  118.339775    4713\n24 2025-02-26 18:48:53.683868  117.252063    3677\n25 2025-02-27 18:48:53.683868  114.347874    4309\n26 2025-02-28 18:48:53.683868  108.577330    2489\n27 2025-03-01 18:48:53.683868  123.800594    3723\n28 2025-03-02 18:48:53.683868  116.446964    4670\n29 2025-03-03 18:48:53.683868  120.921435    3930\n30 2025-03-04 18:48:53.683868  118.242182    4210\n        mock_similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;d5bf9600-8124-47a7-8725-8ca3483a830c&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;ac239733-ea5d-41c2-88f5-e92a2230d0ff&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;1e3ebb55-a540-4740-a851-7597d37c381e&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\ncore\\services\\deal_analysis.py:273: in _analyze_price\n    raise DealAnalysisError(f&amp;quot;Failed to analyze price: {str(e)}&amp;quot;)\nE   core.exceptions.deal_exceptions.DealAnalysisError: Failed to analyze price: unsupported operand type(s) for -: &amp;#x27;float&amp;#x27; and &amp;#x27;decimal.Decimal&amp;#x27;\n        LinearRegression = &amp;lt;class &amp;#x27;sklearn.linear_model._base.LinearRegression&amp;#x27;&amp;gt;\n        avg_price  = 110.5\n        current_price = Decimal(&amp;#x27;110.50&amp;#x27;)\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083010640&amp;#x27;&amp;gt;\n        decomposition = &amp;lt;statsmodels.tsa.seasonal.DecomposeResult object at 0x000002979634F290&amp;gt;\n        metrics    = {&amp;#x27;current_price&amp;#x27;: Decimal(&amp;#x27;110.50&amp;#x27;),\n &amp;#x27;market_position&amp;#x27;: 0.0,\n &amp;#x27;price_momentum&amp;#x27;: 0.16468378041438897,\n &amp;#x27;price_trend&amp;#x27;: 0.5926440692148842,\n &amp;#x27;price_volatility&amp;#x27;: 0.03907722000460123,\n &amp;#x27;seasonality_score&amp;#x27;: 2.5829104194087855}\n        momentum   = 0.16468378041438897\n        price_history =                          date       price  volume\n0  2025-02-02 18:48:53.683868  101.522992    3055\n1  2025-02-03 18:48:53.683868  101.325674    3083\n2  2025-02-04 18:48:53.683868  108.499687    2690\n3  2025-02-05 18:48:53.683868  106.229804    2754\n4  2025-02-06 18:48:53.683868   96.865751    3132\n5  2025-02-07 18:48:53.683868  104.405912    2985\n6  2025-02-08 18:48:53.683868  111.669502    2680\n7  2025-02-09 18:48:53.683868   99.027007    2341\n8  2025-02-10 18:48:53.683868  104.184508    2193\n9  2025-02-11 18:48:53.683868  108.801979    2062\n10 2025-02-12 18:48:53.683868  103.745729    2863\n11 2025-02-13 18:48:53.683868  103.604510    3128\n12 2025-02-14 18:48:53.683868  117.821421    3459\n13 2025-02-15 18:48:53.683868  110.608228    4622\n14 2025-02-16 18:48:53.683868  109.152801    1841\n15 2025-02-17 18:48:53.683868  110.157560    3532\n16 2025-02-18 18:48:53.683868  111.986989    1606\n17 2025-02-19 18:48:53.683868  105.723442    3723\n18 2025-02-20 18:48:53.683868  110.821224    3041\n19 2025-02-21 18:48:53.683868  110.074620    1545\n20 2025-02-22 18:48:53.683868  119.446738    1671\n21 2025-02-23 18:48:53.683868  121.210418    2588\n22 2025-02-24 18:48:53.683868  110.837704    1744\n23 2025-02-25 18:48:53.683868  118.339775    4713\n24 2025-02-26 18:48:53.683868  117.252063    3677\n25 2025-02-27 18:48:53.683868  114.347874    4309\n26 2025-02-28 18:48:53.683868  108.577330    2489\n27 2025-03-01 18:48:53.683868  123.800594    3723\n28 2025-03-02 18:48:53.683868  116.446964    4670\n29 2025-03-03 18:48:53.683868  120.921435    3930\n30 2025-03-04 18:48:53.683868  118.242182    4210\n        prices     = array([101.52299193, 101.32567394, 108.49968705, 106.2298045 ,\n        96.8657507 , 104.40591154, 111.66950234,  99.02700726,\n       104.18450779, 108.80197911, 103.74572851, 103.60450999,\n       117.8214207 , 110.60822777, 109.1528014 , 110.15755967,\n       111.9869891 , 105.723442  , 110.82122354, 110.07461993,\n       119.44673837, 121.21041789, 110.83770442, 118.3397752 ,\n       117.25206338, 114.34787389, 108.57732968, 123.80059395,\n       116.44696435, 120.92143491, 118.24218203])\n        reg        = LinearRegression()\n        seasonal_decompose = &amp;lt;function seasonal_decompose at 0x00000297928F14E0&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x000002979619E550&amp;gt;\n        similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;d5bf9600-8124-47a7-8725-8ca3483a830c&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;ac239733-ea5d-41c2-88f5-e92a2230d0ff&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:53.684403&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:53.684403&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;1e3ebb55-a540-4740-a851-7597d37c381e&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\n        similar_prices = [110.5, 105.2, 115.8]\n        x          = array([[ 0],\n       [ 1],\n       [ 2],\n       [ 3],\n       [ 4],\n       [ 5],\n       [ 6],\n       [ 7],\n       [ 8],\n       [ 9],\n       [10],\n       [11],\n       [12],\n       [13],\n       [14],\n       [15],\n       [16],\n       [17],\n       [18],\n       [19],\n       [20],\n       [21],\n       [22],\n       [23],\n       [24],\n       [25],\n       [26],\n       [27],\n       [28],\n       [29],\n       [30]])\n        y          = array([[101.52299193],\n       [101.32567394],\n       [108.49968705],\n       [106.2298045 ],\n       [ 96.8657507 ],\n       [104.40591154],\n       [111.66950234],\n       [ 99.02700726],\n       [104.18450779],\n       [108.80197911],\n       [103.74572851],\n       [103.60450999],\n       [117.8214207 ],\n       [110.60822777],\n       [109.1528014 ],\n       [110.15755967],\n       [111.9869891 ],\n       [105.723442  ],\n       [110.82122354],\n       [110.07461993],\n       [119.44673837],\n       [121.21041789],\n       [110.83770442],\n       [118.3397752 ],\n       [117.25206338],\n       [114.34787389],\n       [108.57732968],\n       [123.80059395],\n       [116.44696435],\n       [120.92143491],\n       [118.24218203]])\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:53,688 - core.services.deal_analysis - ERROR - Error in price analysis: unsupported operand type(s) for -: &amp;#x27;float&amp;#x27; and &amp;#x27;decimal.Decimal&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 261, in _analyze_price\n    metrics[&amp;quot;market_position&amp;quot;] = (avg_price - current_price) / avg_price\n                                  ~~~~~~~~~~^~~~~~~~~~~~~~~\nTypeError: unsupported operand type(s) for -: &amp;#x27;float&amp;#x27; and &amp;#x27;decimal.Decimal&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error in price analysis: unsupported operand type(s) for -: &amp;#x27;float&amp;#x27; and &amp;#x27;decimal.Decimal&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 261, in _analyze_price\n    metrics[&amp;quot;market_position&amp;quot;] = (avg_price - current_price) / avg_price\n                                  ~~~~~~~~~~^~~~~~~~~~~~~~~\nTypeError: unsupported operand type(s) for -: &amp;#x27;float&amp;#x27; and &amp;#x27;decimal.Decimal&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:272 Error in price analysis: unsupported operand type(s) for -: &amp;#x27;float&amp;#x27; and &amp;#x27;decimal.Decimal&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 261, in _analyze_price\n    metrics[&amp;quot;market_position&amp;quot;] = (avg_price - current_price) / avg_price\n                                  ~~~~~~~~~~^~~~~~~~~~~~~~~\nTypeError: unsupported operand type(s) for -: &amp;#x27;float&amp;#x27; and &amp;#x27;decimal.Decimal&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_historical_data&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_historical_data&#34;, &#34;duration&#34;: &#34;14 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_analyze_historical_data&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;14 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;..\\venv\\Lib\\site-packages\\pandas\\core\\indexes\\base.py:3802: in get_loc\n    return self._engine.get_loc(casted_key)\n        casted_key = &amp;#x27;timestamp&amp;#x27;\n        key        = &amp;#x27;timestamp&amp;#x27;\n        self       = Index([&amp;#x27;date&amp;#x27;, &amp;#x27;price&amp;#x27;, &amp;#x27;volume&amp;#x27;], dtype=&amp;#x27;object&amp;#x27;)\nindex.pyx:153: in pandas._libs.index.IndexEngine.get_loc\n    ???\nindex.pyx:182: in pandas._libs.index.IndexEngine.get_loc\n    ???\npandas\\\\_libs\\\\hashtable_class_helper.pxi:7081: in pandas._libs.hashtable.PyObjectHashTable.get_item\n    ???\npandas\\\\_libs\\\\hashtable_class_helper.pxi:7089: in pandas._libs.hashtable.PyObjectHashTable.get_item\n    ???\nE   KeyError: &amp;#x27;timestamp&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\ncore\\services\\deal_analysis.py:301: in _analyze_historical_data\n    last_change = price_history[\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083838864&amp;#x27;&amp;gt;\n        metrics    = {&amp;#x27;days_at_current_price&amp;#x27;: 0,\n &amp;#x27;historical_high&amp;#x27;: 129.31946550695312,\n &amp;#x27;historical_low&amp;#x27;: 96.35553132058027,\n &amp;#x27;price_range_position&amp;#x27;: 0.5,\n &amp;#x27;price_stability&amp;#x27;: 0.0,\n &amp;#x27;trend_strength&amp;#x27;: 0.0,\n &amp;#x27;volatility_trend&amp;#x27;: 0.0}\n        price_history =                          date       price  volume\n0  2025-02-02 18:48:53.742040  103.995297    1569\n1  2025-02-03 18:48:53.742040   96.355531    2052\n2  2025-02-04 18:48:53.742040  111.740840    2588\n3  2025-02-05 18:48:53.742040  107.004717    4802\n4  2025-02-06 18:48:53.742040  101.778874    3051\n5  2025-02-07 18:48:53.742040  107.546571    2796\n6  2025-02-08 18:48:53.742040  104.126996    2830\n7  2025-02-09 18:48:53.742040  103.386628    2587\n8  2025-02-10 18:48:53.742040  104.681504    2482\n9  2025-02-11 18:48:53.742040   98.970795    4289\n10 2025-02-12 18:48:53.742040  111.351799    3501\n11 2025-02-13 18:48:53.742040  107.147339    4247\n12 2025-02-14 18:48:53.742040  106.030181    3464\n13 2025-02-15 18:48:53.742040  110.249695    1142\n14 2025-02-16 18:48:53.742040  113.930134    4570\n15 2025-02-17 18:48:53.742040  106.528400    1504\n16 2025-02-18 18:48:53.742040  107.726278    3857\n17 2025-02-19 18:48:53.742040  110.897262    1982\n18 2025-02-20 18:48:53.742040  110.355993    3555\n19 2025-02-21 18:48:53.742040  124.402004    2072\n20 2025-02-22 18:48:53.742040  114.593821    3489\n21 2025-02-23 18:48:53.742040  111.617696    3567\n22 2025-02-24 18:48:53.742040  111.452633    4923\n23 2025-02-25 18:48:53.742040  109.116314    4062\n24 2025-02-26 18:48:53.742040  126.581147    3138\n25 2025-02-27 18:48:53.742040  115.993015    3330\n26 2025-02-28 18:48:53.742040  123.484475    4111\n27 2025-03-01 18:48:53.742040  119.304337    4563\n28 2025-03-02 18:48:53.742040  109.902322    1074\n29 2025-03-03 18:48:53.742040  121.859557    4551\n30 2025-03-04 18:48:53.742040  129.319466    3846\n        prices     = array([103.99529671,  96.35553132, 111.74083975, 107.00471677,\n       101.77887386, 107.54657139, 104.12699624, 103.38662793,\n       104.68150439,  98.97079549, 111.35179862, 107.14733943,\n       106.03018069, 110.24969452, 113.93013389, 106.52840009,\n       107.72627752, 110.8972625 , 110.35599297, 124.40200383,\n       114.59382072, 111.61769646, 111.45263267, 109.1163139 ,\n       126.58114663, 115.9930154 , 123.48447468, 119.30433706,\n       109.90232211, 121.85955745, 129.31946551])\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794D94B10&amp;gt;\n..\\venv\\Lib\\site-packages\\pandas\\core\\frame.py:4090: in __getitem__\n    indexer = self.columns.get_loc(key)\n        is_mi      = False\n        is_single_key = True\n        key        = &amp;#x27;timestamp&amp;#x27;\n        self       =                          date       price  volume\n0  2025-02-02 18:48:53.742040  103.995297    1569\n1  2025-02-03 18:48:53.742040   96.355531    2052\n2  2025-02-04 18:48:53.742040  111.740840    2588\n3  2025-02-05 18:48:53.742040  107.004717    4802\n4  2025-02-06 18:48:53.742040  101.778874    3051\n5  2025-02-07 18:48:53.742040  107.546571    2796\n6  2025-02-08 18:48:53.742040  104.126996    2830\n7  2025-02-09 18:48:53.742040  103.386628    2587\n8  2025-02-10 18:48:53.742040  104.681504    2482\n9  2025-02-11 18:48:53.742040   98.970795    4289\n10 2025-02-12 18:48:53.742040  111.351799    3501\n11 2025-02-13 18:48:53.742040  107.147339    4247\n12 2025-02-14 18:48:53.742040  106.030181    3464\n13 2025-02-15 18:48:53.742040  110.249695    1142\n14 2025-02-16 18:48:53.742040  113.930134    4570\n15 2025-02-17 18:48:53.742040  106.528400    1504\n16 2025-02-18 18:48:53.742040  107.726278    3857\n17 2025-02-19 18:48:53.742040  110.897262    1982\n18 2025-02-20 18:48:53.742040  110.355993    3555\n19 2025-02-21 18:48:53.742040  124.402004    2072\n20 2025-02-22 18:48:53.742040  114.593821    3489\n21 2025-02-23 18:48:53.742040  111.617696    3567\n22 2025-02-24 18:48:53.742040  111.452633    4923\n23 2025-02-25 18:48:53.742040  109.116314    4062\n24 2025-02-26 18:48:53.742040  126.581147    3138\n25 2025-02-27 18:48:53.742040  115.993015    3330\n26 2025-02-28 18:48:53.742040  123.484475    4111\n27 2025-03-01 18:48:53.742040  119.304337    4563\n28 2025-03-02 18:48:53.742040  109.902322    1074\n29 2025-03-03 18:48:53.742040  121.859557    4551\n30 2025-03-04 18:48:53.742040  129.319466    3846\n..\\venv\\Lib\\site-packages\\pandas\\core\\indexes\\base.py:3809: in get_loc\n    raise KeyError(key) from err\nE   KeyError: &amp;#x27;timestamp&amp;#x27;\n        casted_key = &amp;#x27;timestamp&amp;#x27;\n        key        = &amp;#x27;timestamp&amp;#x27;\n        self       = Index([&amp;#x27;date&amp;#x27;, &amp;#x27;price&amp;#x27;, &amp;#x27;volume&amp;#x27;], dtype=&amp;#x27;object&amp;#x27;)\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_deal_analysis_service.py:314: in test_analyze_historical_data\n    result = await deal_analysis_service._analyze_historical_data(mock_deal, mock_price_history)\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794D94B10&amp;gt;\n        mock_deal  = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083838864&amp;#x27;&amp;gt;\n        mock_price_history =                          date       price  volume\n0  2025-02-02 18:48:53.742040  103.995297    1569\n1  2025-02-03 18:48:53.742040   96.355531    2052\n2  2025-02-04 18:48:53.742040  111.740840    2588\n3  2025-02-05 18:48:53.742040  107.004717    4802\n4  2025-02-06 18:48:53.742040  101.778874    3051\n5  2025-02-07 18:48:53.742040  107.546571    2796\n6  2025-02-08 18:48:53.742040  104.126996    2830\n7  2025-02-09 18:48:53.742040  103.386628    2587\n8  2025-02-10 18:48:53.742040  104.681504    2482\n9  2025-02-11 18:48:53.742040   98.970795    4289\n10 2025-02-12 18:48:53.742040  111.351799    3501\n11 2025-02-13 18:48:53.742040  107.147339    4247\n12 2025-02-14 18:48:53.742040  106.030181    3464\n13 2025-02-15 18:48:53.742040  110.249695    1142\n14 2025-02-16 18:48:53.742040  113.930134    4570\n15 2025-02-17 18:48:53.742040  106.528400    1504\n16 2025-02-18 18:48:53.742040  107.726278    3857\n17 2025-02-19 18:48:53.742040  110.897262    1982\n18 2025-02-20 18:48:53.742040  110.355993    3555\n19 2025-02-21 18:48:53.742040  124.402004    2072\n20 2025-02-22 18:48:53.742040  114.593821    3489\n21 2025-02-23 18:48:53.742040  111.617696    3567\n22 2025-02-24 18:48:53.742040  111.452633    4923\n23 2025-02-25 18:48:53.742040  109.116314    4062\n24 2025-02-26 18:48:53.742040  126.581147    3138\n25 2025-02-27 18:48:53.742040  115.993015    3330\n26 2025-02-28 18:48:53.742040  123.484475    4111\n27 2025-03-01 18:48:53.742040  119.304337    4563\n28 2025-03-02 18:48:53.742040  109.902322    1074\n29 2025-03-03 18:48:53.742040  121.859557    4551\n30 2025-03-04 18:48:53.742040  129.319466    3846\ncore\\services\\deal_analysis.py:343: in _analyze_historical_data\n    raise DealAnalysisError(f&amp;quot;Failed to analyze historical data: {str(e)}&amp;quot;)\nE   core.exceptions.deal_exceptions.DealAnalysisError: Failed to analyze historical data: &amp;#x27;timestamp&amp;#x27;\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083838864&amp;#x27;&amp;gt;\n        metrics    = {&amp;#x27;days_at_current_price&amp;#x27;: 0,\n &amp;#x27;historical_high&amp;#x27;: 129.31946550695312,\n &amp;#x27;historical_low&amp;#x27;: 96.35553132058027,\n &amp;#x27;price_range_position&amp;#x27;: 0.5,\n &amp;#x27;price_stability&amp;#x27;: 0.0,\n &amp;#x27;trend_strength&amp;#x27;: 0.0,\n &amp;#x27;volatility_trend&amp;#x27;: 0.0}\n        price_history =                          date       price  volume\n0  2025-02-02 18:48:53.742040  103.995297    1569\n1  2025-02-03 18:48:53.742040   96.355531    2052\n2  2025-02-04 18:48:53.742040  111.740840    2588\n3  2025-02-05 18:48:53.742040  107.004717    4802\n4  2025-02-06 18:48:53.742040  101.778874    3051\n5  2025-02-07 18:48:53.742040  107.546571    2796\n6  2025-02-08 18:48:53.742040  104.126996    2830\n7  2025-02-09 18:48:53.742040  103.386628    2587\n8  2025-02-10 18:48:53.742040  104.681504    2482\n9  2025-02-11 18:48:53.742040   98.970795    4289\n10 2025-02-12 18:48:53.742040  111.351799    3501\n11 2025-02-13 18:48:53.742040  107.147339    4247\n12 2025-02-14 18:48:53.742040  106.030181    3464\n13 2025-02-15 18:48:53.742040  110.249695    1142\n14 2025-02-16 18:48:53.742040  113.930134    4570\n15 2025-02-17 18:48:53.742040  106.528400    1504\n16 2025-02-18 18:48:53.742040  107.726278    3857\n17 2025-02-19 18:48:53.742040  110.897262    1982\n18 2025-02-20 18:48:53.742040  110.355993    3555\n19 2025-02-21 18:48:53.742040  124.402004    2072\n20 2025-02-22 18:48:53.742040  114.593821    3489\n21 2025-02-23 18:48:53.742040  111.617696    3567\n22 2025-02-24 18:48:53.742040  111.452633    4923\n23 2025-02-25 18:48:53.742040  109.116314    4062\n24 2025-02-26 18:48:53.742040  126.581147    3138\n25 2025-02-27 18:48:53.742040  115.993015    3330\n26 2025-02-28 18:48:53.742040  123.484475    4111\n27 2025-03-01 18:48:53.742040  119.304337    4563\n28 2025-03-02 18:48:53.742040  109.902322    1074\n29 2025-03-03 18:48:53.742040  121.859557    4551\n30 2025-03-04 18:48:53.742040  129.319466    3846\n        prices     = array([103.99529671,  96.35553132, 111.74083975, 107.00471677,\n       101.77887386, 107.54657139, 104.12699624, 103.38662793,\n       104.68150439,  98.97079549, 111.35179862, 107.14733943,\n       106.03018069, 110.24969452, 113.93013389, 106.52840009,\n       107.72627752, 110.8972625 , 110.35599297, 124.40200383,\n       114.59382072, 111.61769646, 111.45263267, 109.1163139 ,\n       126.58114663, 115.9930154 , 123.48447468, 119.30433706,\n       109.90232211, 121.85955745, 129.31946551])\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794D94B10&amp;gt;\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:53,744 - core.services.deal_analysis - ERROR - Error in historical analysis: &amp;#x27;timestamp&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\indexes\\base.py&amp;quot;, line 3802, in get_loc\n    return self._engine.get_loc(casted_key)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;index.pyx&amp;quot;, line 153, in pandas._libs.index.IndexEngine.get_loc\n  File &amp;quot;index.pyx&amp;quot;, line 182, in pandas._libs.index.IndexEngine.get_loc\n  File &amp;quot;pandas\\\\_libs\\\\hashtable_class_helper.pxi&amp;quot;, line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item\n  File &amp;quot;pandas\\\\_libs\\\\hashtable_class_helper.pxi&amp;quot;, line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item\nKeyError: &amp;#x27;timestamp&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 301, in _analyze_historical_data\n    last_change = price_history[\n                  ^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\frame.py&amp;quot;, line 4090, in __getitem__\n    indexer = self.columns.get_loc(key)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\indexes\\base.py&amp;quot;, line 3809, in get_loc\n    raise KeyError(key) from err\nKeyError: &amp;#x27;timestamp&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error in historical analysis: &amp;#x27;timestamp&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\indexes\\base.py&amp;quot;, line 3802, in get_loc\n    return self._engine.get_loc(casted_key)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;index.pyx&amp;quot;, line 153, in pandas._libs.index.IndexEngine.get_loc\n  File &amp;quot;index.pyx&amp;quot;, line 182, in pandas._libs.index.IndexEngine.get_loc\n  File &amp;quot;pandas\\\\_libs\\\\hashtable_class_helper.pxi&amp;quot;, line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item\n  File &amp;quot;pandas\\\\_libs\\\\hashtable_class_helper.pxi&amp;quot;, line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item\nKeyError: &amp;#x27;timestamp&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 301, in _analyze_historical_data\n    last_change = price_history[\n                  ^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\frame.py&amp;quot;, line 4090, in __getitem__\n    indexer = self.columns.get_loc(key)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\indexes\\base.py&amp;quot;, line 3809, in get_loc\n    raise KeyError(key) from err\nKeyError: &amp;#x27;timestamp&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:342 Error in historical analysis: &amp;#x27;timestamp&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\indexes\\base.py&amp;quot;, line 3802, in get_loc\n    return self._engine.get_loc(casted_key)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;index.pyx&amp;quot;, line 153, in pandas._libs.index.IndexEngine.get_loc\n  File &amp;quot;index.pyx&amp;quot;, line 182, in pandas._libs.index.IndexEngine.get_loc\n  File &amp;quot;pandas\\\\_libs\\\\hashtable_class_helper.pxi&amp;quot;, line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item\n  File &amp;quot;pandas\\\\_libs\\\\hashtable_class_helper.pxi&amp;quot;, line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item\nKeyError: &amp;#x27;timestamp&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 301, in _analyze_historical_data\n    last_change = price_history[\n                  ^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\frame.py&amp;quot;, line 4090, in __getitem__\n    indexer = self.columns.get_loc(key)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\pandas\\core\\indexes\\base.py&amp;quot;, line 3809, in get_loc\n    raise KeyError(key) from err\nKeyError: &amp;#x27;timestamp&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_market_data&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_market_data&#34;, &#34;duration&#34;: &#34;10 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_analyze_market_data&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;10 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\deal_analysis.py:354: in _analyze_market_data\n    &amp;quot;availability_score&amp;quot;: 1.0 if deal.is_available else 0.0,\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083802704&amp;#x27;&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297961BD690&amp;gt;\n        similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;3698ea9c-5786-43eb-a6bb-65c92f63fb33&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;ad12f785-4d27-4893-a2ec-6c142a8edc8a&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;a9485deb-26e2-424c-aec8-f3bfbc0669b1&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;is_available&amp;#x27;\n        name       = &amp;#x27;is_available&amp;#x27;\n        self       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083802704&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_deal_analysis_service.py:334: in test_analyze_market_data\n    result = await deal_analysis_service._analyze_market_data(mock_deal, mock_similar_deals)\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297961BD690&amp;gt;\n        mock_deal  = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083802704&amp;#x27;&amp;gt;\n        mock_similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;3698ea9c-5786-43eb-a6bb-65c92f63fb33&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;ad12f785-4d27-4893-a2ec-6c142a8edc8a&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;a9485deb-26e2-424c-aec8-f3bfbc0669b1&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\ncore\\services\\deal_analysis.py:397: in _analyze_market_data\n    raise DealAnalysisError(f&amp;quot;Failed to analyze market data: {str(e)}&amp;quot;)\nE   core.exceptions.deal_exceptions.DealAnalysisError: Failed to analyze market data: Mock object has no attribute &amp;#x27;is_available&amp;#x27;\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850083802704&amp;#x27;&amp;gt;\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x00000297961BD690&amp;gt;\n        similar_deals = [{&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-03-02T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-27T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature2&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;3698ea9c-5786-43eb-a6bb-65c92f63fb33&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1000000,\n  &amp;#x27;price&amp;#x27;: 110.5,\n  &amp;#x27;score&amp;#x27;: 85,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5000},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-25T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-22T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature1&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;ad12f785-4d27-4893-a2ec-6c142a8edc8a&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 950000,\n  &amp;#x27;price&amp;#x27;: 105.2,\n  &amp;#x27;score&amp;#x27;: 78,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 4500},\n {&amp;#x27;completed_at&amp;#x27;: &amp;#x27;2025-02-20T18:48:54.201270&amp;#x27;,\n  &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-02-17T18:48:54.201270&amp;#x27;,\n  &amp;#x27;features&amp;#x27;: [&amp;#x27;feature2&amp;#x27;, &amp;#x27;feature3&amp;#x27;],\n  &amp;#x27;id&amp;#x27;: &amp;#x27;a9485deb-26e2-424c-aec8-f3bfbc0669b1&amp;#x27;,\n  &amp;#x27;market_cap&amp;#x27;: 1100000,\n  &amp;#x27;price&amp;#x27;: 115.8,\n  &amp;#x27;score&amp;#x27;: 92,\n  &amp;#x27;status&amp;#x27;: &amp;#x27;completed&amp;#x27;,\n  &amp;#x27;volume&amp;#x27;: 5500}]\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:54,202 - core.services.deal_analysis - ERROR - Error in market analysis: Mock object has no attribute &amp;#x27;is_available&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 354, in _analyze_market_data\n    &amp;quot;availability_score&amp;quot;: 1.0 if deal.is_available else 0.0,\n                                 ^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;is_available&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error in market analysis: Mock object has no attribute &amp;#x27;is_available&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 354, in _analyze_market_data\n    &amp;quot;availability_score&amp;quot;: 1.0 if deal.is_available else 0.0,\n                                 ^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;is_available&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:396 Error in market analysis: Mock object has no attribute &amp;#x27;is_available&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 354, in _analyze_market_data\n    &amp;quot;availability_score&amp;quot;: 1.0 if deal.is_available else 0.0,\n                                 ^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;is_available&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_goal_fit&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_analyze_goal_fit&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_analyze_goal_fit&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\deal_analysis.py:411: in _analyze_goal_fit\n    if goal.max_price:\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850085936976&amp;#x27;&amp;gt;\n        goal       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850087404944&amp;#x27;&amp;gt;\n        metrics    = {&amp;#x27;brand_match&amp;#x27;: 0.0,\n &amp;#x27;criteria_match&amp;#x27;: 0.0,\n &amp;#x27;feature_match&amp;#x27;: 0.0,\n &amp;#x27;price_match&amp;#x27;: 0.0,\n &amp;#x27;urgency_score&amp;#x27;: 0.0}\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x000002979688B510&amp;gt;\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:653: in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nE   AttributeError: Mock object has no attribute &amp;#x27;max_price&amp;#x27;\n        name       = &amp;#x27;max_price&amp;#x27;\n        self       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850087404944&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_deal_analysis_service.py:351: in test_analyze_goal_fit\n    result = deal_analysis_service._analyze_goal_fit(mock_deal, mock_goal)\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x000002979688B510&amp;gt;\n        mock_deal  = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850085936976&amp;#x27;&amp;gt;\n        mock_goal  = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850087404944&amp;#x27;&amp;gt;\ncore\\services\\deal_analysis.py:472: in _analyze_goal_fit\n    raise DealAnalysisError(f&amp;quot;Failed to analyze goal fit: {str(e)}&amp;quot;)\nE   core.exceptions.deal_exceptions.DealAnalysisError: Failed to analyze goal fit: Mock object has no attribute &amp;#x27;max_price&amp;#x27;\n        deal       = &amp;lt;Mock spec=&amp;#x27;Deal&amp;#x27; id=&amp;#x27;2850085936976&amp;#x27;&amp;gt;\n        goal       = &amp;lt;Mock spec=&amp;#x27;Goal&amp;#x27; id=&amp;#x27;2850087404944&amp;#x27;&amp;gt;\n        metrics    = {&amp;#x27;brand_match&amp;#x27;: 0.0,\n &amp;#x27;criteria_match&amp;#x27;: 0.0,\n &amp;#x27;feature_match&amp;#x27;: 0.0,\n &amp;#x27;price_match&amp;#x27;: 0.0,\n &amp;#x27;urgency_score&amp;#x27;: 0.0}\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x000002979688B510&amp;gt;\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:54,264 - core.services.deal_analysis - ERROR - Error in goal fit analysis: Mock object has no attribute &amp;#x27;max_price&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 411, in _analyze_goal_fit\n    if goal.max_price:\n       ^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;max_price&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error in goal fit analysis: Mock object has no attribute &amp;#x27;max_price&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 411, in _analyze_goal_fit\n    if goal.max_price:\n       ^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;max_price&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:471 Error in goal fit analysis: Mock object has no attribute &amp;#x27;max_price&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 411, in _analyze_goal_fit\n    if goal.max_price:\n       ^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py&amp;quot;, line 653, in __getattr__\n    raise AttributeError(&amp;quot;Mock object has no attribute %r&amp;quot; % name)\nAttributeError: Mock object has no attribute &amp;#x27;max_price&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_detect_anomalies&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_detect_anomalies&#34;, &#34;duration&#34;: &#34;12 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_detect_anomalies&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;12 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:54,343 - core.services.deal_analysis - ERROR - Error detecting anomalies: unsupported operand type(s) for /: &amp;#x27;decimal.Decimal&amp;#x27; and &amp;#x27;float&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 568, in _detect_anomalies\n    current_price / avg_price if avg_price &amp;gt; 0 else 1.0,\n    ~~~~~~~~~~~~~~^~~~~~~~~~~\nTypeError: unsupported operand type(s) for /: &amp;#x27;decimal.Decimal&amp;#x27; and &amp;#x27;float&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error detecting anomalies: unsupported operand type(s) for /: &amp;#x27;decimal.Decimal&amp;#x27; and &amp;#x27;float&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 568, in _detect_anomalies\n    current_price / avg_price if avg_price &amp;gt; 0 else 1.0,\n    ~~~~~~~~~~~~~~^~~~~~~~~~~\nTypeError: unsupported operand type(s) for /: &amp;#x27;decimal.Decimal&amp;#x27; and &amp;#x27;float&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:592 Error detecting anomalies: unsupported operand type(s) for /: &amp;#x27;decimal.Decimal&amp;#x27; and &amp;#x27;float&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 568, in _detect_anomalies\n    current_price / avg_price if avg_price &amp;gt; 0 else 1.0,\n    ~~~~~~~~~~~~~~^~~~~~~~~~~\nTypeError: unsupported operand type(s) for /: &amp;#x27;decimal.Decimal&amp;#x27; and &amp;#x27;float&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_generate_recommendations&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_generate_recommendations&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_generate_recommendations&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:54,356 - core.services.deal_analysis - ERROR - Error generating recommendations: &amp;#x27;price_metrics&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 607, in _generate_recommendations\n    price_metrics = metrics[&amp;quot;price_metrics&amp;quot;]\n                    ~~~~~~~^^^^^^^^^^^^^^^^^\nKeyError: &amp;#x27;price_metrics&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error generating recommendations: &amp;#x27;price_metrics&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 607, in _generate_recommendations\n    price_metrics = metrics[&amp;quot;price_metrics&amp;quot;]\n                    ~~~~~~~^^^^^^^^^^^^^^^^^\nKeyError: &amp;#x27;price_metrics&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:653 Error generating recommendations: &amp;#x27;price_metrics&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 607, in _generate_recommendations\n    price_metrics = metrics[&amp;quot;price_metrics&amp;quot;]\n                    ~~~~~~~^^^^^^^^^^^^^^^^^\nKeyError: &amp;#x27;price_metrics&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_deal_analysis_service.py::test_calculate_overall_score&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_analysis_service.py::test_calculate_overall_score&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_analysis_service.py::test_calculate_overall_score&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\deal_analysis.py:507: in _calculate_overall_score\n    score += category_score * weights[category]\nE   KeyError: &amp;#x27;price&amp;#x27;\n        category   = &amp;#x27;price&amp;#x27;\n        category_metrics = {&amp;#x27;price_trend&amp;#x27;: 0.7, &amp;#x27;value_proposition&amp;#x27;: 0.8}\n        category_score = 0.75\n        confidence = 0.85\n        metrics    = {&amp;#x27;goal_fit&amp;#x27;: {&amp;#x27;feature_match&amp;#x27;: 0.9, &amp;#x27;target_metrics_match&amp;#x27;: 0.7},\n &amp;#x27;historical&amp;#x27;: {&amp;#x27;consistent_growth&amp;#x27;: 0.6, &amp;#x27;volatility&amp;#x27;: 0.3},\n &amp;#x27;market&amp;#x27;: {&amp;#x27;competition&amp;#x27;: 0.4, &amp;#x27;market_strength&amp;#x27;: 0.8},\n &amp;#x27;price&amp;#x27;: {&amp;#x27;price_trend&amp;#x27;: 0.7, &amp;#x27;value_proposition&amp;#x27;: 0.8}}\n        numeric_metrics = {&amp;#x27;price_trend&amp;#x27;: 0.7, &amp;#x27;value_proposition&amp;#x27;: 0.8}\n        score      = 0.0\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794E05350&amp;gt;\n        weights    = {&amp;#x27;goal_metrics&amp;#x27;: 0.2,\n &amp;#x27;historical_metrics&amp;#x27;: 0.2,\n &amp;#x27;market_metrics&amp;#x27;: 0.25,\n &amp;#x27;price_metrics&amp;#x27;: 0.35}\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_deal_analysis_service.py:425: in test_calculate_overall_score\n    score = deal_analysis_service._calculate_overall_score(metrics, confidence)\n        confidence = 0.85\n        deal_analysis_service = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794E05350&amp;gt;\n        metrics    = {&amp;#x27;goal_fit&amp;#x27;: {&amp;#x27;feature_match&amp;#x27;: 0.9, &amp;#x27;target_metrics_match&amp;#x27;: 0.7},\n &amp;#x27;historical&amp;#x27;: {&amp;#x27;consistent_growth&amp;#x27;: 0.6, &amp;#x27;volatility&amp;#x27;: 0.3},\n &amp;#x27;market&amp;#x27;: {&amp;#x27;competition&amp;#x27;: 0.4, &amp;#x27;market_strength&amp;#x27;: 0.8},\n &amp;#x27;price&amp;#x27;: {&amp;#x27;price_trend&amp;#x27;: 0.7, &amp;#x27;value_proposition&amp;#x27;: 0.8}}\ncore\\services\\deal_analysis.py:516: in _calculate_overall_score\n    raise DealAnalysisError(f&amp;quot;Failed to calculate overall score: {str(e)}&amp;quot;)\nE   core.exceptions.deal_exceptions.DealAnalysisError: Failed to calculate overall score: &amp;#x27;price&amp;#x27;\n        category   = &amp;#x27;price&amp;#x27;\n        category_metrics = {&amp;#x27;price_trend&amp;#x27;: 0.7, &amp;#x27;value_proposition&amp;#x27;: 0.8}\n        category_score = 0.75\n        confidence = 0.85\n        metrics    = {&amp;#x27;goal_fit&amp;#x27;: {&amp;#x27;feature_match&amp;#x27;: 0.9, &amp;#x27;target_metrics_match&amp;#x27;: 0.7},\n &amp;#x27;historical&amp;#x27;: {&amp;#x27;consistent_growth&amp;#x27;: 0.6, &amp;#x27;volatility&amp;#x27;: 0.3},\n &amp;#x27;market&amp;#x27;: {&amp;#x27;competition&amp;#x27;: 0.4, &amp;#x27;market_strength&amp;#x27;: 0.8},\n &amp;#x27;price&amp;#x27;: {&amp;#x27;price_trend&amp;#x27;: 0.7, &amp;#x27;value_proposition&amp;#x27;: 0.8}}\n        numeric_metrics = {&amp;#x27;price_trend&amp;#x27;: 0.7, &amp;#x27;value_proposition&amp;#x27;: 0.8}\n        score      = 0.0\n        self       = &amp;lt;core.services.deal_analysis.DealAnalysisService object at 0x0000029794E05350&amp;gt;\n        weights    = {&amp;#x27;goal_metrics&amp;#x27;: 0.2,\n &amp;#x27;historical_metrics&amp;#x27;: 0.2,\n &amp;#x27;market_metrics&amp;#x27;: 0.25,\n &amp;#x27;price_metrics&amp;#x27;: 0.35}\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:54,369 - core.services.deal_analysis - ERROR - Error calculating overall score: &amp;#x27;price&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 507, in _calculate_overall_score\n    score += category_score * weights[category]\n                              ~~~~~~~^^^^^^^^^^\nKeyError: &amp;#x27;price&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.deal_analysis:Error calculating overall score: &amp;#x27;price&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 507, in _calculate_overall_score\n    score += category_score * weights[category]\n                              ~~~~~~~^^^^^^^^^^\nKeyError: &amp;#x27;price&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal_analysis:deal_analysis.py:515 Error calculating overall score: &amp;#x27;price&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal_analysis.py&amp;quot;, line 507, in _calculate_overall_score\n    score += category_score * weights[category]\n                              ~~~~~~~^^^^^^^^^^\nKeyError: &amp;#x27;price&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_deal_service.py::test_create_deal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_service.py::test_create_deal&#34;, &#34;duration&#34;: &#34;378 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_service.py::test_create_deal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;378 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\nINFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO:apscheduler.scheduler:Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO:apscheduler.scheduler:Scheduler started\n\n------------------------------ Captured log setup ------------------------------\nINFO     apscheduler.scheduler:base.py:444 Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO     apscheduler.scheduler:base.py:885 Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO     apscheduler.scheduler:base.py:171 Scheduler started\n\n----------------------------- Captured stderr call -----------------------------\nC:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\deal.py:839: RuntimeWarning: coroutine &amp;#x27;RedisMock.pipeline&amp;#x27; was never awaited\n  async with self._redis.pipeline() as pipe:\nRuntimeWarning: Enable tracemalloc to get the object allocation traceback\nERROR:core.services.deal:Failed to cache deal 7ed5b68b-8e7d-4189-8a6c-c8f25d6cffb9: &amp;#x27;coroutine&amp;#x27; object does not support the asynchronous context manager protocol\nINFO:core.services.deal:Successfully created deal 7ed5b68b-8e7d-4189-8a6c-c8f25d6cffb9 with score 80.0\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.deal:deal.py:852 Failed to cache deal 7ed5b68b-8e7d-4189-8a6c-c8f25d6cffb9: &amp;#x27;coroutine&amp;#x27; object does not support the asynchronous context manager protocol\nINFO     core.services.deal:deal.py:370 Successfully created deal 7ed5b68b-8e7d-4189-8a6c-c8f25d6cffb9 with score 80.0\n\n&#34;}], &#34;backend_tests/services/test_deal_service.py::test_get_deal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_service.py::test_get_deal&#34;, &#34;duration&#34;: &#34;256 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_service.py::test_get_deal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;256 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\nINFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO:apscheduler.scheduler:Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO:apscheduler.scheduler:Scheduler started\n\n------------------------------ Captured log setup ------------------------------\nINFO     apscheduler.scheduler:base.py:444 Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO     apscheduler.scheduler:base.py:885 Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO     apscheduler.scheduler:base.py:171 Scheduler started\n&#34;}], &#34;backend_tests/services/test_deal_service.py::test_update_deal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_service.py::test_update_deal&#34;, &#34;duration&#34;: &#34;497 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_service.py::test_update_deal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;497 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\nINFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO:apscheduler.scheduler:Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO:apscheduler.scheduler:Scheduler started\n\n------------------------------ Captured log setup ------------------------------\nINFO     apscheduler.scheduler:base.py:444 Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO     apscheduler.scheduler:base.py:885 Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO     apscheduler.scheduler:base.py:171 Scheduler started\n\n----------------------------- Captured stderr call -----------------------------\nINFO:core.repositories.deal:Updated deal 8f5893b7-e8f5-45a9-b9d7-ba7d5a244521 successfully\nERROR:core.services.deal:Failed to cache deal 8f5893b7-e8f5-45a9-b9d7-ba7d5a244521: &amp;#x27;coroutine&amp;#x27; object does not support the asynchronous context manager protocol\n\n------------------------------ Captured log call -------------------------------\nINFO     core.repositories.deal:deal.py:120 Updated deal 8f5893b7-e8f5-45a9-b9d7-ba7d5a244521 successfully\nERROR    core.services.deal:deal.py:852 Failed to cache deal 8f5893b7-e8f5-45a9-b9d7-ba7d5a244521: &amp;#x27;coroutine&amp;#x27; object does not support the asynchronous context manager protocol\n\n&#34;}], &#34;backend_tests/services/test_deal_service.py::test_list_deals&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_service.py::test_list_deals&#34;, &#34;duration&#34;: &#34;275 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_service.py::test_list_deals&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;275 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\nINFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO:apscheduler.scheduler:Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO:apscheduler.scheduler:Scheduler started\n\n------------------------------ Captured log setup ------------------------------\nINFO     apscheduler.scheduler:base.py:444 Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO     apscheduler.scheduler:base.py:885 Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO     apscheduler.scheduler:base.py:171 Scheduler started\n&#34;}], &#34;backend_tests/services/test_deal_service.py::test_delete_deal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_service.py::test_delete_deal&#34;, &#34;duration&#34;: &#34;535 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_service.py::test_delete_deal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;535 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\nINFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO:apscheduler.scheduler:Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO:apscheduler.scheduler:Scheduler started\n\n------------------------------ Captured log setup ------------------------------\nINFO     apscheduler.scheduler:base.py:444 Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO     apscheduler.scheduler:base.py:885 Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO     apscheduler.scheduler:base.py:171 Scheduler started\n\n----------------------------- Captured stderr call -----------------------------\nINFO:core.repositories.deal:Deleted deal 5d4ba556-ebd6-492b-a015-8808e7f2bdbc\nWARNING:core.repositories.deal:Deal with ID 5d4ba556-ebd6-492b-a015-8808e7f2bdbc not found\n\n------------------------------ Captured log call -------------------------------\nINFO     core.repositories.deal:deal.py:143 Deleted deal 5d4ba556-ebd6-492b-a015-8808e7f2bdbc\nWARNING  core.repositories.deal:deal.py:71 Deal with ID 5d4ba556-ebd6-492b-a015-8808e7f2bdbc not found\n\n&#34;}], &#34;backend_tests/services/test_deal_service.py::test_validate_deal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_service.py::test_validate_deal&#34;, &#34;duration&#34;: &#34;17 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_service.py::test_validate_deal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;17 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\nINFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO:apscheduler.scheduler:Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO:apscheduler.scheduler:Scheduler started\n\n------------------------------ Captured log setup ------------------------------\nINFO     apscheduler.scheduler:base.py:444 Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO     apscheduler.scheduler:base.py:885 Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO     apscheduler.scheduler:base.py:171 Scheduler started\n&#34;}], &#34;backend_tests/services/test_deal_service.py::test_deal_price_tracking&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_deal_service.py::test_deal_price_tracking&#34;, &#34;duration&#34;: &#34;356 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_deal_service.py::test_deal_price_tracking&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;356 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\nINFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO:apscheduler.scheduler:Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO:apscheduler.scheduler:Scheduler started\n\n------------------------------ Captured log setup ------------------------------\nINFO     apscheduler.scheduler:base.py:444 Adding job tentatively -- it will be properly scheduled when the scheduler starts\nINFO     apscheduler.scheduler:base.py:885 Added job &amp;quot;DealService._monitor_deals&amp;quot; to job store &amp;quot;default&amp;quot;\nINFO     apscheduler.scheduler:base.py:171 Scheduler started\n&#34;}], &#34;backend_tests/services/test_goal_service.py::test_create_goal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_goal_service.py::test_create_goal&#34;, &#34;duration&#34;: &#34;245 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_goal_service.py::test_create_goal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;245 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\goal.py:597: in _cache_goal\n    await self._redis.set(\nE   TypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n        cache_key  = GoalCacheKey(user_id=UUID(&amp;#x27;34b78d22-24c4-40cd-9676-6c0657e12f29&amp;#x27;), goal_id=UUID(&amp;#x27;ceca7bf8-7923-443d-a35b-bae0aa68d739&amp;#x27;))\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4133750&amp;gt;\n        goal_dict  = {&amp;#x27;auto_buy_threshold&amp;#x27;: 0.9,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;apple&amp;#x27;, &amp;#x27;samsung&amp;#x27;],\n                 &amp;#x27;categories&amp;#x27;: [&amp;#x27;electronics&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;refurbished&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;test&amp;#x27;, &amp;#x27;goal&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 1000,\n                 &amp;#x27;min_price&amp;#x27;: 0,\n                 &amp;#x27;price_range&amp;#x27;: {&amp;#x27;max&amp;#x27;: 1000, &amp;#x27;min&amp;#x27;: 0}},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 56, 965566, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: datetime.datetime(2025, 4, 3, 18, 48, 56, 964565, tzinfo=datetime.timezone.utc),\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: UUID(&amp;#x27;ceca7bf8-7923-443d-a35b-bae0aa68d739&amp;#x27;),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: 10,\n &amp;#x27;max_tokens&amp;#x27;: 100.0,\n &amp;#x27;metadata&amp;#x27;: {},\n &amp;#x27;priority&amp;#x27;: 3,\n &amp;#x27;status&amp;#x27;: &amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Test Goal&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 56, 965566, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;34b78d22-24c4-40cd-9676-6c0657e12f29&amp;#x27;)}\n        priority_map = {&amp;#x27;critical&amp;#x27;: 5, &amp;#x27;high&amp;#x27;: 3, &amp;#x27;low&amp;#x27;: 1, &amp;#x27;medium&amp;#x27;: 2, &amp;#x27;urgent&amp;#x27;: 4}\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297C4132750&amp;gt;\n\nThe above exception was the direct cause of the following exception:\ncore\\services\\goal.py:211: in create_goal\n    await self._cache_goal(goal)\n        auto_buy_threshold = Decimal(&amp;#x27;0.9&amp;#x27;)\n        constraints = {&amp;#x27;brands&amp;#x27;: [&amp;#x27;apple&amp;#x27;, &amp;#x27;samsung&amp;#x27;],\n &amp;#x27;categories&amp;#x27;: [&amp;#x27;electronics&amp;#x27;],\n &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;refurbished&amp;#x27;],\n &amp;#x27;keywords&amp;#x27;: [&amp;#x27;test&amp;#x27;, &amp;#x27;goal&amp;#x27;],\n &amp;#x27;max_price&amp;#x27;: 1000,\n &amp;#x27;min_price&amp;#x27;: 0,\n &amp;#x27;price_range&amp;#x27;: {&amp;#x27;max&amp;#x27;: 1000, &amp;#x27;min&amp;#x27;: 0}}\n        deadline   = datetime.datetime(2025, 4, 3, 18, 48, 56, 964565, tzinfo=datetime.timezone.utc)\n        description = None\n        due_date   = None\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4133750&amp;gt;\n        goal_response = GoalResponse(title=&amp;#x27;Test Goal&amp;#x27;, description=None, status=&amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;, priority=3, due_date=None, metadata={}, item_category=&amp;#x27;electronics&amp;#x27;, constraints={&amp;#x27;brands&amp;#x27;: [&amp;#x27;apple&amp;#x27;, &amp;#x27;samsung&amp;#x27;], &amp;#x27;keywords&amp;#x27;: [&amp;#x27;test&amp;#x27;, &amp;#x27;goal&amp;#x27;], &amp;#x27;max_price&amp;#x27;: 1000, &amp;#x27;min_price&amp;#x27;: 0, &amp;#x27;categories&amp;#x27;: [&amp;#x27;electronics&amp;#x27;], &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;refurbished&amp;#x27;], &amp;#x27;price_range&amp;#x27;: {&amp;#x27;max&amp;#x27;: 1000, &amp;#x27;min&amp;#x27;: 0}}, deadline=datetime.datetime(2025, 4, 3, 18, 48, 56, 964565, tzinfo=datetime.timezone.utc), max_matches=10, max_tokens=100.0, notification_threshold=0.8, auto_buy_threshold=0.9, id=UUID(&amp;#x27;ceca7bf8-7923-443d-a35b-bae0aa68d739&amp;#x27;), user_id=UUID(&amp;#x27;34b78d22-24c4-40cd-9676-6c0657e12f29&amp;#x27;), created_at=datetime.datetime(2025, 3, 4, 18, 48, 56, 965566, tzinfo=datetime.timezone.utc), updated_at=datetime.datetime(2025, 3, 4, 18, 48, 56, 965566, tzinfo=datetime.timezone.utc), last_checked_at=None, matches_found=0, deals_processed=0, tokens_spent=0.0, rewards_earned=0.0, last_processed_at=None, processing_stats={}, best_match_score=None, average_match_score=None, active_deals_count=0, success_rate=0.0)\n        item_category = &amp;#x27;electronics&amp;#x27;\n        max_matches = 10\n        max_tokens = Decimal(&amp;#x27;100.0&amp;#x27;)\n        metadata   = None\n        notification_threshold = Decimal(&amp;#x27;0.8&amp;#x27;)\n        priority   = 1\n        priority_value = 1\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297C4132750&amp;gt;\n        status     = None\n        title      = &amp;#x27;Test Goal&amp;#x27;\n        user_id    = UUID(&amp;#x27;34b78d22-24c4-40cd-9676-6c0657e12f29&amp;#x27;)\ncore\\services\\goal.py:604: in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\nE   core.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n        cache_key  = GoalCacheKey(user_id=UUID(&amp;#x27;34b78d22-24c4-40cd-9676-6c0657e12f29&amp;#x27;), goal_id=UUID(&amp;#x27;ceca7bf8-7923-443d-a35b-bae0aa68d739&amp;#x27;))\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4133750&amp;gt;\n        goal_dict  = {&amp;#x27;auto_buy_threshold&amp;#x27;: 0.9,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;apple&amp;#x27;, &amp;#x27;samsung&amp;#x27;],\n                 &amp;#x27;categories&amp;#x27;: [&amp;#x27;electronics&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;refurbished&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;test&amp;#x27;, &amp;#x27;goal&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 1000,\n                 &amp;#x27;min_price&amp;#x27;: 0,\n                 &amp;#x27;price_range&amp;#x27;: {&amp;#x27;max&amp;#x27;: 1000, &amp;#x27;min&amp;#x27;: 0}},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 56, 965566, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: datetime.datetime(2025, 4, 3, 18, 48, 56, 964565, tzinfo=datetime.timezone.utc),\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: UUID(&amp;#x27;ceca7bf8-7923-443d-a35b-bae0aa68d739&amp;#x27;),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: 10,\n &amp;#x27;max_tokens&amp;#x27;: 100.0,\n &amp;#x27;metadata&amp;#x27;: {},\n &amp;#x27;priority&amp;#x27;: 3,\n &amp;#x27;status&amp;#x27;: &amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Test Goal&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 56, 965566, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;34b78d22-24c4-40cd-9676-6c0657e12f29&amp;#x27;)}\n        priority_map = {&amp;#x27;critical&amp;#x27;: 5, &amp;#x27;high&amp;#x27;: 3, &amp;#x27;low&amp;#x27;: 1, &amp;#x27;medium&amp;#x27;: 2, &amp;#x27;urgent&amp;#x27;: 4}\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297C4132750&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_goal_service.py:50: in test_create_goal\n    goal = await goal_service.create_goal(\n        db_session = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297C4171A10&amp;gt;\n        goal_data  = {&amp;#x27;auto_buy_threshold&amp;#x27;: Decimal(&amp;#x27;0.9&amp;#x27;),\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;apple&amp;#x27;, &amp;#x27;samsung&amp;#x27;],\n                 &amp;#x27;categories&amp;#x27;: [&amp;#x27;electronics&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;refurbished&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;test&amp;#x27;, &amp;#x27;goal&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 1000,\n                 &amp;#x27;min_price&amp;#x27;: 0,\n                 &amp;#x27;price_range&amp;#x27;: {&amp;#x27;max&amp;#x27;: 1000, &amp;#x27;min&amp;#x27;: 0}},\n &amp;#x27;deadline&amp;#x27;: datetime.datetime(2025, 4, 3, 18, 48, 56, 964565, tzinfo=datetime.timezone.utc),\n &amp;#x27;item_category&amp;#x27;: &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;max_matches&amp;#x27;: 10,\n &amp;#x27;max_tokens&amp;#x27;: Decimal(&amp;#x27;100.0&amp;#x27;),\n &amp;#x27;notification_threshold&amp;#x27;: Decimal(&amp;#x27;0.8&amp;#x27;),\n &amp;#x27;priority&amp;#x27;: 1,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Test Goal&amp;#x27;}\n        goal_service = &amp;lt;core.services.goal.GoalService object at 0x00000297C4132750&amp;gt;\n        user       = &amp;lt;core.models.user.User object at 0x00000297C4132A90&amp;gt;\ncore\\services\\goal.py:226: in create_goal\n    raise GoalError(f&amp;quot;Failed to create goal: {str(e)}&amp;quot;)\nE   core.exceptions.goal_exceptions.GoalError: Failed to create goal: API service unavailable\n        auto_buy_threshold = Decimal(&amp;#x27;0.9&amp;#x27;)\n        constraints = {&amp;#x27;brands&amp;#x27;: [&amp;#x27;apple&amp;#x27;, &amp;#x27;samsung&amp;#x27;],\n &amp;#x27;categories&amp;#x27;: [&amp;#x27;electronics&amp;#x27;],\n &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;refurbished&amp;#x27;],\n &amp;#x27;keywords&amp;#x27;: [&amp;#x27;test&amp;#x27;, &amp;#x27;goal&amp;#x27;],\n &amp;#x27;max_price&amp;#x27;: 1000,\n &amp;#x27;min_price&amp;#x27;: 0,\n &amp;#x27;price_range&amp;#x27;: {&amp;#x27;max&amp;#x27;: 1000, &amp;#x27;min&amp;#x27;: 0}}\n        deadline   = datetime.datetime(2025, 4, 3, 18, 48, 56, 964565, tzinfo=datetime.timezone.utc)\n        description = None\n        due_date   = None\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4133750&amp;gt;\n        goal_response = GoalResponse(title=&amp;#x27;Test Goal&amp;#x27;, description=None, status=&amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;, priority=3, due_date=None, metadata={}, item_category=&amp;#x27;electronics&amp;#x27;, constraints={&amp;#x27;brands&amp;#x27;: [&amp;#x27;apple&amp;#x27;, &amp;#x27;samsung&amp;#x27;], &amp;#x27;keywords&amp;#x27;: [&amp;#x27;test&amp;#x27;, &amp;#x27;goal&amp;#x27;], &amp;#x27;max_price&amp;#x27;: 1000, &amp;#x27;min_price&amp;#x27;: 0, &amp;#x27;categories&amp;#x27;: [&amp;#x27;electronics&amp;#x27;], &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;refurbished&amp;#x27;], &amp;#x27;price_range&amp;#x27;: {&amp;#x27;max&amp;#x27;: 1000, &amp;#x27;min&amp;#x27;: 0}}, deadline=datetime.datetime(2025, 4, 3, 18, 48, 56, 964565, tzinfo=datetime.timezone.utc), max_matches=10, max_tokens=100.0, notification_threshold=0.8, auto_buy_threshold=0.9, id=UUID(&amp;#x27;ceca7bf8-7923-443d-a35b-bae0aa68d739&amp;#x27;), user_id=UUID(&amp;#x27;34b78d22-24c4-40cd-9676-6c0657e12f29&amp;#x27;), created_at=datetime.datetime(2025, 3, 4, 18, 48, 56, 965566, tzinfo=datetime.timezone.utc), updated_at=datetime.datetime(2025, 3, 4, 18, 48, 56, 965566, tzinfo=datetime.timezone.utc), last_checked_at=None, matches_found=0, deals_processed=0, tokens_spent=0.0, rewards_earned=0.0, last_processed_at=None, processing_stats={}, best_match_score=None, average_match_score=None, active_deals_count=0, success_rate=0.0)\n        item_category = &amp;#x27;electronics&amp;#x27;\n        max_matches = 10\n        max_tokens = Decimal(&amp;#x27;100.0&amp;#x27;)\n        metadata   = None\n        notification_threshold = Decimal(&amp;#x27;0.8&amp;#x27;)\n        priority   = 1\n        priority_value = 1\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297C4132750&amp;gt;\n        status     = None\n        title      = &amp;#x27;Test Goal&amp;#x27;\n        user_id    = UUID(&amp;#x27;34b78d22-24c4-40cd-9676-6c0657e12f29&amp;#x27;)\n\n---------------------------- Captured stderr setup -----------------------------\nINFO:backend_tests.mocks.redis_service_mock:Initialized Redis service with mock client\n\n------------------------------ Captured log setup ------------------------------\nINFO     backend_tests.mocks.redis_service_mock:redis_service_mock.py:42 Initialized Redis service with mock client\n\n----------------------------- Captured stderr call -----------------------------\nWARNING:core.services.goal:Error getting goal analytics: greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)\nWARNING:core.services.goal:Failed to cache goal ceca7bf8-7923-443d-a35b-bae0aa68d739: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nERROR:core.services.goal:Failed to create goal for user 34b78d22-24c4-40cd-9676-6c0657e12f29: API service unavailable\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 211, in create_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n\n------------------------------ Captured log call -------------------------------\nWARNING  core.services.goal:goal.py:835 Error getting goal analytics: greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)\nWARNING  core.services.goal:goal.py:603 Failed to cache goal ceca7bf8-7923-443d-a35b-bae0aa68d739: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nERROR    core.services.goal:goal.py:221 Failed to create goal for user 34b78d22-24c4-40cd-9676-6c0657e12f29: API service unavailable\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 211, in create_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n\n--------------------------- Captured stderr teardown ---------------------------\nsys:1: SAWarning: transaction already deassociated from connection\n&#34;}], &#34;backend_tests/services/test_goal_service.py::test_get_goal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_goal_service.py::test_get_goal&#34;, &#34;duration&#34;: &#34;249 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_goal_service.py::test_get_goal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;249 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\goal.py:597: in _cache_goal\n    await self._redis.set(\nE   TypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n        cache_key  = GoalCacheKey(user_id=UUID(&amp;#x27;52421cab-4897-44ac-98bc-eaa122ff10f6&amp;#x27;), goal_id=UUID(&amp;#x27;4ddcb8f8-1dc6-4700-a628-0c889656d8c8&amp;#x27;))\n        goal       = &amp;lt;Goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: Goal for item (GoalStatus.ACTIVE)&amp;gt;\n        goal_dict  = {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 57, 264087, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: None,\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: UUID(&amp;#x27;4ddcb8f8-1dc6-4700-a628-0c889656d8c8&amp;#x27;),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: None,\n &amp;#x27;max_tokens&amp;#x27;: None,\n &amp;#x27;metadata&amp;#x27;: {},\n &amp;#x27;priority&amp;#x27;: 2,\n &amp;#x27;status&amp;#x27;: &amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 57, 264087, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;52421cab-4897-44ac-98bc-eaa122ff10f6&amp;#x27;)}\n        priority_map = {&amp;#x27;critical&amp;#x27;: 5, &amp;#x27;high&amp;#x27;: 3, &amp;#x27;low&amp;#x27;: 1, &amp;#x27;medium&amp;#x27;: 2, &amp;#x27;urgent&amp;#x27;: 4}\n        self       = &amp;lt;core.services.goal.GoalService object at 0x0000029794EC8310&amp;gt;\n\nThe above exception was the direct cause of the following exception:\ncore\\services\\goal.py:406: in get_goal\n    await self._cache_goal(goal)\n        cached_goal = None\n        goal       = &amp;lt;Goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: Goal for item (GoalStatus.ACTIVE)&amp;gt;\n        goal_for_user = &amp;lt;Goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: Goal for item (GoalStatus.ACTIVE)&amp;gt;\n        goal_id    = UUID(&amp;#x27;4ddcb8f8-1dc6-4700-a628-0c889656d8c8&amp;#x27;)\n        query      = &amp;lt;sqlalchemy.sql.selectable.Select object at 0x00000297C41BD9D0&amp;gt;\n        result     = &amp;lt;sqlalchemy.engine.result.ChunkedIteratorResult object at 0x00000297C41B9CD0&amp;gt;\n        self       = &amp;lt;core.services.goal.GoalService object at 0x0000029794EC8310&amp;gt;\n        user_id    = UUID(&amp;#x27;52421cab-4897-44ac-98bc-eaa122ff10f6&amp;#x27;)\ncore\\services\\goal.py:604: in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\nE   core.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n        cache_key  = GoalCacheKey(user_id=UUID(&amp;#x27;52421cab-4897-44ac-98bc-eaa122ff10f6&amp;#x27;), goal_id=UUID(&amp;#x27;4ddcb8f8-1dc6-4700-a628-0c889656d8c8&amp;#x27;))\n        goal       = &amp;lt;Goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: Goal for item (GoalStatus.ACTIVE)&amp;gt;\n        goal_dict  = {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 57, 264087, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: None,\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: UUID(&amp;#x27;4ddcb8f8-1dc6-4700-a628-0c889656d8c8&amp;#x27;),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: None,\n &amp;#x27;max_tokens&amp;#x27;: None,\n &amp;#x27;metadata&amp;#x27;: {},\n &amp;#x27;priority&amp;#x27;: 2,\n &amp;#x27;status&amp;#x27;: &amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 57, 264087, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;52421cab-4897-44ac-98bc-eaa122ff10f6&amp;#x27;)}\n        priority_map = {&amp;#x27;critical&amp;#x27;: 5, &amp;#x27;high&amp;#x27;: 3, &amp;#x27;low&amp;#x27;: 1, &amp;#x27;medium&amp;#x27;: 2, &amp;#x27;urgent&amp;#x27;: 4}\n        self       = &amp;lt;core.services.goal.GoalService object at 0x0000029794EC8310&amp;gt;\n\nThe above exception was the direct cause of the following exception:\nbackend_tests\\services\\test_goal_service.py:68: in test_get_goal\n    retrieved_goal = await goal_service.get_goal(goal.id)\n        db_session = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297C4240050&amp;gt;\n        goal       = &amp;lt;Goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: Goal for item (GoalStatus.ACTIVE)&amp;gt;\n        goal_service = &amp;lt;core.services.goal.GoalService object at 0x0000029794EC8310&amp;gt;\ncore\\services\\goal.py:419: in get_goal\n    raise GoalNotFoundError(f&amp;quot;Failed to get goal: {str(e)}&amp;quot;) from e\nE   core.exceptions.goal_exceptions.GoalNotFoundError: Goal not found\n        cached_goal = None\n        goal       = &amp;lt;Goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: Goal for item (GoalStatus.ACTIVE)&amp;gt;\n        goal_for_user = &amp;lt;Goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: Goal for item (GoalStatus.ACTIVE)&amp;gt;\n        goal_id    = UUID(&amp;#x27;4ddcb8f8-1dc6-4700-a628-0c889656d8c8&amp;#x27;)\n        query      = &amp;lt;sqlalchemy.sql.selectable.Select object at 0x00000297C41BD9D0&amp;gt;\n        result     = &amp;lt;sqlalchemy.engine.result.ChunkedIteratorResult object at 0x00000297C41B9CD0&amp;gt;\n        self       = &amp;lt;core.services.goal.GoalService object at 0x0000029794EC8310&amp;gt;\n        user_id    = UUID(&amp;#x27;52421cab-4897-44ac-98bc-eaa122ff10f6&amp;#x27;)\n\n----------------------------- Captured stderr call -----------------------------\nWARNING:core.services.goal:Failed to cache goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nERROR:core.services.goal:Failed to get goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: API service unavailable\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n\n------------------------------ Captured log call -------------------------------\nWARNING  core.services.goal:goal.py:603 Failed to cache goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nERROR    core.services.goal:goal.py:414 Failed to get goal 4ddcb8f8-1dc6-4700-a628-0c889656d8c8: API service unavailable\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n\n&#34;}], &#34;backend_tests/services/test_goal_service.py::test_update_goal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_goal_service.py::test_update_goal&#34;, &#34;duration&#34;: &#34;248 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_goal_service.py::test_update_goal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;248 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\goal.py:597: in _cache_goal\n    await self._redis.set(\nE   TypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n        cache_key  = GoalCacheKey(user_id=UUID(&amp;#x27;281f5a21-1bc2-4bf0-8367-ebc9a0ed57e7&amp;#x27;), goal_id=UUID(&amp;#x27;c471891c-db6d-4f3e-85cd-eb52a0cf6e45&amp;#x27;))\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c41e3490&amp;gt;\n        goal_dict  = {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 57, 757639, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: None,\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: UUID(&amp;#x27;c471891c-db6d-4f3e-85cd-eb52a0cf6e45&amp;#x27;),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: None,\n &amp;#x27;max_tokens&amp;#x27;: None,\n &amp;#x27;metadata&amp;#x27;: {},\n &amp;#x27;priority&amp;#x27;: 2,\n &amp;#x27;status&amp;#x27;: &amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 57, 757639, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;281f5a21-1bc2-4bf0-8367-ebc9a0ed57e7&amp;#x27;)}\n        priority_map = {&amp;#x27;critical&amp;#x27;: 5, &amp;#x27;high&amp;#x27;: 3, &amp;#x27;low&amp;#x27;: 1, &amp;#x27;medium&amp;#x27;: 2, &amp;#x27;urgent&amp;#x27;: 4}\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297CCB5C290&amp;gt;\n\nThe above exception was the direct cause of the following exception:\ncore\\services\\goal.py:406: in get_goal\n    await self._cache_goal(goal)\n        cached_goal = None\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c41e3490&amp;gt;\n        goal_for_user = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c41e3490&amp;gt;\n        goal_id    = UUID(&amp;#x27;c471891c-db6d-4f3e-85cd-eb52a0cf6e45&amp;#x27;)\n        query      = &amp;lt;sqlalchemy.sql.selectable.Select object at 0x00000297C42799D0&amp;gt;\n        result     = &amp;lt;sqlalchemy.engine.result.ChunkedIteratorResult object at 0x00000297C427B9D0&amp;gt;\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297CCB5C290&amp;gt;\n        user_id    = UUID(&amp;#x27;281f5a21-1bc2-4bf0-8367-ebc9a0ed57e7&amp;#x27;)\ncore\\services\\goal.py:604: in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\nE   core.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n        cache_key  = GoalCacheKey(user_id=UUID(&amp;#x27;281f5a21-1bc2-4bf0-8367-ebc9a0ed57e7&amp;#x27;), goal_id=UUID(&amp;#x27;c471891c-db6d-4f3e-85cd-eb52a0cf6e45&amp;#x27;))\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c41e3490&amp;gt;\n        goal_dict  = {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 57, 757639, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: None,\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: UUID(&amp;#x27;c471891c-db6d-4f3e-85cd-eb52a0cf6e45&amp;#x27;),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: None,\n &amp;#x27;max_tokens&amp;#x27;: None,\n &amp;#x27;metadata&amp;#x27;: {},\n &amp;#x27;priority&amp;#x27;: 2,\n &amp;#x27;status&amp;#x27;: &amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 57, 757639, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;281f5a21-1bc2-4bf0-8367-ebc9a0ed57e7&amp;#x27;)}\n        priority_map = {&amp;#x27;critical&amp;#x27;: 5, &amp;#x27;high&amp;#x27;: 3, &amp;#x27;low&amp;#x27;: 1, &amp;#x27;medium&amp;#x27;: 2, &amp;#x27;urgent&amp;#x27;: 4}\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297CCB5C290&amp;gt;\n\nThe above exception was the direct cause of the following exception:\ncore\\services\\goal.py:1039: in update_goal\n    goal = await self.get_goal(goal_id)\n        goal_id    = UUID(&amp;#x27;c471891c-db6d-4f3e-85cd-eb52a0cf6e45&amp;#x27;)\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297CCB5C290&amp;gt;\n        update_data = {&amp;#x27;status&amp;#x27;: &amp;#x27;paused&amp;#x27;, &amp;#x27;title&amp;#x27;: &amp;#x27;Updated Goal&amp;#x27;}\ncore\\services\\goal.py:419: in get_goal\n    raise GoalNotFoundError(f&amp;quot;Failed to get goal: {str(e)}&amp;quot;) from e\nE   core.exceptions.goal_exceptions.GoalNotFoundError: Goal not found\n        cached_goal = None\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c41e3490&amp;gt;\n        goal_for_user = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c41e3490&amp;gt;\n        goal_id    = UUID(&amp;#x27;c471891c-db6d-4f3e-85cd-eb52a0cf6e45&amp;#x27;)\n        query      = &amp;lt;sqlalchemy.sql.selectable.Select object at 0x00000297C42799D0&amp;gt;\n        result     = &amp;lt;sqlalchemy.engine.result.ChunkedIteratorResult object at 0x00000297C427B9D0&amp;gt;\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297CCB5C290&amp;gt;\n        user_id    = UUID(&amp;#x27;281f5a21-1bc2-4bf0-8367-ebc9a0ed57e7&amp;#x27;)\n\nThe above exception was the direct cause of the following exception:\nbackend_tests\\services\\test_goal_service.py:87: in test_update_goal\n    updated_goal = await goal_service.update_goal(\n        db_session = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297968A2E10&amp;gt;\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c41e3490&amp;gt;\n        goal_service = &amp;lt;core.services.goal.GoalService object at 0x00000297CCB5C290&amp;gt;\n        updates    = {&amp;#x27;status&amp;#x27;: &amp;#x27;paused&amp;#x27;, &amp;#x27;title&amp;#x27;: &amp;#x27;Updated Goal&amp;#x27;}\ncore\\services\\goal.py:1085: in update_goal\n    raise GoalError(f&amp;quot;Failed to update goal: {str(e)}&amp;quot;) from e\nE   core.exceptions.goal_exceptions.GoalError: Failed to update goal: Goal not found\n        goal_id    = UUID(&amp;#x27;c471891c-db6d-4f3e-85cd-eb52a0cf6e45&amp;#x27;)\n        self       = &amp;lt;core.services.goal.GoalService object at 0x00000297CCB5C290&amp;gt;\n        update_data = {&amp;#x27;status&amp;#x27;: &amp;#x27;paused&amp;#x27;, &amp;#x27;title&amp;#x27;: &amp;#x27;Updated Goal&amp;#x27;}\n\n----------------------------- Captured stderr call -----------------------------\nWARNING:core.services.goal:Failed to cache goal c471891c-db6d-4f3e-85cd-eb52a0cf6e45: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nERROR:core.services.goal:Failed to get goal c471891c-db6d-4f3e-85cd-eb52a0cf6e45: API service unavailable\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\nERROR:core.services.goal:Failed to update goal c471891c-db6d-4f3e-85cd-eb52a0cf6e45: Goal not found\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 1039, in update_goal\n    goal = await self.get_goal(goal_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 419, in get_goal\n    raise GoalNotFoundError(f&amp;quot;Failed to get goal: {str(e)}&amp;quot;) from e\ncore.exceptions.goal_exceptions.GoalNotFoundError: Goal not found\n\n------------------------------ Captured log call -------------------------------\nWARNING  core.services.goal:goal.py:603 Failed to cache goal c471891c-db6d-4f3e-85cd-eb52a0cf6e45: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nERROR    core.services.goal:goal.py:414 Failed to get goal c471891c-db6d-4f3e-85cd-eb52a0cf6e45: API service unavailable\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\nERROR    core.services.goal:goal.py:1080 Failed to update goal c471891c-db6d-4f3e-85cd-eb52a0cf6e45: Goal not found\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 1039, in update_goal\n    goal = await self.get_goal(goal_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 419, in get_goal\n    raise GoalNotFoundError(f&amp;quot;Failed to get goal: {str(e)}&amp;quot;) from e\ncore.exceptions.goal_exceptions.GoalNotFoundError: Goal not found\n\n--------------------------- Captured stderr teardown ---------------------------\nsys:1: SAWarning: transaction already deassociated from connection\n&#34;}], &#34;backend_tests/services/test_goal_service.py::test_list_goals&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_goal_service.py::test_list_goals&#34;, &#34;duration&#34;: &#34;255 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_goal_service.py::test_list_goals&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;255 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:545: in _prepare_and_execute\n    self._rows = deque(await prepared_stmt.fetch(*parameters))\n        adapt_connection = &amp;lt;AdaptedConnection &amp;lt;asyncpg.connection.Connection object at 0x0000029794E54D60&amp;gt;&amp;gt;\n        attributes = ()\n        operation  = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n        parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        prepared_stmt = &amp;lt;asyncpg.prepared_stmt.PreparedStatement object at 0x0000029796312C00&amp;gt;\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n..\\venv\\Lib\\site-packages\\asyncpg\\prepared_stmt.py:176: in fetch\n    data = await self.__bind_execute(args, 0, timeout)\n        args       = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        self       = &amp;lt;asyncpg.prepared_stmt.PreparedStatement object at 0x0000029796312C00&amp;gt;\n        timeout    = None\n..\\venv\\Lib\\site-packages\\asyncpg\\prepared_stmt.py:241: in __bind_execute\n    data, status, _ = await self.__do_execute(\n        args       = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        limit      = 0\n        self       = &amp;lt;asyncpg.prepared_stmt.PreparedStatement object at 0x0000029796312C00&amp;gt;\n        timeout    = None\n..\\venv\\Lib\\site-packages\\asyncpg\\prepared_stmt.py:230: in __do_execute\n    return await executor(protocol)\n        executor   = &amp;lt;function PreparedStatement.__bind_execute.&amp;lt;locals&amp;gt;.&amp;lt;lambda&amp;gt; at 0x00000297C41CE2A0&amp;gt;\n        protocol   = &amp;lt;asyncpg.protocol.protocol.Protocol object at 0x000002979482BA10&amp;gt;\n        self       = &amp;lt;asyncpg.prepared_stmt.PreparedStatement object at 0x0000029796312C00&amp;gt;\nasyncpg\\protocol\\protocol.pyx:207: in bind_execute\n    ???\nE   asyncpg.exceptions.UniqueViolationError: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\nE   DETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.\n\nThe above exception was the direct cause of the following exception:\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py:1964: in _exec_single_context\n    self.dialect.do_execute(\n        context    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGExecutionContext_asyncpg object at 0x00000297968E7A50&amp;gt;\n        cursor     = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n        dialect    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000029792B0C550&amp;gt;\n        effective_parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        evt_handled = False\n        parameters = [(UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n  UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n  &amp;#x27;electronics&amp;#x27;,\n  &amp;#x27;Goal for item&amp;#x27;,\n  None,\n  &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n  &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n  &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n  None,\n  &amp;#x27;active&amp;#x27;,\n  &amp;#x27;medium&amp;#x27;,\n  None,\n  None,\n  None,\n  None,\n  0,\n  0,\n  0.0,\n  0.0,\n  None,\n  None,\n  None,\n  None,\n  0,\n  0.0,\n  datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))]\n        self       = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        statement  = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x00000297C4284910&amp;gt;\n        str_statement = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py:942: in do_execute\n    cursor.execute(statement, parameters)\n        context    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGExecutionContext_asyncpg object at 0x00000297968E7A50&amp;gt;\n        cursor     = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n        parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000029792B0C550&amp;gt;\n        statement  = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:580: in execute\n    self._adapt_connection.await_(\n        operation  = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n        parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py:132: in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n        awaitable  = &amp;lt;coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000029794DF4040&amp;gt;\n        current    = &amp;lt;_AsyncIoGreenlet object at 0x0000029794E4C2C0 (otid=0x00000297C6A429D0) dead&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py:196: in greenlet_spawn\n    value = await result\n        _require_await = False\n        args       = ()\n        context    = &amp;lt;_AsyncIoGreenlet object at 0x0000029794E4C2C0 (otid=0x00000297C6A429D0) dead&amp;gt;\n        fn         = &amp;lt;bound method Session.commit of &amp;lt;sqlalchemy.orm.session.Session object at 0x00000297995AD2D0&amp;gt;&amp;gt;\n        kwargs     = {}\n        result     = &amp;lt;coroutine object AsyncAdapt_asyncpg_connection._rollback_and_discard at 0x0000029794E43AC0&amp;gt;\n        switch_occurred = True\n        value      = None\n..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:558: in _prepare_and_execute\n    self._handle_exception(error)\n        adapt_connection = &amp;lt;AdaptedConnection &amp;lt;asyncpg.connection.Connection object at 0x0000029794E54D60&amp;gt;&amp;gt;\n        attributes = ()\n        operation  = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n        parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        prepared_stmt = &amp;lt;asyncpg.prepared_stmt.PreparedStatement object at 0x0000029796312C00&amp;gt;\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:508: in _handle_exception\n    self._adapt_connection._handle_exception(error)\n        error      = UniqueViolationError(&amp;#x27;\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;&amp;#x27;)\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:792: in _handle_exception\n    raise translated_error from error\nE   sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: &amp;lt;class &amp;#x27;asyncpg.exceptions.UniqueViolationError&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\nE   DETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.\n        error      = UniqueViolationError(&amp;#x27;\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;&amp;#x27;)\n        exception_mapping = {&amp;lt;class &amp;#x27;asyncpg.exceptions._base.PostgresError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions.InvalidCachedStatementError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InvalidCachedStatementError&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions.IntegrityConstraintViolationError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions.SyntaxOrAccessError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions.InternalServerError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InternalServerError&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions._base.InterfaceError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError&amp;#x27;&amp;gt;}\n        self       = &amp;lt;AdaptedConnection &amp;lt;asyncpg.connection.Connection object at 0x0000029794E54D60&amp;gt;&amp;gt;\n        super_     = &amp;lt;class &amp;#x27;asyncpg.exceptions.IntegrityConstraintViolationError&amp;#x27;&amp;gt;\n        translated_error = IntegrityError(&amp;#x27;&amp;lt;class \\&amp;#x27;asyncpg.exceptions.UniqueViolationError\\&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\\nDETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.&amp;#x27;)\n\nThe above exception was the direct cause of the following exception:\nbackend_tests\\services\\test_goal_service.py:105: in test_list_goals\n    goal = await GoalFactory.create_async(\n        db_session = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297995AD310&amp;gt;\n        goal       = &amp;lt;[PendingRollbackError(&amp;#x27;This Session\\&amp;#x27;s transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) &amp;lt;class \\&amp;#x27;asyncpg.exceptions.UniqueViolationError\\&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\\nDETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.\\n[SQL: INSERT INTO goals (id, user_id, item_category, title, description, constraints, deadline, status, priority, max_matches, max_tokens, notification_threshold, auto_buy_threshold, matches_found, deals_processed, tokens_spent, rewards_earned, last_checked_at, last_processed_at, best_match_score, average_match_score, active_deals_count, success_rate, created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, $4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, $8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, $13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, $18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, $21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, $25::TIMESTAMP WITH TIME ZONE)]\\n[parameters: (UUID(\\&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e\\&amp;#x27;), UUID(\\&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf\\&amp;#x27;), \\&amp;#x27;electronics\\&amp;#x27;, \\&amp;#x27;Goal for item\\&amp;#x27;, None, \\&amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: [&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}\\&amp;#x27;, None, \\&amp;#x27;active\\&amp;#x27;, \\&amp;#x27;medium\\&amp;#x27;, None, None, None, None, 0, 0, 0.0, 0.0, None, None, None, None, 0, 0.0, datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))]\\n(Background on this error at: https://sqlalche.me/e/20/gkpj)&amp;#x27;) raised in repr()] Goal object at 0x297943d4090&amp;gt;\n        goal_service = &amp;lt;core.services.goal.GoalService object at 0x0000029796275950&amp;gt;\n        goals      = &amp;lt;[PendingRollbackError(&amp;#x27;This Session\\&amp;#x27;s transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) &amp;lt;class \\&amp;#x27;asyncpg.exceptions.UniqueViolationError\\&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\\nDETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.\\n[SQL: INSERT INTO goals (id, user_id, item_category, title, description, constraints, deadline, status, priority, max_matches, max_tokens, notification_threshold, auto_buy_threshold, matches_found, deals_processed, tokens_spent, rewards_earned, last_checked_at, last_processed_at, best_match_score, average_match_score, active_deals_count, success_rate, created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, $4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, $8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, $13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, $18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, $21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, $25::TIMESTAMP WITH TIME ZONE)]\\n[parameters: (UUID(\\&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e\\&amp;#x27;), UUID(\\&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf\\&amp;#x27;), \\&amp;#x27;electronics\\&amp;#x27;, \\&amp;#x27;Goal for item\\&amp;#x27;, None, \\&amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: [&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}\\&amp;#x27;, None, \\&amp;#x27;active\\&amp;#x27;, \\&amp;#x27;medium\\&amp;#x27;, None, None, None, None, 0, 0, 0.0, 0.0, None, None, None, None, 0, 0.0, datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))]\\n(Background on this error at: https://sqlalche.me/e/20/gkpj)&amp;#x27;) raised in repr()] list object at 0x29794b0d0c0&amp;gt;\n        i          = 1\n        priorities = [&amp;lt;GoalPriority.HIGH: &amp;#x27;high&amp;#x27;&amp;gt;,\n &amp;lt;GoalPriority.MEDIUM: &amp;#x27;medium&amp;#x27;&amp;gt;,\n &amp;lt;GoalPriority.LOW: &amp;#x27;low&amp;#x27;&amp;gt;]\n        user       = &amp;lt;core.models.user.User object at 0x00000297995AD690&amp;gt;\nbackend_tests\\factories\\goal.py:160: in create_async\n    return await super().create_async(db_session=db_session, **kwargs)\n        __class__  = &amp;lt;class &amp;#x27;backend_tests.factories.goal.GoalFactory&amp;#x27;&amp;gt;\n        cls        = &amp;lt;class &amp;#x27;backend_tests.factories.goal.GoalFactory&amp;#x27;&amp;gt;\n        db_session = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297995AD310&amp;gt;\n        default_value = [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;]\n        field      = &amp;#x27;keywords&amp;#x27;\n        kwargs     = {&amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n &amp;#x27;user&amp;#x27;: &amp;lt;core.models.user.User object at 0x00000297995AD690&amp;gt;,\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}\n        required_fields = {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n &amp;#x27;max_price&amp;#x27;: 500.0,\n &amp;#x27;min_price&amp;#x27;: 100.0}\nbackend_tests\\factories\\base.py:34: in create_async\n    await db_session.commit()\n        cls        = &amp;lt;class &amp;#x27;backend_tests.factories.goal.GoalFactory&amp;#x27;&amp;gt;\n        db_session = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297995AD310&amp;gt;\n        instance   = &amp;lt;Goal None: Goal for item (None)&amp;gt;\n        kwargs     = {&amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n &amp;#x27;user&amp;#x27;: &amp;lt;core.models.user.User object at 0x00000297995AD690&amp;gt;,\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}\n..\\venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py:1011: in commit\n    await greenlet_spawn(self.sync_session.commit)\n        self       = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x00000297995AD310&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py:203: in greenlet_spawn\n    result = context.switch(value)\n        _require_await = False\n        args       = ()\n        context    = &amp;lt;_AsyncIoGreenlet object at 0x0000029794E4C2C0 (otid=0x00000297C6A429D0) dead&amp;gt;\n        fn         = &amp;lt;bound method Session.commit of &amp;lt;sqlalchemy.orm.session.Session object at 0x00000297995AD2D0&amp;gt;&amp;gt;\n        kwargs     = {}\n        result     = &amp;lt;coroutine object AsyncAdapt_asyncpg_connection._rollback_and_discard at 0x0000029794E43AC0&amp;gt;\n        switch_occurred = True\n        value      = None\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py:2032: in commit\n    trans.commit(_to_root=True)\n        self       = &amp;lt;sqlalchemy.orm.session.Session object at 0x00000297995AD2D0&amp;gt;\n        trans      = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B4D0&amp;gt;\n&amp;lt;string&amp;gt;:2: in commit\n    ???\n        _to_root   = True\n        self       = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B4D0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py:139: in _go\n    ret_value = fn(self, *arg, **kw)\n        arg        = ()\n        current_state = &amp;lt;SessionTransactionState.ACTIVE: 1&amp;gt;\n        existing_fn = None\n        expect_state = &amp;lt;SessionTransactionState.CLOSED: 5&amp;gt;\n        expect_state_change = True\n        fn         = &amp;lt;function SessionTransaction.commit at 0x00000297C7B82E80&amp;gt;\n        has_prerequisite_states = True\n        kw         = {&amp;#x27;_to_root&amp;#x27;: True}\n        moves_to   = &amp;lt;SessionTransactionState.CLOSED: 5&amp;gt;\n        next_state = &amp;lt;_StateChangeStates.ANY: 1&amp;gt;\n        prerequisite_state_collection = (&amp;lt;SessionTransactionState.ACTIVE: 1&amp;gt;, &amp;lt;SessionTransactionState.PREPARED: 2&amp;gt;)\n        self       = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B4D0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py:1313: in commit\n    self._prepare_impl()\n        _to_root   = True\n        self       = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B4D0&amp;gt;\n&amp;lt;string&amp;gt;:2: in _prepare_impl\n    ???\n        self       = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B4D0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py:139: in _go\n    ret_value = fn(self, *arg, **kw)\n        arg        = ()\n        current_state = &amp;lt;SessionTransactionState.ACTIVE: 1&amp;gt;\n        existing_fn = &amp;lt;function SessionTransaction.commit at 0x00000297C7B82E80&amp;gt;\n        expect_state = &amp;lt;SessionTransactionState.PREPARED: 2&amp;gt;\n        expect_state_change = True\n        fn         = &amp;lt;function SessionTransaction._prepare_impl at 0x00000297C7B82CA0&amp;gt;\n        has_prerequisite_states = True\n        kw         = {}\n        moves_to   = &amp;lt;SessionTransactionState.PREPARED: 2&amp;gt;\n        next_state = &amp;lt;SessionTransactionState.PREPARED: 2&amp;gt;\n        prerequisite_state_collection = (&amp;lt;SessionTransactionState.ACTIVE: 1&amp;gt;,)\n        self       = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B4D0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py:1288: in _prepare_impl\n    self.session.flush()\n        _flush_guard = 0\n        self       = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B4D0&amp;gt;\n        stx        = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B4D0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py:4353: in flush\n    self._flush(objects)\n        objects    = None\n        self       = &amp;lt;sqlalchemy.orm.session.Session object at 0x00000297995AD2D0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py:4488: in _flush\n    with util.safe_reraise():\n        _reg       = True\n        deleted    = set()\n        dirty      = {&amp;lt;sqlalchemy.orm.state.InstanceState object at 0x0000029794E95DF0&amp;gt;}\n        flush_context = &amp;lt;sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002979600BDD0&amp;gt;\n        is_orphan  = False\n        is_persistent_orphan = False\n        new        = {&amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;}\n        objects    = None\n        objset     = None\n        proc       = set()\n        processed  = {&amp;lt;sqlalchemy.orm.state.InstanceState object at 0x0000029794E95DF0&amp;gt;,\n &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;}\n        self       = &amp;lt;sqlalchemy.orm.session.Session object at 0x00000297995AD2D0&amp;gt;\n        state      = &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x0000029794E95DF0&amp;gt;\n        transaction = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B110&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py:146: in __exit__\n    raise exc_value.with_traceback(exc_tb)\n        exc_tb     = &amp;lt;traceback object at 0x000002979639DD00&amp;gt;\n        exc_type   = &amp;lt;class &amp;#x27;sqlalchemy.exc.IntegrityError&amp;#x27;&amp;gt;\n        exc_value  = IntegrityError(&amp;#x27;(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) &amp;lt;class \\&amp;#x27;asyncpg.exceptions.UniqueViolationError\\&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\\nDETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.&amp;#x27;)\n        self       = &amp;lt;sqlalchemy.util.langhelpers.safe_reraise object at 0x0000029794DBCA60&amp;gt;\n        traceback  = None\n        type_      = None\n        value      = None\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py:4449: in _flush\n    flush_context.execute()\n        _reg       = True\n        deleted    = set()\n        dirty      = {&amp;lt;sqlalchemy.orm.state.InstanceState object at 0x0000029794E95DF0&amp;gt;}\n        flush_context = &amp;lt;sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002979600BDD0&amp;gt;\n        is_orphan  = False\n        is_persistent_orphan = False\n        new        = {&amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;}\n        objects    = None\n        objset     = None\n        proc       = set()\n        processed  = {&amp;lt;sqlalchemy.orm.state.InstanceState object at 0x0000029794E95DF0&amp;gt;,\n &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;}\n        self       = &amp;lt;sqlalchemy.orm.session.Session object at 0x00000297995AD2D0&amp;gt;\n        state      = &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x0000029794E95DF0&amp;gt;\n        transaction = &amp;lt;sqlalchemy.orm.session.SessionTransaction object at 0x00000297C418B110&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py:466: in execute\n    rec.execute(self)\n        postsort_actions = [DeleteAll(Mapper[Goal(goals)]),\n DeleteAll(Mapper[User(users)]),\n ProcessAll(ManyToOneDP(Goal.user), isdelete=False),\n ProcessAll(ManyToOneDP(Goal.user), isdelete=True),\n ProcessAll(OneToManyDP(User.goals), isdelete=False),\n ProcessAll(OneToManyDP(User.goals), isdelete=True),\n SaveUpdateAll(Mapper[Goal(goals)]),\n SaveUpdateAll(Mapper[User(users)])]\n        rec        = SaveUpdateAll(Mapper[Goal(goals)])\n        self       = &amp;lt;sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002979600BDD0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py:642: in execute\n    util.preloaded.orm_persistence.save_obj(\n        self       = SaveUpdateAll(Mapper[Goal(goals)])\n        uow        = &amp;lt;sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002979600BDD0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py:93: in save_obj\n    _emit_insert_statements(\n        base_mapper = &amp;lt;Mapper at 0x297c9d71810; Goal&amp;gt;\n        connection = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        dict_      = {&amp;#x27;_sa_instance_state&amp;#x27;: &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n &amp;#x27;user&amp;#x27;: &amp;lt;core.models.user.User object at 0x00000297995AD690&amp;gt;,\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}\n        has_identity = False\n        insert     = &amp;lt;generator object _collect_insert_commands at 0x00000297963404F0&amp;gt;\n        mapper     = &amp;lt;Mapper at 0x297c9d71810; Goal&amp;gt;\n        row_switch = None\n        single     = False\n        state      = &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;\n        states     = &amp;lt;generator object UOWTransaction.states_for_mapper_hierarchy at 0x0000029794D46440&amp;gt;\n        states_to_insert = [(&amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;,\n  {&amp;#x27;_sa_instance_state&amp;#x27;: &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;,\n   &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                   &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                   &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                   &amp;#x27;max_price&amp;#x27;: 500.0,\n                   &amp;#x27;min_price&amp;#x27;: 100.0},\n   &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n   &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n   &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n   &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n   &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n   &amp;#x27;user&amp;#x27;: &amp;lt;core.models.user.User object at 0x00000297995AD690&amp;gt;,\n   &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)},\n  &amp;lt;Mapper at 0x297c9d71810; Goal&amp;gt;,\n  &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;)]\n        states_to_update = []\n        table      = Table(&amp;#x27;goals&amp;#x27;, MetaData(), Column(&amp;#x27;id&amp;#x27;, UUID(), table=&amp;lt;goals&amp;gt;, primary_key=True, nullable=False, default=CallableColumnDefault(&amp;lt;function uuid4 at 0x00000297C9B7F7E0&amp;gt;)), Column(&amp;#x27;user_id&amp;#x27;, UUID(), ForeignKey(&amp;#x27;users.id&amp;#x27;), table=&amp;lt;goals&amp;gt;, nullable=False), Column(&amp;#x27;item_category&amp;#x27;, Enum(&amp;#x27;electronics&amp;#x27;, &amp;#x27;fashion&amp;#x27;, &amp;#x27;home&amp;#x27;, &amp;#x27;toys&amp;#x27;, &amp;#x27;books&amp;#x27;, &amp;#x27;sports&amp;#x27;, &amp;#x27;automotive&amp;#x27;, &amp;#x27;health&amp;#x27;, &amp;#x27;beauty&amp;#x27;, &amp;#x27;grocery&amp;#x27;, &amp;#x27;other&amp;#x27;, name=&amp;#x27;marketcategory&amp;#x27;), table=&amp;lt;goals&amp;gt;, nullable=False), Column(&amp;#x27;title&amp;#x27;, String(length=255), table=&amp;lt;goals&amp;gt;, nullable=False), Column(&amp;#x27;description&amp;#x27;, Text(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;constraints&amp;#x27;, JSONB(astext_type=Text()), table=&amp;lt;goals&amp;gt;, nullable=False), Column(&amp;#x27;deadline&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;status&amp;#x27;, Enum(&amp;#x27;active&amp;#x27;, &amp;#x27;paused&amp;#x27;, &amp;#x27;completed&amp;#x27;, &amp;#x27;cancelled&amp;#x27;, &amp;#x27;failed&amp;#x27;, &amp;#x27;expired&amp;#x27;, &amp;#x27;error&amp;#x27;, name=&amp;#x27;goalstatus&amp;#x27;), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(&amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;)), Column(&amp;#x27;priority&amp;#x27;, Enum(&amp;#x27;high&amp;#x27;, &amp;#x27;medium&amp;#x27;, &amp;#x27;low&amp;#x27;, name=&amp;#x27;goalpriority&amp;#x27;), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(&amp;lt;GoalPriority.MEDIUM: &amp;#x27;medium&amp;#x27;&amp;gt;)), Column(&amp;#x27;max_matches&amp;#x27;, Integer(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;max_tokens&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;notification_threshold&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;auto_buy_threshold&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;matches_found&amp;#x27;, Integer(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0)), Column(&amp;#x27;deals_processed&amp;#x27;, Integer(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0)), Column(&amp;#x27;tokens_spent&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0.0)), Column(&amp;#x27;rewards_earned&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0.0)), Column(&amp;#x27;last_checked_at&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;last_processed_at&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;processing_stats&amp;#x27;, JSONB(astext_type=Text()), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;best_match_score&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;average_match_score&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;active_deals_count&amp;#x27;, Integer(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0)), Column(&amp;#x27;success_rate&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0.0)), Column(&amp;#x27;created_at&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;, nullable=False, server_default=DefaultClause(&amp;lt;sqlalchemy.sql.elements.TextClause object at 0x00000297C9D82F90&amp;gt;, for_update=False)), Column(&amp;#x27;updated_at&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;, nullable=False, onupdate=ColumnElementColumnDefault(&amp;lt;sqlalchemy.sql.elements.TextClause object at 0x00000297C9D830D0&amp;gt;), server_default=DefaultClause(&amp;lt;sqlalchemy.sql.elements.TextClause object at 0x00000297C9D83110&amp;gt;, for_update=False)), schema=None)\n        uowtransaction = &amp;lt;sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002979600BDD0&amp;gt;\n        update     = &amp;lt;generator object _collect_update_commands at 0x00000297948E7880&amp;gt;\n        update_version_id = None\n..\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py:1233: in _emit_insert_statements\n    result = connection.execute(\n        _          = {&amp;#x27;auto_buy_threshold&amp;#x27;,\n &amp;#x27;average_match_score&amp;#x27;,\n &amp;#x27;best_match_score&amp;#x27;,\n &amp;#x27;constraints&amp;#x27;,\n &amp;#x27;created_at&amp;#x27;,\n &amp;#x27;deadline&amp;#x27;,\n &amp;#x27;description&amp;#x27;,\n &amp;#x27;item_category&amp;#x27;,\n &amp;#x27;last_checked_at&amp;#x27;,\n &amp;#x27;last_processed_at&amp;#x27;,\n &amp;#x27;max_matches&amp;#x27;,\n &amp;#x27;max_tokens&amp;#x27;,\n &amp;#x27;notification_threshold&amp;#x27;,\n &amp;#x27;priority&amp;#x27;,\n &amp;#x27;title&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;,\n &amp;#x27;user_id&amp;#x27;}\n        base_mapper = &amp;lt;Mapper at 0x297c9d71810; Goal&amp;gt;\n        bookkeeping = True\n        cached_stmt = &amp;lt;sqlalchemy.sql.dml.Insert object at 0x000002979634CA10&amp;gt;\n        connection = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        deterministic_results_reqd = True\n        do_executemany = False\n        exec_opt   = {&amp;#x27;compiled_cache&amp;#x27;: &amp;lt;sqlalchemy.util._collections.LRUCache object at 0x0000029796310810&amp;gt;}\n        execution_options = {&amp;#x27;compiled_cache&amp;#x27;: &amp;lt;sqlalchemy.util._collections.LRUCache object at 0x0000029796310810&amp;gt;}\n        has_all_defaults = True\n        has_all_pks = False\n        hasvalue   = False\n        insert     = &amp;lt;generator object _collect_insert_commands at 0x00000297963404F0&amp;gt;\n        mapper     = &amp;lt;Mapper at 0x297c9d71810; Goal&amp;gt;\n        mapper_rec = &amp;lt;Mapper at 0x297c9d71810; Goal&amp;gt;\n        params     = {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n &amp;#x27;average_match_score&amp;#x27;: None,\n &amp;#x27;best_match_score&amp;#x27;: None,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: None,\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;last_processed_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: None,\n &amp;#x27;max_tokens&amp;#x27;: None,\n &amp;#x27;notification_threshold&amp;#x27;: None,\n &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}\n        records    = [(&amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;,\n  {&amp;#x27;_sa_instance_state&amp;#x27;: &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;,\n   &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                   &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                   &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                   &amp;#x27;max_price&amp;#x27;: 500.0,\n                   &amp;#x27;min_price&amp;#x27;: 100.0},\n   &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n   &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n   &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n   &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n   &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n   &amp;#x27;user&amp;#x27;: &amp;lt;core.models.user.User object at 0x00000297995AD690&amp;gt;,\n   &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)},\n  {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n   &amp;#x27;average_match_score&amp;#x27;: None,\n   &amp;#x27;best_match_score&amp;#x27;: None,\n   &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                   &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                   &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                   &amp;#x27;max_price&amp;#x27;: 500.0,\n                   &amp;#x27;min_price&amp;#x27;: 100.0},\n   &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n   &amp;#x27;deadline&amp;#x27;: None,\n   &amp;#x27;description&amp;#x27;: None,\n   &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n   &amp;#x27;last_checked_at&amp;#x27;: None,\n   &amp;#x27;last_processed_at&amp;#x27;: None,\n   &amp;#x27;max_matches&amp;#x27;: None,\n   &amp;#x27;max_tokens&amp;#x27;: None,\n   &amp;#x27;notification_threshold&amp;#x27;: None,\n   &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n   &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n   &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n   &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)},\n  &amp;lt;Mapper at 0x297c9d71810; Goal&amp;gt;,\n  &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;,\n  {},\n  False,\n  True)]\n        return_result = None\n        returning_is_required_anyway = False\n        state      = &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;\n        state_dict = {&amp;#x27;_sa_instance_state&amp;#x27;: &amp;lt;sqlalchemy.orm.state.InstanceState object at 0x00000297968685F0&amp;gt;,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n &amp;#x27;user&amp;#x27;: &amp;lt;core.models.user.User object at 0x00000297995AD690&amp;gt;,\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}\n        statement  = &amp;lt;sqlalchemy.sql.dml.Insert object at 0x000002979634CA10&amp;gt;\n        table      = Table(&amp;#x27;goals&amp;#x27;, MetaData(), Column(&amp;#x27;id&amp;#x27;, UUID(), table=&amp;lt;goals&amp;gt;, primary_key=True, nullable=False, default=CallableColumnDefault(&amp;lt;function uuid4 at 0x00000297C9B7F7E0&amp;gt;)), Column(&amp;#x27;user_id&amp;#x27;, UUID(), ForeignKey(&amp;#x27;users.id&amp;#x27;), table=&amp;lt;goals&amp;gt;, nullable=False), Column(&amp;#x27;item_category&amp;#x27;, Enum(&amp;#x27;electronics&amp;#x27;, &amp;#x27;fashion&amp;#x27;, &amp;#x27;home&amp;#x27;, &amp;#x27;toys&amp;#x27;, &amp;#x27;books&amp;#x27;, &amp;#x27;sports&amp;#x27;, &amp;#x27;automotive&amp;#x27;, &amp;#x27;health&amp;#x27;, &amp;#x27;beauty&amp;#x27;, &amp;#x27;grocery&amp;#x27;, &amp;#x27;other&amp;#x27;, name=&amp;#x27;marketcategory&amp;#x27;), table=&amp;lt;goals&amp;gt;, nullable=False), Column(&amp;#x27;title&amp;#x27;, String(length=255), table=&amp;lt;goals&amp;gt;, nullable=False), Column(&amp;#x27;description&amp;#x27;, Text(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;constraints&amp;#x27;, JSONB(astext_type=Text()), table=&amp;lt;goals&amp;gt;, nullable=False), Column(&amp;#x27;deadline&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;status&amp;#x27;, Enum(&amp;#x27;active&amp;#x27;, &amp;#x27;paused&amp;#x27;, &amp;#x27;completed&amp;#x27;, &amp;#x27;cancelled&amp;#x27;, &amp;#x27;failed&amp;#x27;, &amp;#x27;expired&amp;#x27;, &amp;#x27;error&amp;#x27;, name=&amp;#x27;goalstatus&amp;#x27;), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(&amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;)), Column(&amp;#x27;priority&amp;#x27;, Enum(&amp;#x27;high&amp;#x27;, &amp;#x27;medium&amp;#x27;, &amp;#x27;low&amp;#x27;, name=&amp;#x27;goalpriority&amp;#x27;), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(&amp;lt;GoalPriority.MEDIUM: &amp;#x27;medium&amp;#x27;&amp;gt;)), Column(&amp;#x27;max_matches&amp;#x27;, Integer(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;max_tokens&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;notification_threshold&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;auto_buy_threshold&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;matches_found&amp;#x27;, Integer(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0)), Column(&amp;#x27;deals_processed&amp;#x27;, Integer(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0)), Column(&amp;#x27;tokens_spent&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0.0)), Column(&amp;#x27;rewards_earned&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0.0)), Column(&amp;#x27;last_checked_at&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;last_processed_at&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;processing_stats&amp;#x27;, JSONB(astext_type=Text()), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;best_match_score&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;average_match_score&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;), Column(&amp;#x27;active_deals_count&amp;#x27;, Integer(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0)), Column(&amp;#x27;success_rate&amp;#x27;, Float(), table=&amp;lt;goals&amp;gt;, nullable=False, default=ScalarElementColumnDefault(0.0)), Column(&amp;#x27;created_at&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;, nullable=False, server_default=DefaultClause(&amp;lt;sqlalchemy.sql.elements.TextClause object at 0x00000297C9D82F90&amp;gt;, for_update=False)), Column(&amp;#x27;updated_at&amp;#x27;, DateTime(timezone=True), table=&amp;lt;goals&amp;gt;, nullable=False, onupdate=ColumnElementColumnDefault(&amp;lt;sqlalchemy.sql.elements.TextClause object at 0x00000297C9D830D0&amp;gt;), server_default=DefaultClause(&amp;lt;sqlalchemy.sql.elements.TextClause object at 0x00000297C9D83110&amp;gt;, for_update=False)), schema=None)\n        uowtransaction = &amp;lt;sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002979600BDD0&amp;gt;\n        use_orm_insert_stmt = None\n        value_params = {}\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py:1416: in execute\n    return meth(\n        distilled_parameters = [{&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n  &amp;#x27;average_match_score&amp;#x27;: None,\n  &amp;#x27;best_match_score&amp;#x27;: None,\n  &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                  &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                  &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                  &amp;#x27;max_price&amp;#x27;: 500.0,\n                  &amp;#x27;min_price&amp;#x27;: 100.0},\n  &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  &amp;#x27;deadline&amp;#x27;: None,\n  &amp;#x27;description&amp;#x27;: None,\n  &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n  &amp;#x27;last_checked_at&amp;#x27;: None,\n  &amp;#x27;last_processed_at&amp;#x27;: None,\n  &amp;#x27;max_matches&amp;#x27;: None,\n  &amp;#x27;max_tokens&amp;#x27;: None,\n  &amp;#x27;notification_threshold&amp;#x27;: None,\n  &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n  &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n  &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}]\n        execution_options = {&amp;#x27;compiled_cache&amp;#x27;: &amp;lt;sqlalchemy.util._collections.LRUCache object at 0x0000029796310810&amp;gt;}\n        meth       = &amp;lt;bound method ClauseElement._execute_on_connection of &amp;lt;sqlalchemy.sql.dml.Insert object at 0x000002979634CA10&amp;gt;&amp;gt;\n        parameters = {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n &amp;#x27;average_match_score&amp;#x27;: None,\n &amp;#x27;best_match_score&amp;#x27;: None,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: None,\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;last_processed_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: None,\n &amp;#x27;max_tokens&amp;#x27;: None,\n &amp;#x27;notification_threshold&amp;#x27;: None,\n &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}\n        self       = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        statement  = &amp;lt;sqlalchemy.sql.dml.Insert object at 0x000002979634CA10&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py:516: in _execute_on_connection\n    return connection._execute_clauseelement(\n        connection = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        distilled_params = [{&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n  &amp;#x27;average_match_score&amp;#x27;: None,\n  &amp;#x27;best_match_score&amp;#x27;: None,\n  &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                  &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                  &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                  &amp;#x27;max_price&amp;#x27;: 500.0,\n                  &amp;#x27;min_price&amp;#x27;: 100.0},\n  &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  &amp;#x27;deadline&amp;#x27;: None,\n  &amp;#x27;description&amp;#x27;: None,\n  &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n  &amp;#x27;last_checked_at&amp;#x27;: None,\n  &amp;#x27;last_processed_at&amp;#x27;: None,\n  &amp;#x27;max_matches&amp;#x27;: None,\n  &amp;#x27;max_tokens&amp;#x27;: None,\n  &amp;#x27;notification_threshold&amp;#x27;: None,\n  &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n  &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n  &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}]\n        execution_options = {&amp;#x27;compiled_cache&amp;#x27;: &amp;lt;sqlalchemy.util._collections.LRUCache object at 0x0000029796310810&amp;gt;}\n        self       = &amp;lt;sqlalchemy.sql.dml.Insert object at 0x000002979634CA10&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py:1638: in _execute_clauseelement\n    ret = self._execute_context(\n        cache_hit  = &amp;lt;CacheStats.CACHE_HIT: 0&amp;gt;\n        compiled_cache = &amp;lt;sqlalchemy.util._collections.LRUCache object at 0x0000029796310810&amp;gt;\n        compiled_sql = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x00000297C4284910&amp;gt;\n        dialect    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000029792B0C550&amp;gt;\n        distilled_parameters = [{&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n  &amp;#x27;average_match_score&amp;#x27;: None,\n  &amp;#x27;best_match_score&amp;#x27;: None,\n  &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                  &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                  &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                  &amp;#x27;max_price&amp;#x27;: 500.0,\n                  &amp;#x27;min_price&amp;#x27;: 100.0},\n  &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  &amp;#x27;deadline&amp;#x27;: None,\n  &amp;#x27;description&amp;#x27;: None,\n  &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n  &amp;#x27;last_checked_at&amp;#x27;: None,\n  &amp;#x27;last_processed_at&amp;#x27;: None,\n  &amp;#x27;max_matches&amp;#x27;: None,\n  &amp;#x27;max_tokens&amp;#x27;: None,\n  &amp;#x27;notification_threshold&amp;#x27;: None,\n  &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n  &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n  &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}]\n        elem       = &amp;lt;sqlalchemy.sql.dml.Insert object at 0x000002979634CA10&amp;gt;\n        execution_options = immutabledict({&amp;#x27;compiled_cache&amp;#x27;: &amp;lt;sqlalchemy.util._collections.LRUCache object at 0x0000029796310810&amp;gt;})\n        extracted_params = []\n        for_executemany = False\n        has_events = False\n        keys       = [&amp;#x27;auto_buy_threshold&amp;#x27;,\n &amp;#x27;average_match_score&amp;#x27;,\n &amp;#x27;best_match_score&amp;#x27;,\n &amp;#x27;constraints&amp;#x27;,\n &amp;#x27;created_at&amp;#x27;,\n &amp;#x27;deadline&amp;#x27;,\n &amp;#x27;description&amp;#x27;,\n &amp;#x27;item_category&amp;#x27;,\n &amp;#x27;last_checked_at&amp;#x27;,\n &amp;#x27;last_processed_at&amp;#x27;,\n &amp;#x27;max_matches&amp;#x27;,\n &amp;#x27;max_tokens&amp;#x27;,\n &amp;#x27;notification_threshold&amp;#x27;,\n &amp;#x27;priority&amp;#x27;,\n &amp;#x27;title&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;,\n &amp;#x27;user_id&amp;#x27;]\n        schema_translate_map = None\n        self       = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py:1843: in _execute_context\n    return self._exec_single_context(\n        args       = (&amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x00000297C4284910&amp;gt;,\n [{&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n   &amp;#x27;average_match_score&amp;#x27;: None,\n   &amp;#x27;best_match_score&amp;#x27;: None,\n   &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                   &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                   &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                   &amp;#x27;max_price&amp;#x27;: 500.0,\n                   &amp;#x27;min_price&amp;#x27;: 100.0},\n   &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n   &amp;#x27;deadline&amp;#x27;: None,\n   &amp;#x27;description&amp;#x27;: None,\n   &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n   &amp;#x27;last_checked_at&amp;#x27;: None,\n   &amp;#x27;last_processed_at&amp;#x27;: None,\n   &amp;#x27;max_matches&amp;#x27;: None,\n   &amp;#x27;max_tokens&amp;#x27;: None,\n   &amp;#x27;notification_threshold&amp;#x27;: None,\n   &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n   &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n   &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n   &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}],\n &amp;lt;sqlalchemy.sql.dml.Insert object at 0x000002979634CA10&amp;gt;,\n [])\n        conn       = &amp;lt;sqlalchemy.pool.base._ConnectionFairy object at 0x00000297968D5370&amp;gt;\n        constructor = &amp;lt;bound method DefaultExecutionContext._init_compiled of &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.PGExecutionContext_asyncpg&amp;#x27;&amp;gt;&amp;gt;\n        context    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGExecutionContext_asyncpg object at 0x00000297968E7A50&amp;gt;\n        dialect    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000029792B0C550&amp;gt;\n        execution_options = immutabledict({&amp;#x27;compiled_cache&amp;#x27;: &amp;lt;sqlalchemy.util._collections.LRUCache object at 0x0000029796310810&amp;gt;})\n        kw         = {&amp;#x27;cache_hit&amp;#x27;: &amp;lt;CacheStats.CACHE_HIT: 0&amp;gt;}\n        parameters = [{&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n  &amp;#x27;average_match_score&amp;#x27;: None,\n  &amp;#x27;best_match_score&amp;#x27;: None,\n  &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                  &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                  &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                  &amp;#x27;max_price&amp;#x27;: 500.0,\n                  &amp;#x27;min_price&amp;#x27;: 100.0},\n  &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  &amp;#x27;deadline&amp;#x27;: None,\n  &amp;#x27;description&amp;#x27;: None,\n  &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n  &amp;#x27;last_checked_at&amp;#x27;: None,\n  &amp;#x27;last_processed_at&amp;#x27;: None,\n  &amp;#x27;max_matches&amp;#x27;: None,\n  &amp;#x27;max_tokens&amp;#x27;: None,\n  &amp;#x27;notification_threshold&amp;#x27;: None,\n  &amp;#x27;priority&amp;#x27;: &amp;#x27;medium&amp;#x27;,\n  &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n  &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;)}]\n        self       = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        statement  = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x00000297C4284910&amp;gt;\n        yp         = None\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py:1983: in _exec_single_context\n    self._handle_dbapi_exception(\n        context    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGExecutionContext_asyncpg object at 0x00000297968E7A50&amp;gt;\n        cursor     = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n        dialect    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000029792B0C550&amp;gt;\n        effective_parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        evt_handled = False\n        parameters = [(UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n  UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n  &amp;#x27;electronics&amp;#x27;,\n  &amp;#x27;Goal for item&amp;#x27;,\n  None,\n  &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n  &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n  &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n  None,\n  &amp;#x27;active&amp;#x27;,\n  &amp;#x27;medium&amp;#x27;,\n  None,\n  None,\n  None,\n  None,\n  0,\n  0,\n  0.0,\n  0.0,\n  None,\n  None,\n  None,\n  None,\n  0,\n  0.0,\n  datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))]\n        self       = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        statement  = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x00000297C4284910&amp;gt;\n        str_statement = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py:2352: in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n        context    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGExecutionContext_asyncpg object at 0x00000297968E7A50&amp;gt;\n        cursor     = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n        e          = IntegrityError(&amp;#x27;&amp;lt;class \\&amp;#x27;asyncpg.exceptions.UniqueViolationError\\&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\\nDETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.&amp;#x27;)\n        exc_info   = (&amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError&amp;#x27;&amp;gt;,\n IntegrityError(&amp;#x27;&amp;lt;class \\&amp;#x27;asyncpg.exceptions.UniqueViolationError\\&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\\nDETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.&amp;#x27;),\n &amp;lt;traceback object at 0x000002979639FFC0&amp;gt;)\n        invalidate_pool_on_disconnect = True\n        is_exit_exception = False\n        is_sub_exec = False\n        ismulti    = False\n        newraise   = None\n        parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        self       = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        should_wrap = True\n        sqlalchemy_exception = IntegrityError(&amp;#x27;(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) &amp;lt;class \\&amp;#x27;asyncpg.exceptions.UniqueViolationError\\&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\\nDETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.&amp;#x27;)\n        statement  = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py:1964: in _exec_single_context\n    self.dialect.do_execute(\n        context    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGExecutionContext_asyncpg object at 0x00000297968E7A50&amp;gt;\n        cursor     = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n        dialect    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000029792B0C550&amp;gt;\n        effective_parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        evt_handled = False\n        parameters = [(UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n  UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n  &amp;#x27;electronics&amp;#x27;,\n  &amp;#x27;Goal for item&amp;#x27;,\n  None,\n  &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n  &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n  &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n  None,\n  &amp;#x27;active&amp;#x27;,\n  &amp;#x27;medium&amp;#x27;,\n  None,\n  None,\n  None,\n  None,\n  0,\n  0,\n  0.0,\n  0.0,\n  None,\n  None,\n  None,\n  None,\n  0,\n  0.0,\n  datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n  datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))]\n        self       = &amp;lt;sqlalchemy.engine.base.Connection object at 0x00000297995AD9D0&amp;gt;\n        statement  = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x00000297C4284910&amp;gt;\n        str_statement = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n..\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py:942: in do_execute\n    cursor.execute(statement, parameters)\n        context    = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGExecutionContext_asyncpg object at 0x00000297968E7A50&amp;gt;\n        cursor     = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n        parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000029792B0C550&amp;gt;\n        statement  = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:580: in execute\n    self._adapt_connection.await_(\n        operation  = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n        parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py:132: in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n        awaitable  = &amp;lt;coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000029794DF4040&amp;gt;\n        current    = &amp;lt;_AsyncIoGreenlet object at 0x0000029794E4C2C0 (otid=0x00000297C6A429D0) dead&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py:196: in greenlet_spawn\n    value = await result\n        _require_await = False\n        args       = ()\n        context    = &amp;lt;_AsyncIoGreenlet object at 0x0000029794E4C2C0 (otid=0x00000297C6A429D0) dead&amp;gt;\n        fn         = &amp;lt;bound method Session.commit of &amp;lt;sqlalchemy.orm.session.Session object at 0x00000297995AD2D0&amp;gt;&amp;gt;\n        kwargs     = {}\n        result     = &amp;lt;coroutine object AsyncAdapt_asyncpg_connection._rollback_and_discard at 0x0000029794E43AC0&amp;gt;\n        switch_occurred = True\n        value      = None\n..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:558: in _prepare_and_execute\n    self._handle_exception(error)\n        adapt_connection = &amp;lt;AdaptedConnection &amp;lt;asyncpg.connection.Connection object at 0x0000029794E54D60&amp;gt;&amp;gt;\n        attributes = ()\n        operation  = (&amp;#x27;INSERT INTO goals (id, user_id, item_category, title, description, &amp;#x27;\n &amp;#x27;constraints, deadline, status, priority, max_matches, max_tokens, &amp;#x27;\n &amp;#x27;notification_threshold, auto_buy_threshold, matches_found, deals_processed, &amp;#x27;\n &amp;#x27;tokens_spent, rewards_earned, last_checked_at, last_processed_at, &amp;#x27;\n &amp;#x27;best_match_score, average_match_score, active_deals_count, success_rate, &amp;#x27;\n &amp;#x27;created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, &amp;#x27;\n &amp;#x27;$4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, &amp;#x27;\n &amp;#x27;$13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, &amp;#x27;\n &amp;#x27;$18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, &amp;#x27;\n &amp;#x27;$21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, &amp;#x27;\n &amp;#x27;$25::TIMESTAMP WITH TIME ZONE)&amp;#x27;)\n        parameters = (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;),\n UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;),\n &amp;#x27;electronics&amp;#x27;,\n &amp;#x27;Goal for item&amp;#x27;,\n None,\n &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;#x27;\n &amp;#x27;&amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: &amp;#x27;\n &amp;#x27;[&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;,\n None,\n &amp;#x27;active&amp;#x27;,\n &amp;#x27;medium&amp;#x27;,\n None,\n None,\n None,\n None,\n 0,\n 0,\n 0.0,\n 0.0,\n None,\n None,\n None,\n None,\n 0,\n 0.0,\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc),\n datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))\n        prepared_stmt = &amp;lt;asyncpg.prepared_stmt.PreparedStatement object at 0x0000029796312C00&amp;gt;\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:508: in _handle_exception\n    self._adapt_connection._handle_exception(error)\n        error      = UniqueViolationError(&amp;#x27;\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;&amp;#x27;)\n        self       = &amp;lt;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000029796870D00&amp;gt;\n..\\venv\\Lib\\site-packages\\sqlalchemy\\dialects\\postgresql\\asyncpg.py:792: in _handle_exception\n    raise translated_error from error\nE   sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) &amp;lt;class &amp;#x27;asyncpg.exceptions.UniqueViolationError&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\nE   DETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.\nE   [SQL: INSERT INTO goals (id, user_id, item_category, title, description, constraints, deadline, status, priority, max_matches, max_tokens, notification_threshold, auto_buy_threshold, matches_found, deals_processed, tokens_spent, rewards_earned, last_checked_at, last_processed_at, best_match_score, average_match_score, active_deals_count, success_rate, created_at, updated_at) VALUES ($1::UUID, $2::UUID, $3::marketcategory, $4::VARCHAR, $5::VARCHAR, $6::JSONB, $7::TIMESTAMP WITH TIME ZONE, $8::goalstatus, $9::goalpriority, $10::INTEGER, $11::FLOAT, $12::FLOAT, $13::FLOAT, $14::INTEGER, $15::INTEGER, $16::FLOAT, $17::FLOAT, $18::TIMESTAMP WITH TIME ZONE, $19::TIMESTAMP WITH TIME ZONE, $20::FLOAT, $21::FLOAT, $22::INTEGER, $23::FLOAT, $24::TIMESTAMP WITH TIME ZONE, $25::TIMESTAMP WITH TIME ZONE)]\nE   [parameters: (UUID(&amp;#x27;85ab0f27-3652-41f3-aa28-c017a838923e&amp;#x27;), UUID(&amp;#x27;ecb0f59b-21a4-48e2-86b1-f258b3152ddf&amp;#x27;), &amp;#x27;electronics&amp;#x27;, &amp;#x27;Goal for item&amp;#x27;, None, &amp;#x27;{&amp;quot;min_price&amp;quot;: 100.0, &amp;quot;max_price&amp;quot;: 500.0, &amp;quot;brands&amp;quot;: [&amp;quot;samsung&amp;quot;, &amp;quot;apple&amp;quot;, &amp;quot;sony&amp;quot;], &amp;quot;conditions&amp;quot;: [&amp;quot;new&amp;quot;, &amp;quot;like_new&amp;quot;, &amp;quot;good&amp;quot;], &amp;quot;keywords&amp;quot;: [&amp;quot;electronics&amp;quot;, &amp;quot;gadget&amp;quot;, &amp;quot;tech&amp;quot;]}&amp;#x27;, None, &amp;#x27;active&amp;#x27;, &amp;#x27;medium&amp;#x27;, None, None, None, None, 0, 0, 0.0, 0.0, None, None, None, None, 0, 0.0, datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 3, 4, 18, 48, 58, 94542, tzinfo=datetime.timezone.utc))]\nE   (Background on this error at: https://sqlalche.me/e/20/gkpj)\n        error      = UniqueViolationError(&amp;#x27;\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;&amp;#x27;)\n        exception_mapping = {&amp;lt;class &amp;#x27;asyncpg.exceptions._base.PostgresError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions.InvalidCachedStatementError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InvalidCachedStatementError&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions.IntegrityConstraintViolationError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions.SyntaxOrAccessError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions.InternalServerError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InternalServerError&amp;#x27;&amp;gt;,\n &amp;lt;class &amp;#x27;asyncpg.exceptions._base.InterfaceError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError&amp;#x27;&amp;gt;}\n        self       = &amp;lt;AdaptedConnection &amp;lt;asyncpg.connection.Connection object at 0x0000029794E54D60&amp;gt;&amp;gt;\n        super_     = &amp;lt;class &amp;#x27;asyncpg.exceptions.IntegrityConstraintViolationError&amp;#x27;&amp;gt;\n        translated_error = IntegrityError(&amp;#x27;&amp;lt;class \\&amp;#x27;asyncpg.exceptions.UniqueViolationError\\&amp;#x27;&amp;gt;: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 &amp;quot;uq_user_goal_title&amp;quot;\\nDETAIL:  \u041a\u043b\u044e\u0447 &amp;quot;(user_id, title)=(ecb0f59b-21a4-48e2-86b1-f258b3152ddf, Goal for item)&amp;quot; \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.&amp;#x27;)\n--------------------------- Captured stderr teardown ---------------------------\nsys:1: SAWarning: transaction already deassociated from connection\n&#34;}], &#34;backend_tests/services/test_goal_service.py::test_delete_goal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_goal_service.py::test_delete_goal&#34;, &#34;duration&#34;: &#34;249 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_goal_service.py::test_delete_goal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;249 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\goal.py:597: in _cache_goal\n    await self._redis.set(\nE   TypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n        cache_key  = GoalCacheKey(user_id=UUID(&amp;#x27;260d3df3-6216-4422-9c22-d8db97c99b13&amp;#x27;), goal_id=UUID(&amp;#x27;c5974b02-89df-4e77-bb68-3e8b92bddcaf&amp;#x27;))\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4131e10&amp;gt;\n        goal_dict  = {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 777236, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: None,\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: UUID(&amp;#x27;c5974b02-89df-4e77-bb68-3e8b92bddcaf&amp;#x27;),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: None,\n &amp;#x27;max_tokens&amp;#x27;: None,\n &amp;#x27;metadata&amp;#x27;: {},\n &amp;#x27;priority&amp;#x27;: 2,\n &amp;#x27;status&amp;#x27;: &amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 777236, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;260d3df3-6216-4422-9c22-d8db97c99b13&amp;#x27;)}\n        priority_map = {&amp;#x27;critical&amp;#x27;: 5, &amp;#x27;high&amp;#x27;: 3, &amp;#x27;low&amp;#x27;: 1, &amp;#x27;medium&amp;#x27;: 2, &amp;#x27;urgent&amp;#x27;: 4}\n        self       = &amp;lt;core.services.goal.GoalService object at 0x000002979982B390&amp;gt;\n\nThe above exception was the direct cause of the following exception:\ncore\\services\\goal.py:406: in get_goal\n    await self._cache_goal(goal)\n        cached_goal = None\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4131e10&amp;gt;\n        goal_for_user = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4131e10&amp;gt;\n        goal_id    = UUID(&amp;#x27;c5974b02-89df-4e77-bb68-3e8b92bddcaf&amp;#x27;)\n        query      = &amp;lt;sqlalchemy.sql.selectable.Select object at 0x00000297993FEE50&amp;gt;\n        result     = &amp;lt;sqlalchemy.engine.result.ChunkedIteratorResult object at 0x00000297993FF610&amp;gt;\n        self       = &amp;lt;core.services.goal.GoalService object at 0x000002979982B390&amp;gt;\n        user_id    = UUID(&amp;#x27;260d3df3-6216-4422-9c22-d8db97c99b13&amp;#x27;)\ncore\\services\\goal.py:604: in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\nE   core.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n        cache_key  = GoalCacheKey(user_id=UUID(&amp;#x27;260d3df3-6216-4422-9c22-d8db97c99b13&amp;#x27;), goal_id=UUID(&amp;#x27;c5974b02-89df-4e77-bb68-3e8b92bddcaf&amp;#x27;))\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4131e10&amp;gt;\n        goal_dict  = {&amp;#x27;auto_buy_threshold&amp;#x27;: None,\n &amp;#x27;constraints&amp;#x27;: {&amp;#x27;brands&amp;#x27;: [&amp;#x27;samsung&amp;#x27;, &amp;#x27;apple&amp;#x27;, &amp;#x27;sony&amp;#x27;],\n                 &amp;#x27;conditions&amp;#x27;: [&amp;#x27;new&amp;#x27;, &amp;#x27;like_new&amp;#x27;, &amp;#x27;good&amp;#x27;],\n                 &amp;#x27;keywords&amp;#x27;: [&amp;#x27;electronics&amp;#x27;, &amp;#x27;gadget&amp;#x27;, &amp;#x27;tech&amp;#x27;],\n                 &amp;#x27;max_price&amp;#x27;: 500.0,\n                 &amp;#x27;min_price&amp;#x27;: 100.0},\n &amp;#x27;created_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 777236, tzinfo=datetime.timezone.utc),\n &amp;#x27;deadline&amp;#x27;: None,\n &amp;#x27;description&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: UUID(&amp;#x27;c5974b02-89df-4e77-bb68-3e8b92bddcaf&amp;#x27;),\n &amp;#x27;item_category&amp;#x27;: &amp;lt;MarketCategory.ELECTRONICS: &amp;#x27;electronics&amp;#x27;&amp;gt;,\n &amp;#x27;last_checked_at&amp;#x27;: None,\n &amp;#x27;max_matches&amp;#x27;: None,\n &amp;#x27;max_tokens&amp;#x27;: None,\n &amp;#x27;metadata&amp;#x27;: {},\n &amp;#x27;priority&amp;#x27;: 2,\n &amp;#x27;status&amp;#x27;: &amp;lt;GoalStatus.ACTIVE: &amp;#x27;active&amp;#x27;&amp;gt;,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Goal for item&amp;#x27;,\n &amp;#x27;updated_at&amp;#x27;: datetime.datetime(2025, 3, 4, 18, 48, 58, 777236, tzinfo=datetime.timezone.utc),\n &amp;#x27;user_id&amp;#x27;: UUID(&amp;#x27;260d3df3-6216-4422-9c22-d8db97c99b13&amp;#x27;)}\n        priority_map = {&amp;#x27;critical&amp;#x27;: 5, &amp;#x27;high&amp;#x27;: 3, &amp;#x27;low&amp;#x27;: 1, &amp;#x27;medium&amp;#x27;: 2, &amp;#x27;urgent&amp;#x27;: 4}\n        self       = &amp;lt;core.services.goal.GoalService object at 0x000002979982B390&amp;gt;\n\nThe above exception was the direct cause of the following exception:\ncore\\services\\goal.py:482: in delete_goal\n    goal = await self.get_goal(goal_id)\n        goal_id    = UUID(&amp;#x27;c5974b02-89df-4e77-bb68-3e8b92bddcaf&amp;#x27;)\n        self       = &amp;lt;core.services.goal.GoalService object at 0x000002979982B390&amp;gt;\n        user_id    = None\ncore\\services\\goal.py:419: in get_goal\n    raise GoalNotFoundError(f&amp;quot;Failed to get goal: {str(e)}&amp;quot;) from e\nE   core.exceptions.goal_exceptions.GoalNotFoundError: Goal not found\n        cached_goal = None\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4131e10&amp;gt;\n        goal_for_user = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4131e10&amp;gt;\n        goal_id    = UUID(&amp;#x27;c5974b02-89df-4e77-bb68-3e8b92bddcaf&amp;#x27;)\n        query      = &amp;lt;sqlalchemy.sql.selectable.Select object at 0x00000297993FEE50&amp;gt;\n        result     = &amp;lt;sqlalchemy.engine.result.ChunkedIteratorResult object at 0x00000297993FF610&amp;gt;\n        self       = &amp;lt;core.services.goal.GoalService object at 0x000002979982B390&amp;gt;\n        user_id    = UUID(&amp;#x27;260d3df3-6216-4422-9c22-d8db97c99b13&amp;#x27;)\n\nThe above exception was the direct cause of the following exception:\nbackend_tests\\services\\test_goal_service.py:139: in test_delete_goal\n    await goal_service.delete_goal(goal.id)\n        db_session = &amp;lt;sqlalchemy.orm.session.AsyncSession object at 0x000002979982B250&amp;gt;\n        goal       = &amp;lt;[MissingGreenlet(&amp;quot;greenlet_spawn has not been called; can&amp;#x27;t call await_only() here. Was IO attempted in an unexpected place?&amp;quot;) raised in repr()] Goal object at 0x297c4131e10&amp;gt;\n        goal_service = &amp;lt;core.services.goal.GoalService object at 0x000002979982B390&amp;gt;\ncore\\services\\goal.py:509: in delete_goal\n    raise GoalNotFoundError(f&amp;quot;Failed to delete goal: {str(e)}&amp;quot;) from e\nE   core.exceptions.goal_exceptions.GoalNotFoundError: Goal not found\n        goal_id    = UUID(&amp;#x27;c5974b02-89df-4e77-bb68-3e8b92bddcaf&amp;#x27;)\n        self       = &amp;lt;core.services.goal.GoalService object at 0x000002979982B390&amp;gt;\n        user_id    = None\n\n----------------------------- Captured stderr call -----------------------------\nWARNING:core.services.goal:Failed to cache goal c5974b02-89df-4e77-bb68-3e8b92bddcaf: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nERROR:core.services.goal:Failed to get goal c5974b02-89df-4e77-bb68-3e8b92bddcaf: API service unavailable\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\nERROR:core.services.goal:Failed to delete goal c5974b02-89df-4e77-bb68-3e8b92bddcaf: Goal not found\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 482, in delete_goal\n    goal = await self.get_goal(goal_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 419, in get_goal\n    raise GoalNotFoundError(f&amp;quot;Failed to get goal: {str(e)}&amp;quot;) from e\ncore.exceptions.goal_exceptions.GoalNotFoundError: Goal not found\n\n------------------------------ Captured log call -------------------------------\nWARNING  core.services.goal:goal.py:603 Failed to cache goal c5974b02-89df-4e77-bb68-3e8b92bddcaf: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\nERROR    core.services.goal:goal.py:414 Failed to get goal c5974b02-89df-4e77-bb68-3e8b92bddcaf: API service unavailable\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\nERROR    core.services.goal:goal.py:504 Failed to delete goal c5974b02-89df-4e77-bb68-3e8b92bddcaf: Goal not found\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 597, in _cache_goal\n    await self._redis.set(\n          ^^^^^^^^^^^^^^^^\nTypeError: RedisService.set() got an unexpected keyword argument &amp;#x27;expire&amp;#x27;\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 406, in get_goal\n    await self._cache_goal(goal)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 604, in _cache_goal\n    raise APIServiceUnavailableError(&amp;quot;Failed to cache goal&amp;quot;) from e\ncore.exceptions.api_exceptions.APIServiceUnavailableError: API service unavailable\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 482, in delete_goal\n    goal = await self.get_goal(goal_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\goal.py&amp;quot;, line 419, in get_goal\n    raise GoalNotFoundError(f&amp;quot;Failed to get goal: {str(e)}&amp;quot;) from e\ncore.exceptions.goal_exceptions.GoalNotFoundError: Goal not found\n\n--------------------------- Captured stderr teardown ---------------------------\nsys:1: SAWarning: transaction already deassociated from connection\n&#34;}], &#34;backend_tests/services/test_goal_service.py::test_validate_goal&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_goal_service.py::test_validate_goal&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_goal_service.py::test_validate_goal&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_goal_service.py::test_goal_constraints_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_goal_service.py::test_goal_constraints_validation&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_goal_service.py::test_goal_constraints_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nERROR:core.services.goal:Constraints validation failed: Missing required constraint fields: keywords\nERROR:core.services.goal:Constraints validation failed: Missing required constraint fields: min_price, max_price\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.goal:goal.py:992 Constraints validation failed: Missing required constraint fields: keywords\nERROR    core.services.goal:goal.py:992 Constraints validation failed: Missing required constraint fields: min_price, max_price\n\n&#34;}], &#34;backend_tests/services/test_llm_service.py::test_llm_service_initialization&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_llm_service.py::test_llm_service_initialization&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_llm_service.py::test_llm_service_initialization&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.llm_service:Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nINFO:core.services.llm_service:Initialized LLM service with provider: gpt-4, model: gpt-4\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: gpt-4, model: gpt-4\n\n&#34;}], &#34;backend_tests/services/test_llm_service.py::test_get_llm_service&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_llm_service.py::test_get_llm_service&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_llm_service.py::test_get_llm_service&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.llm_service:Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nINFO:core.services.llm_service:Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nINFO:core.services.llm_service:Initialized LLM service with provider: gpt-4, model: gpt-4\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: gpt-4, model: gpt-4\n\n&#34;}], &#34;backend_tests/services/test_llm_service.py::test_llm_service_generate_text&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_llm_service.py::test_llm_service_generate_text&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_llm_service.py::test_llm_service_generate_text&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.llm_service:Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nINFO:core.services.llm_service:Initialized LLM service with provider: gpt-4, model: gpt-4\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: gpt-4, model: gpt-4\n\n&#34;}], &#34;backend_tests/services/test_llm_service.py::test_llm_service_fallback&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_llm_service.py::test_llm_service_fallback&#34;, &#34;duration&#34;: &#34;9 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_llm_service.py::test_llm_service_fallback&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;9 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.llm_service:Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nERROR:core.services.llm_service:Error generating response: DeepSeek API error\nWARNING:core.services.llm_service:Primary provider failed, falling back to gpt-4\nINFO:core.services.llm_service:Initialized LLM service with provider: gpt-4, model: gpt-4\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nERROR    core.services.llm_service:llm_service.py:183 Error generating response: DeepSeek API error\nWARNING  core.services.llm_service:llm_service.py:215 Primary provider failed, falling back to gpt-4\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: gpt-4, model: gpt-4\n\n&#34;}], &#34;backend_tests/services/test_llm_service.py::test_llm_service_error_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_llm_service.py::test_llm_service_error_handling&#34;, &#34;duration&#34;: &#34;12 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_llm_service.py::test_llm_service_error_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;12 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.llm_service:Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nERROR:core.services.llm_service:Error generating response: Rate limit exceeded\nINFO:core.services.llm_service:Initialized LLM service with provider: gpt-4, model: gpt-4\nERROR:core.services.llm_service:Error generating response: Network error\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: deepseek-r1, model: deepseek-r1\nERROR    core.services.llm_service:llm_service.py:183 Error generating response: Rate limit exceeded\nINFO     core.services.llm_service:llm_service.py:138 Initialized LLM service with provider: gpt-4, model: gpt-4\nERROR    core.services.llm_service:llm_service.py:183 Error generating response: Network error\n\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_search_products&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_search_products&#34;, &#34;duration&#34;: &#34;12 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_search_products&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;12 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\market_search.py:195: in search_products\n    cached_result = await get_redis_service().get(cache_key)\nE   AttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n        cache_key  = &amp;#x27;search:test product:markets:a,a,m,n,o,z:category:None:price:None-None:limit:10&amp;#x27;\n        cache_ttl  = 300\n        category   = None\n        limit      = 10\n        market_types = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        max_price  = None\n        min_price  = None\n        query      = &amp;#x27;test product&amp;#x27;\n        self       = &amp;lt;core.services.market_search.MarketSearchService object at 0x00000297993B89D0&amp;gt;\n        start_time = datetime.datetime(2025, 3, 4, 18, 48, 59, 146011)\n        use_cache  = True\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_market_search_service.py:133: in test_search_products\n    results = await market_search_service.search_products(query, market_type)\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x00000297993B89D0&amp;gt;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        mock_integration_factory = &amp;lt;MagicMock id=&amp;#x27;2850137935504&amp;#x27;&amp;gt;\n        mock_market_repository = &amp;lt;AsyncMock id=&amp;#x27;2850056660496&amp;#x27;&amp;gt;\n        query      = &amp;#x27;test product&amp;#x27;\ncore\\services\\market_search.py:307: in search_products\n    raise MarketError(f&amp;quot;Failed to search products: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to search products: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n        cache_key  = &amp;#x27;search:test product:markets:a,a,m,n,o,z:category:None:price:None-None:limit:10&amp;#x27;\n        cache_ttl  = 300\n        category   = None\n        limit      = 10\n        market_types = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        max_price  = None\n        min_price  = None\n        query      = &amp;#x27;test product&amp;#x27;\n        self       = &amp;lt;core.services.market_search.MarketSearchService object at 0x00000297993B89D0&amp;gt;\n        start_time = datetime.datetime(2025, 3, 4, 18, 48, 59, 146011)\n        use_cache  = True\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:59,146 - core.services.market_search - ERROR - Error in product search: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 195, in search_products\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.market_search:Error in product search: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 195, in search_products\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.market_search:market_search.py:306 Error in product search: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 195, in search_products\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_search_products_with_filters&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_search_products_with_filters&#34;, &#34;duration&#34;: &#34;10 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_search_products_with_filters&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;10 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_market_search_service.py:164: in test_search_products_with_filters\n    results = await market_search_service.search_products(\nE   TypeError: MarketSearchService.search_products() got an unexpected keyword argument &amp;#x27;filters&amp;#x27;\n        filters    = {&amp;#x27;category&amp;#x27;: &amp;#x27;Electronics&amp;#x27;, &amp;#x27;max_price&amp;#x27;: 200, &amp;#x27;min_price&amp;#x27;: 50}\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x0000029796275250&amp;gt;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        mock_integration = &amp;lt;AsyncMock name=&amp;#x27;mock.get_integration()&amp;#x27; id=&amp;#x27;2850085930768&amp;#x27;&amp;gt;\n        mock_integration_factory = &amp;lt;MagicMock id=&amp;#x27;2850085944976&amp;#x27;&amp;gt;\n        query      = &amp;#x27;test product&amp;#x27;\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_search_products_with_invalid_market&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_search_products_with_invalid_market&#34;, &#34;duration&#34;: &#34;14 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_search_products_with_invalid_market&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;14 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\market_search.py:195: in search_products\n    cached_result = await get_redis_service().get(cache_key)\nE   AttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n        cache_key  = &amp;#x27;search:test:markets:a,a,m,n,o,z:category:None:price:None-None:limit:10&amp;#x27;\n        cache_ttl  = 300\n        category   = None\n        limit      = 10\n        market_types = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        max_price  = None\n        min_price  = None\n        query      = &amp;#x27;test&amp;#x27;\n        self       = &amp;lt;core.services.market_search.MarketSearchService object at 0x0000029794E04E50&amp;gt;\n        start_time = datetime.datetime(2025, 3, 4, 18, 48, 59, 205167)\n        use_cache  = True\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_market_search_service.py:189: in test_search_products_with_invalid_market\n    await market_search_service.search_products(&amp;quot;test&amp;quot;, MarketType.AMAZON)\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x0000029794E04E50&amp;gt;\n        mock_market_repository = &amp;lt;AsyncMock id=&amp;#x27;2850082481808&amp;#x27;&amp;gt;\ncore\\services\\market_search.py:307: in search_products\n    raise MarketError(f&amp;quot;Failed to search products: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to search products: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n        cache_key  = &amp;#x27;search:test:markets:a,a,m,n,o,z:category:None:price:None-None:limit:10&amp;#x27;\n        cache_ttl  = 300\n        category   = None\n        limit      = 10\n        market_types = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        max_price  = None\n        min_price  = None\n        query      = &amp;#x27;test&amp;#x27;\n        self       = &amp;lt;core.services.market_search.MarketSearchService object at 0x0000029794E04E50&amp;gt;\n        start_time = datetime.datetime(2025, 3, 4, 18, 48, 59, 205167)\n        use_cache  = True\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_market_search_service.py:188: in test_search_products_with_invalid_market\n    with pytest.raises(MarketError, match=&amp;quot;Market not found&amp;quot;):\nE   AssertionError: Regex pattern did not match.\nE    Regex: &amp;#x27;Market not found&amp;#x27;\nE    Input: &amp;quot;Failed to search products: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;&amp;quot;\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x0000029794E04E50&amp;gt;\n        mock_market_repository = &amp;lt;AsyncMock id=&amp;#x27;2850082481808&amp;#x27;&amp;gt;\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:59,205 - core.services.market_search - ERROR - Error in product search: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 195, in search_products\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.market_search:Error in product search: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 195, in search_products\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.market_search:market_search.py:306 Error in product search: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 195, in search_products\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_get_product_details&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_get_product_details&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_get_product_details&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\market_search.py:337: in get_product_details\n    cached_result = await get_redis_service().get(cache_key)\nE   AttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n        cache_key  = &amp;#x27;product_details:MarketType.AMAZON:PROD123&amp;#x27;\n        cache_ttl  = 3600\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n        self       = &amp;lt;core.services.market_search.MarketSearchService object at 0x000002979955D550&amp;gt;\n        use_cache  = True\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_market_search_service.py:210: in test_get_product_details\n    result = await market_search_service.get_product_details(product_id, market_type)\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x000002979955D550&amp;gt;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        mock_integration_factory = &amp;lt;MagicMock id=&amp;#x27;2850853641104&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\ncore\\services\\market_search.py:387: in get_product_details\n    raise MarketError(f&amp;quot;Failed to get product details: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to get product details: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n        cache_key  = &amp;#x27;product_details:MarketType.AMAZON:PROD123&amp;#x27;\n        cache_ttl  = 3600\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n        self       = &amp;lt;core.services.market_search.MarketSearchService object at 0x000002979955D550&amp;gt;\n        use_cache  = True\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:59,243 - core.services.market_search - ERROR - Error in get_product_details: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 337, in get_product_details\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.market_search:Error in get_product_details: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 337, in get_product_details\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.market_search:market_search.py:386 Error in get_product_details: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 337, in get_product_details\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_get_product_details_from_cache&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_get_product_details_from_cache&#34;, &#34;duration&#34;: &#34;10 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_get_product_details_from_cache&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;10 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\market_search.py:337: in get_product_details\n    cached_result = await get_redis_service().get(cache_key)\nE   AttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n        cache_key  = &amp;#x27;product_details:MarketType.AMAZON:PROD123&amp;#x27;\n        cache_ttl  = 3600\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n        self       = &amp;lt;core.services.market_search.MarketSearchService object at 0x000002979953CD50&amp;gt;\n        use_cache  = True\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_market_search_service.py:240: in test_get_product_details_from_cache\n    result = await market_search_service.get_product_details(\n        cached_data = {&amp;#x27;cached_at&amp;#x27;: &amp;#x27;2025-03-04T18:48:59.277027&amp;#x27;,\n &amp;#x27;id&amp;#x27;: &amp;#x27;PROD123&amp;#x27;,\n &amp;#x27;price&amp;#x27;: 99.99,\n &amp;#x27;title&amp;#x27;: &amp;#x27;Cached Product&amp;#x27;}\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x000002979953CD50&amp;gt;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        mock_integration_factory = &amp;lt;MagicMock id=&amp;#x27;2850084901968&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\ncore\\services\\market_search.py:387: in get_product_details\n    raise MarketError(f&amp;quot;Failed to get product details: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to get product details: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n        cache_key  = &amp;#x27;product_details:MarketType.AMAZON:PROD123&amp;#x27;\n        cache_ttl  = 3600\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n        self       = &amp;lt;core.services.market_search.MarketSearchService object at 0x000002979953CD50&amp;gt;\n        use_cache  = True\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:59,277 - core.services.market_search - ERROR - Error in get_product_details: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 337, in get_product_details\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.market_search:Error in get_product_details: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 337, in get_product_details\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.market_search:market_search.py:386 Error in get_product_details: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\market_search.py&amp;quot;, line 337, in get_product_details\n    cached_result = await get_redis_service().get(cache_key)\n                          ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;get&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_get_price_history&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_get_price_history&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_get_price_history&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_market_search_service.py:263: in test_get_price_history\n    history = await market_search_service.get_price_history(\nE   AttributeError: &amp;#x27;MarketSearchService&amp;#x27; object has no attribute &amp;#x27;get_price_history&amp;#x27;\n        days       = 30\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x000002979959F190&amp;gt;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        mock_integration_factory = &amp;lt;MagicMock id=&amp;#x27;2850135721808&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_check_product_availability&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_check_product_availability&#34;, &#34;duration&#34;: &#34;10 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_check_product_availability&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;10 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_market_search_service.py:293: in test_check_product_availability\n    is_available = await market_search_service.check_availability(\nE   AttributeError: &amp;#x27;MarketSearchService&amp;#x27; object has no attribute &amp;#x27;check_availability&amp;#x27;\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x00000297C42121D0&amp;gt;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        mock_integration = &amp;lt;AsyncMock name=&amp;#x27;mock.get_integration()&amp;#x27; id=&amp;#x27;2850854221136&amp;#x27;&amp;gt;\n        mock_integration_factory = &amp;lt;MagicMock id=&amp;#x27;2850062023696&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_track_price&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_track_price&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_track_price&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_market_search_service.py:317: in test_track_price\n    track_id = await market_search_service.track_price(\nE   AttributeError: &amp;#x27;MarketSearchService&amp;#x27; object has no attribute &amp;#x27;track_price&amp;#x27;\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x0000029799597CD0&amp;gt;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        mock_market_repository = &amp;lt;AsyncMock id=&amp;#x27;2850854327632&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n        target_price = Decimal(&amp;#x27;90.00&amp;#x27;)\n        user_id    = UUID(&amp;#x27;48a0438f-2757-429b-b459-7108bea72af5&amp;#x27;)\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_get_current_price_from_url&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_get_current_price_from_url&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_get_current_price_from_url&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\market_search.py:99: in get_current_price\n    market_repository = MarketRepository()\nE   TypeError: MarketRepository.__init__() missing 1 required positional argument: &amp;#x27;db&amp;#x27;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n        url        = &amp;#x27;https://amazon.com/dp/PROD123&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_market_search_service.py:352: in test_get_current_price_from_url\n    price = await get_current_price(url)\n        get_current_price = &amp;lt;function get_current_price at 0x00000297CD3DDEE0&amp;gt;\n        mock_get_details = &amp;lt;AsyncMock name=&amp;#x27;get_product_details&amp;#x27; id=&amp;#x27;2850136045840&amp;#x27;&amp;gt;\n        mock_market_repository = &amp;lt;AsyncMock id=&amp;#x27;2850854177872&amp;#x27;&amp;gt;\n        url        = &amp;#x27;https://amazon.com/dp/PROD123&amp;#x27;\ncore\\services\\market_search.py:117: in get_current_price\n    raise MarketError(f&amp;quot;Failed to get current price: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to get current price: MarketRepository.__init__() missing 1 required positional argument: &amp;#x27;db&amp;#x27;\n        market_type = &amp;lt;MarketType.AMAZON: &amp;#x27;amazon&amp;#x27;&amp;gt;\n        product_id = &amp;#x27;PROD123&amp;#x27;\n        url        = &amp;#x27;https://amazon.com/dp/PROD123&amp;#x27;\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:59,367 - core.services.market_search - ERROR - Error getting current price for https://amazon.com/dp/PROD123: MarketRepository.__init__() missing 1 required positional argument: &amp;#x27;db&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.market_search:Error getting current price for https://amazon.com/dp/PROD123: MarketRepository.__init__() missing 1 required positional argument: &amp;#x27;db&amp;#x27;\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.market_search:market_search.py:116 Error getting current price for https://amazon.com/dp/PROD123: MarketRepository.__init__() missing 1 required positional argument: &amp;#x27;db&amp;#x27;\n\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_get_current_price_invalid_url&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_get_current_price_invalid_url&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_get_current_price_invalid_url&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;core\\services\\market_search.py:96: in get_current_price\n    raise ValidationError(&amp;quot;Invalid product URL&amp;quot;)\nE   core.exceptions.base_exceptions.ValidationError: Invalid product URL\n        market_type = None\n        product_id = None\n        url        = &amp;#x27;https://invalid-url.com/product&amp;#x27;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_market_search_service.py:367: in test_get_current_price_invalid_url\n    await get_current_price(url)\n        get_current_price = &amp;lt;function get_current_price at 0x00000297CD3DDEE0&amp;gt;\n        url        = &amp;#x27;https://invalid-url.com/product&amp;#x27;\ncore\\services\\market_search.py:117: in get_current_price\n    raise MarketError(f&amp;quot;Failed to get current price: {str(e)}&amp;quot;)\nE   core.exceptions.market_exceptions.MarketError: Failed to get current price: Invalid product URL\n        market_type = None\n        product_id = None\n        url        = &amp;#x27;https://invalid-url.com/product&amp;#x27;\n\n----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:48:59,401 - core.services.market_search - ERROR - Error getting current price for https://invalid-url.com/product: Invalid product URL\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.market_search:Error getting current price for https://invalid-url.com/product: Invalid product URL\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.market_search:market_search.py:116 Error getting current price for https://invalid-url.com/product: Invalid product URL\n\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_extract_market_type&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_extract_market_type&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_extract_market_type&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nbackend_tests\\services\\test_market_search_service.py:369: PytestWarning: The test &amp;lt;Function test_extract_market_type&amp;gt; is marked with &amp;#x27;@pytest.mark.asyncio&amp;#x27; but it is not an async function. Please remove asyncio marker. If the test is not marked explicitly, check for global markers applied via &amp;#x27;pytestmark&amp;#x27;.\n  @service_test\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_extract_product_id&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_extract_product_id&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_extract_product_id&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nbackend_tests\\services\\test_market_search_service.py:379: PytestWarning: The test &amp;lt;Function test_extract_product_id&amp;gt; is marked with &amp;#x27;@pytest.mark.asyncio&amp;#x27; but it is not an async function. Please remove asyncio marker. If the test is not marked explicitly, check for global markers applied via &amp;#x27;pytestmark&amp;#x27;.\n  @service_test\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_search_products_across_markets&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_search_products_across_markets&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_search_products_across_markets&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_market_search_service.py:404: in test_search_products_across_markets\n    results = await market_search_service.search_products_across_markets(query)\nE   AttributeError: &amp;#x27;MarketSearchService&amp;#x27; object has no attribute &amp;#x27;search_products_across_markets&amp;#x27;\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x00000297995B0D10&amp;gt;\n        mock_integration_factory = &amp;lt;MagicMock id=&amp;#x27;2850853916752&amp;#x27;&amp;gt;\n        mock_market_integration = &amp;lt;AsyncMock name=&amp;#x27;mock.get_integration()&amp;#x27; id=&amp;#x27;2850854371472&amp;#x27;&amp;gt;\n        query      = &amp;#x27;test product&amp;#x27;\n&#34;}], &#34;backend_tests/services/test_market_search_service.py::test_compare_prices&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_search_service.py::test_compare_prices&#34;, &#34;duration&#34;: &#34;9 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_search_service.py::test_compare_prices&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;9 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_market_search_service.py:446: in test_compare_prices\n    comparison = await market_search_service.compare_prices(product_name)\nE   AttributeError: &amp;#x27;MarketSearchService&amp;#x27; object has no attribute &amp;#x27;compare_prices&amp;#x27;\n        market_search_service = &amp;lt;core.services.market_search.MarketSearchService object at 0x00000297995B0310&amp;gt;\n        mock_integration_factory = &amp;lt;MagicMock id=&amp;#x27;2850134422736&amp;#x27;&amp;gt;\n        product_name = &amp;#x27;Test Product&amp;#x27;\n&#34;}], &#34;backend_tests/services/test_market_service.py::test_create_market&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_service.py::test_create_market&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_service.py::test_create_market&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_market_service.py::test_get_market&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_service.py::test_get_market&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_service.py::test_get_market&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_market_service.py::test_update_market&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_service.py::test_update_market&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_service.py::test_update_market&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_market_service.py::test_list_markets&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_service.py::test_list_markets&#34;, &#34;duration&#34;: &#34;13 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_service.py::test_list_markets&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;13 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_market_service.py::test_validate_market_config&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_market_service.py::test_validate_market_config&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_market_service.py::test_validate_market_config&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_create_notification&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_create_notification&#34;, &#34;duration&#34;: &#34;13 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_create_notification&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;13 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py:918: in assert_called_once\n    raise AssertionError(msg)\nE   AssertionError: Expected &amp;#x27;mock&amp;#x27; to have been called once. Called 0 times.\n        msg        = &amp;quot;Expected &amp;#x27;mock&amp;#x27; to have been called once. Called 0 times.&amp;quot;\n        self       = &amp;lt;AsyncMock id=&amp;#x27;2850136040784&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_notification_service.py:160: in test_create_notification\n    notification_service._cache_notification.assert_called_once()\nE   AssertionError: Expected &amp;#x27;mock&amp;#x27; to have been called once. Called 0 times.\n        channels   = [&amp;lt;NotificationChannel.IN_APP: &amp;#x27;in_app&amp;#x27;&amp;gt;]\n        message    = &amp;#x27;This is a test notification&amp;#x27;\n        metadata   = {&amp;#x27;test&amp;#x27;: True}\n        mock_db_session = &amp;lt;AsyncMock id=&amp;#x27;2850136205392&amp;#x27;&amp;gt;\n        mock_notification = &amp;lt;MagicMock id=&amp;#x27;2850853917456&amp;#x27;&amp;gt;\n        mock_redis_client = &amp;lt;AsyncMock id=&amp;#x27;2850854177488&amp;#x27;&amp;gt;\n        notification_service = &amp;lt;core.services.notification.NotificationService object at 0x00000297997D3990&amp;gt;\n        notification_type = &amp;lt;NotificationType.SYSTEM: &amp;#x27;system&amp;#x27;&amp;gt;\n        result     = NotificationResponse(id=UUID(&amp;#x27;933808d8-bdbb-44b4-b673-ff88c7edc62c&amp;#x27;), user_id=UUID(&amp;#x27;4fad72d6-e346-422c-bde7-d3ffa60c7d70&amp;#x27;), goal_id=None, deal_id=None, title=&amp;#x27;Test Notification&amp;#x27;, message=&amp;#x27;This is a test notification&amp;#x27;, type=&amp;lt;NotificationType.SYSTEM: &amp;#x27;system&amp;#x27;&amp;gt;, channels=[&amp;lt;NotificationChannel.IN_APP: &amp;#x27;in_app&amp;#x27;&amp;gt;], priority=&amp;lt;NotificationPriority.MEDIUM: &amp;#x27;medium&amp;#x27;&amp;gt;, notification_metadata={&amp;#x27;test&amp;#x27;: True}, action_url=None, status=&amp;lt;NotificationStatus.PENDING: &amp;#x27;pending&amp;#x27;&amp;gt;, created_at=datetime.datetime(2025, 3, 4, 18, 48, 59, 525632), schedule_for=None, sent_at=None, delivered_at=None, read_at=None, error=None)\n        side_effect = &amp;lt;function test_create_notification.&amp;lt;locals&amp;gt;.side_effect at 0x00000297C42AACA0&amp;gt;\n        title      = &amp;#x27;Test Notification&amp;#x27;\n        user_id    = UUID(&amp;#x27;4fad72d6-e346-422c-bde7-d3ffa60c7d70&amp;#x27;)\n\n----------------------------- Captured stderr call -----------------------------\nC:\\Program Files\\Python311\\Lib\\unittest\\mock.py:2130: RuntimeWarning: coroutine &amp;#x27;get_redis_service&amp;#x27; was never awaited\n  setattr(_type, entry, MagicProxy(entry, self))\nRuntimeWarning: Enable tracemalloc to get the object allocation traceback\nC:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\notification.py:385: RuntimeWarning: coroutine &amp;#x27;AsyncMockMixin._execute_mock_call&amp;#x27; was never awaited\n  self.session.add(notification)\nRuntimeWarning: Enable tracemalloc to get the object allocation traceback\n&#34;}], &#34;backend_tests/services/test_notification_service.py::test_get_notifications&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_get_notifications&#34;, &#34;duration&#34;: &#34;9 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_get_notifications&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;9 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_notification_service.py:176: in test_get_notifications\n    mock_result.scalars().all.return_value = [sample_notification, sample_notification]\nE   AttributeError: &amp;#x27;coroutine&amp;#x27; object has no attribute &amp;#x27;all&amp;#x27;\n        limit      = 10\n        mock_db_session = &amp;lt;AsyncMock id=&amp;#x27;2850136366160&amp;#x27;&amp;gt;\n        mock_result = &amp;lt;AsyncMock id=&amp;#x27;2850997395088&amp;#x27;&amp;gt;\n        notification_service = &amp;lt;core.services.notification.NotificationService object at 0x0000029799728750&amp;gt;\n        offset     = 0\n        sample_notification = &amp;lt;Notification system: Test Notification&amp;gt;\n        user_id    = UUID(&amp;#x27;43f82865-098a-45b2-b41a-8368c2067300&amp;#x27;)\n&#34;}], &#34;backend_tests/services/test_notification_service.py::test_get_unread_count&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_get_unread_count&#34;, &#34;duration&#34;: &#34;9 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_get_unread_count&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;9 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_notification_service.py:210: in test_get_unread_count\n    assert count == expected_count\nE   assert &amp;lt;coroutine object AsyncMockMixin._execute_mock_call at 0x00000297C42A0440&amp;gt; == 5\n        count      = &amp;lt;coroutine object AsyncMockMixin._execute_mock_call at 0x00000297C42A0440&amp;gt;\n        expected_count = 5\n        mock_db_session = &amp;lt;AsyncMock id=&amp;#x27;2850136342160&amp;#x27;&amp;gt;\n        mock_result = &amp;lt;AsyncMock name=&amp;#x27;mock.execute()&amp;#x27; id=&amp;#x27;2850138499856&amp;#x27;&amp;gt;\n        notification_service = &amp;lt;core.services.notification.NotificationService object at 0x00000297997E2AD0&amp;gt;\n        user_id    = UUID(&amp;#x27;a0922802-d283-4c01-8d17-a3e1b9104bc7&amp;#x27;)\n&#34;}], &#34;backend_tests/services/test_notification_service.py::test_mark_as_read&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_mark_as_read&#34;, &#34;duration&#34;: &#34;13 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_mark_as_read&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;13 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_mark_as_read_not_found&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_mark_as_read_not_found&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_mark_as_read_not_found&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_notification_service.py:248: in test_mark_as_read_not_found\n    with pytest.raises(NotificationNotFoundError):\nE   Failed: DID NOT RAISE &amp;lt;class &amp;#x27;core.exceptions.notification_exceptions.NotificationNotFoundError&amp;#x27;&amp;gt;\n        mock_db_session = &amp;lt;AsyncMock id=&amp;#x27;2850854207696&amp;#x27;&amp;gt;\n        notification_ids = [UUID(&amp;#x27;ae86e68a-5b50-45bb-b4ba-a681f4c11f9b&amp;#x27;)]\n        notification_service = &amp;lt;core.services.notification.NotificationService object at 0x000002979971D290&amp;gt;\n        user_id    = UUID(&amp;#x27;e6df76c2-bd43-46e0-8516-8e7d6f3596bf&amp;#x27;)\n&#34;}], &#34;backend_tests/services/test_notification_service.py::test_delete_notifications&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_delete_notifications&#34;, &#34;duration&#34;: &#34;13 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_delete_notifications&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;13 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_delete_notifications_not_found&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_delete_notifications_not_found&#34;, &#34;duration&#34;: &#34;9 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_delete_notifications_not_found&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;9 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_notification_service.py:287: in test_delete_notifications_not_found\n    with pytest.raises(NotificationNotFoundError):\nE   Failed: DID NOT RAISE &amp;lt;class &amp;#x27;core.exceptions.notification_exceptions.NotificationNotFoundError&amp;#x27;&amp;gt;\n        mock_db_session = &amp;lt;AsyncMock id=&amp;#x27;2850137759504&amp;#x27;&amp;gt;\n        notification_ids = [UUID(&amp;#x27;79758ad4-45bb-46ab-b71f-b4dc0c7037ea&amp;#x27;)]\n        notification_service = &amp;lt;core.services.notification.NotificationService object at 0x0000029796765990&amp;gt;\n        user_id    = UUID(&amp;#x27;00b11eb8-423a-4ea7-9d5a-1d484f149d9f&amp;#x27;)\n&#34;}], &#34;backend_tests/services/test_notification_service.py::test_clear_all_notifications&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_clear_all_notifications&#34;, &#34;duration&#34;: &#34;10 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_clear_all_notifications&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;10 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_get_user_preferences&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_get_user_preferences&#34;, &#34;duration&#34;: &#34;9 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_get_user_preferences&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;9 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_update_preferences&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_update_preferences&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_update_preferences&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_notification_service.py:350: in test_update_preferences\n    assert NotificationChannel.PUSH.value in result.enabled_channels\nE   AssertionError: assert &amp;#x27;push&amp;#x27; in [&amp;lt;NotificationChannel.IN_APP: &amp;#x27;in_app&amp;#x27;&amp;gt;, &amp;lt;NotificationChannel.EMAIL: &amp;#x27;email&amp;#x27;&amp;gt;]\nE    +  where &amp;#x27;push&amp;#x27; = &amp;lt;NotificationChannel.PUSH: &amp;#x27;push&amp;#x27;&amp;gt;.value\nE    +    where &amp;lt;NotificationChannel.PUSH: &amp;#x27;push&amp;#x27;&amp;gt; = NotificationChannel.PUSH\nE    +  and   [&amp;lt;NotificationChannel.IN_APP: &amp;#x27;in_app&amp;#x27;&amp;gt;, &amp;lt;NotificationChannel.EMAIL: &amp;#x27;email&amp;#x27;&amp;gt;] = UserPreferencesResponse(id=UUID(&amp;#x27;e2cec3f7-293e-49b6-8773-0f14b4c6667b&amp;#x27;), user_id=UUID(&amp;#x27;5e95737f-8b84-4780-85f9-395da65df611&amp;#x27;), theme=&amp;lt;Theme.SYSTEM: &amp;#x27;system&amp;#x27;&amp;gt;, language=&amp;lt;Language.EN: &amp;#x27;en&amp;#x27;&amp;gt;, timezone=&amp;#x27;UTC&amp;#x27;, enabled_channels=[&amp;lt;NotificationChannel.IN_APP: &amp;#x27;in_app&amp;#x27;&amp;gt;, &amp;lt;NotificationChannel.EMAIL: &amp;#x27;email&amp;#x27;&amp;gt;], notification_frequency={&amp;#x27;system&amp;#x27;: {&amp;#x27;type&amp;#x27;: &amp;#x27;system&amp;#x27;, &amp;#x27;frequency&amp;#x27;: &amp;#x27;immediate&amp;#x27;}, &amp;#x27;deal&amp;#x27;: {&amp;#x27;type&amp;#x27;: &amp;#x27;deal&amp;#x27;, &amp;#x27;frequency&amp;#x27;: &amp;#x27;daily&amp;#x27;}}, time_windows={&amp;lt;NotificationChannel.IN_APP: &amp;#x27;in_app&amp;#x27;&amp;gt;: NotificationTimeWindow(start_time=datetime.time(8, 0), end_time=datetime.time(20, 0), timezone=&amp;#x27;UTC&amp;#x27;), &amp;lt;NotificationChannel.EMAIL: &amp;#x27;email&amp;#x27;&amp;gt;: NotificationTimeWindow(start_time=datetime.time(9, 0), end_time=datetime.time(18, 0), timezone=&amp;#x27;UTC&amp;#x27;)}, muted_until=None, do_not_disturb=False, email_digest=True, push_enabled=False, sms_enabled=False, telegram_enabled=False, discord_enabled=False, minimum_priority=&amp;#x27;low&amp;#x27;, deal_alert_settings={}, price_alert_settings={}, email_preferences={}, created_at=datetime.datetime(2025, 3, 5, 2, 48, 59, 701424), updated_at=datetime.datetime(2025, 3, 5, 2, 48, 59, 701424)).enabled_channels\n        mock_db_session = &amp;lt;AsyncMock id=&amp;#x27;2850137761872&amp;#x27;&amp;gt;\n        mock_result = &amp;lt;AsyncMock name=&amp;#x27;mock.execute()&amp;#x27; id=&amp;#x27;2850087689104&amp;#x27;&amp;gt;\n        notification_service = &amp;lt;core.services.notification.NotificationService object at 0x0000029799806650&amp;gt;\n        preferences_data = {&amp;#x27;do_not_disturb&amp;#x27;: True,\n &amp;#x27;enabled_channels&amp;#x27;: [&amp;#x27;in_app&amp;#x27;, &amp;#x27;push&amp;#x27;],\n &amp;#x27;minimum_priority&amp;#x27;: &amp;#x27;high&amp;#x27;}\n        result     = UserPreferencesResponse(id=UUID(&amp;#x27;e2cec3f7-293e-49b6-8773-0f14b4c6667b&amp;#x27;), user_id=UUID(&amp;#x27;5e95737f-8b84-4780-85f9-395da65df611&amp;#x27;), theme=&amp;lt;Theme.SYSTEM: &amp;#x27;system&amp;#x27;&amp;gt;, language=&amp;lt;Language.EN: &amp;#x27;en&amp;#x27;&amp;gt;, timezone=&amp;#x27;UTC&amp;#x27;, enabled_channels=[&amp;lt;NotificationChannel.IN_APP: &amp;#x27;in_app&amp;#x27;&amp;gt;, &amp;lt;NotificationChannel.EMAIL: &amp;#x27;email&amp;#x27;&amp;gt;], notification_frequency={&amp;#x27;system&amp;#x27;: {&amp;#x27;type&amp;#x27;: &amp;#x27;system&amp;#x27;, &amp;#x27;frequency&amp;#x27;: &amp;#x27;immediate&amp;#x27;}, &amp;#x27;deal&amp;#x27;: {&amp;#x27;type&amp;#x27;: &amp;#x27;deal&amp;#x27;, &amp;#x27;frequency&amp;#x27;: &amp;#x27;daily&amp;#x27;}}, time_windows={&amp;lt;NotificationChannel.IN_APP: &amp;#x27;in_app&amp;#x27;&amp;gt;: NotificationTimeWindow(start_time=datetime.time(8, 0), end_time=datetime.time(20, 0), timezone=&amp;#x27;UTC&amp;#x27;), &amp;lt;NotificationChannel.EMAIL: &amp;#x27;email&amp;#x27;&amp;gt;: NotificationTimeWindow(start_time=datetime.time(9, 0), end_time=datetime.time(18, 0), timezone=&amp;#x27;UTC&amp;#x27;)}, muted_until=None, do_not_disturb=False, email_digest=True, push_enabled=False, sms_enabled=False, telegram_enabled=False, discord_enabled=False, minimum_priority=&amp;#x27;low&amp;#x27;, deal_alert_settings={}, price_alert_settings={}, email_preferences={}, created_at=datetime.datetime(2025, 3, 5, 2, 48, 59, 701424), updated_at=datetime.datetime(2025, 3, 5, 2, 48, 59, 701424))\n        sample_user_preferences = &amp;lt;core.models.user_preferences.UserPreferences object at 0x00000297C4213790&amp;gt;\n        user_id    = UUID(&amp;#x27;01305297-1a40-4e47-b260-0439823cfe0a&amp;#x27;)\n&#34;}], &#34;backend_tests/services/test_notification_service.py::test_send_password_reset_email&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_send_password_reset_email&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_send_password_reset_email&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_send_magic_link_email&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_send_magic_link_email&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_send_magic_link_email&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_cache_notification&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_cache_notification&#34;, &#34;duration&#34;: &#34;10 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_cache_notification&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;10 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py:918: in assert_called_once\n    raise AssertionError(msg)\nE   AssertionError: Expected &amp;#x27;set&amp;#x27; to have been called once. Called 0 times.\n        msg        = &amp;quot;Expected &amp;#x27;set&amp;#x27; to have been called once. Called 0 times.&amp;quot;\n        self       = &amp;lt;AsyncMock name=&amp;#x27;mock.set&amp;#x27; id=&amp;#x27;2850087438544&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_notification_service.py:408: in test_cache_notification\n    mock_redis_client.set.assert_called_once()\nE   AssertionError: Expected &amp;#x27;set&amp;#x27; to have been called once. Called 0 times.\n        mock_redis_client = &amp;lt;AsyncMock id=&amp;#x27;2850087701840&amp;#x27;&amp;gt;\n        notification_service = &amp;lt;core.services.notification.NotificationService object at 0x00000297967EED10&amp;gt;\n        sample_notification = &amp;lt;Notification system: Test Notification&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nWARNING:core.services.notification:Failed to cache notification: Circular reference detected\n\n------------------------------ Captured log call -------------------------------\nWARNING  core.services.notification:notification.py:510 Failed to cache notification: Circular reference detected\n\n&#34;}], &#34;backend_tests/services/test_notification_service.py::test_set_background_tasks&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_set_background_tasks&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_set_background_tasks&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_convert_to_response&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_convert_to_response&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_convert_to_response&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_convert_notification_frequency&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_convert_notification_frequency&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_convert_notification_frequency&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_notification_service.py::test_convert_time_windows&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_notification_service.py::test_convert_time_windows&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_notification_service.py::test_convert_time_windows&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_service_initialization&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_service_initialization&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_service_initialization&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py:918: in assert_called_once\n    raise AssertionError(msg)\nE   AssertionError: Expected &amp;#x27;_get_pool&amp;#x27; to have been called once. Called 0 times.\n        msg        = &amp;quot;Expected &amp;#x27;_get_pool&amp;#x27; to have been called once. Called 0 times.&amp;quot;\n        self       = &amp;lt;AsyncMock name=&amp;#x27;_get_pool&amp;#x27; id=&amp;#x27;2850134422544&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_redis_service.py:59: in test_redis_service_initialization\n    mock_get_pool.assert_called_once()\nE   AssertionError: Expected &amp;#x27;_get_pool&amp;#x27; to have been called once. Called 0 times.\n        mock_get_pool = &amp;lt;AsyncMock name=&amp;#x27;_get_pool&amp;#x27; id=&amp;#x27;2850134422544&amp;#x27;&amp;gt;\n        mock_redis = &amp;lt;MagicMock name=&amp;#x27;Redis&amp;#x27; id=&amp;#x27;2850134310736&amp;#x27;&amp;gt;\n        service    = &amp;lt;core.services.redis.RedisService object at 0x0000029794EA5A50&amp;gt;\n&#34;}], &#34;backend_tests/services/test_redis_service.py::test_get_redis_service&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_get_redis_service&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_get_redis_service&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py:918: in assert_called_once\n    raise AssertionError(msg)\nE   AssertionError: Expected &amp;#x27;RedisService&amp;#x27; to have been called once. Called 0 times.\n        msg        = &amp;quot;Expected &amp;#x27;RedisService&amp;#x27; to have been called once. Called 0 times.&amp;quot;\n        self       = &amp;lt;MagicMock name=&amp;#x27;RedisService&amp;#x27; id=&amp;#x27;2850088194512&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_redis_service.py:76: in test_get_redis_service\n    mock_redis_service.assert_called_once()\nE   AssertionError: Expected &amp;#x27;RedisService&amp;#x27; to have been called once. Called 0 times.\n        mock_instance = &amp;lt;MagicMock name=&amp;#x27;RedisService()&amp;#x27; id=&amp;#x27;2850088195984&amp;#x27;&amp;gt;\n        mock_redis_service = &amp;lt;MagicMock name=&amp;#x27;RedisService&amp;#x27; id=&amp;#x27;2850088194512&amp;#x27;&amp;gt;\n        service1   = &amp;lt;core.services.redis.RedisService object at 0x0000029794EA5A50&amp;gt;\n        service2   = &amp;lt;core.services.redis.RedisService object at 0x0000029794EA5A50&amp;gt;\n&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_set_get&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_set_get&#34;, &#34;duration&#34;: &#34;13 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_set_get&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;13 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_delete&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_delete&#34;, &#34;duration&#34;: &#34;15 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_delete&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;15 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_exists&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_exists&#34;, &#34;duration&#34;: &#34;13 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_exists&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;13 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_expire&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_expire&#34;, &#34;duration&#34;: &#34;14 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_expire&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;14 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_setex&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_setex&#34;, &#34;duration&#34;: &#34;14 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_setex&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;14 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_token_blacklisting&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_token_blacklisting&#34;, &#34;duration&#34;: &#34;18 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_token_blacklisting&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;18 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;C:\\Program Files\\Python311\\Lib\\unittest\\mock.py:950: in assert_called_once_with\n    raise AssertionError(msg)\nE   AssertionError: Expected &amp;#x27;setex&amp;#x27; to be called once. Called 0 times.\n        args       = (&amp;#x27;blacklist:test_token_123&amp;#x27;, 60, &amp;#x27;1&amp;#x27;)\n        kwargs     = {}\n        msg        = &amp;quot;Expected &amp;#x27;setex&amp;#x27; to be called once. Called 0 times.&amp;quot;\n        self       = &amp;lt;AsyncMock name=&amp;#x27;mock.setex&amp;#x27; id=&amp;#x27;2850134173072&amp;#x27;&amp;gt;\n\nDuring handling of the above exception, another exception occurred:\nbackend_tests\\services\\test_redis_service.py:176: in test_redis_token_blacklisting\n    redis_mock.setex.assert_called_once_with(\nE   AssertionError: Expected &amp;#x27;setex&amp;#x27; to be called once. Called 0 times.\n        expires_delta = 60\n        redis_mock = &amp;lt;AsyncMock id=&amp;#x27;2850133766672&amp;#x27;&amp;gt;\n        redis_service = &amp;lt;core.services.redis.RedisService object at 0x0000029794EA5A50&amp;gt;\n        token      = &amp;#x27;test_token_123&amp;#x27;\n\n----------------------------- Captured stderr call -----------------------------\nINFO:backend_tests.mocks.redis_mock:Token test_token_123 blacklisted successfully with expiry 60s\n\n------------------------------ Captured log call -------------------------------\nINFO     backend_tests.mocks.redis_mock:redis_mock.py:203 Token test_token_123 blacklisted successfully with expiry 60s\n\n&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_hash_operations&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_hash_operations&#34;, &#34;duration&#34;: &#34;18 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_hash_operations&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;18 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_set_operations&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_set_operations&#34;, &#34;duration&#34;: &#34;14 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_set_operations&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;14 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_error_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_error_handling&#34;, &#34;duration&#34;: &#34;16 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_error_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;16 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nERROR:core.services.redis:Error setting Redis key test_key: Connection error\nERROR:core.services.redis:Error getting Redis key test_key: Connection error\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.redis:redis.py:151 Error setting Redis key test_key: Connection error\nERROR    core.services.redis:redis.py:128 Error getting Redis key test_key: Connection error\n\n&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_flush_db&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_flush_db&#34;, &#34;duration&#34;: &#34;16 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_flush_db&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;16 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_redis_service.py::test_redis_close&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_redis_service.py::test_redis_close&#34;, &#34;duration&#34;: &#34;13 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_redis_service.py::test_redis_close&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;13 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_google_token_success&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_google_token_success&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_google_token_success&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_google_token_invalid&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_google_token_invalid&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_google_token_invalid&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_google_token_network_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_google_token_network_error&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_google_token_network_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:00,421 - core.services.social - ERROR - Google token verification failed: Network error\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.social:Google token verification failed: Network error\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.social:social.py:55 Google token verification failed: Network error\n\n&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_facebook_token_success&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_facebook_token_success&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_facebook_token_success&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_facebook_token_invalid&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_facebook_token_invalid&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_facebook_token_invalid&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_facebook_token_network_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_facebook_token_network_error&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_facebook_token_network_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:00,437 - core.services.social - ERROR - Facebook token verification failed: Network error\n\n----------------------------- Captured stderr call -----------------------------\nERROR:core.services.social:Facebook token verification failed: Network error\n\n------------------------------ Captured log call -------------------------------\nERROR    core.services.social:social.py:104 Facebook token verification failed: Network error\n\n&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_facebook_token_missing_email&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_facebook_token_missing_email&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_facebook_token_missing_email&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_social_token_google&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_social_token_google&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_social_token_google&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_social_token_facebook&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_social_token_facebook&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_social_token_facebook&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_verify_social_token_unsupported_provider&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_verify_social_token_unsupported_provider&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_verify_social_token_unsupported_provider&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_social_service.py::test_social_user_info_model&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_social_service.py::test_social_user_info_model&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_social_service.py::test_social_user_info_model&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_task_service.py::test_create_task&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_create_task&#34;, &#34;duration&#34;: &#34;5 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_create_task&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;5 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: test_task\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-471&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: test_task\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-471&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n&#34;}], &#34;backend_tests/services/test_task_service.py::test_get_task&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_get_task&#34;, &#34;duration&#34;: &#34;5 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_get_task&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;5 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: test_task\nERROR:core.services.task:Error getting task status: Task non-existent-id not found\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-477&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: test_task\nERROR    core.services.task:task.py:149 Error getting task status: Task non-existent-id not found\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-477&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n&#34;}], &#34;backend_tests/services/test_task_service.py::test_update_task_status&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_update_task_status&#34;, &#34;duration&#34;: &#34;119 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_update_task_status&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;119 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: test_task\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-483&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: test_task\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-483&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n&#34;}], &#34;backend_tests/services/test_task_service.py::test_list_tasks&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_list_tasks&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_list_tasks&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: task_0\nINFO:core.services.task:Creating task: task_1\nINFO:core.services.task:Creating task: task_2\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-489&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-490&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-491&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: task_0\nINFO     core.services.task:task.py:52 Creating task: task_1\nINFO     core.services.task:task.py:52 Creating task: task_2\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-489&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-490&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-491&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n&#34;}], &#34;backend_tests/services/test_task_service.py::test_retry_failed_task&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_retry_failed_task&#34;, &#34;duration&#34;: &#34;110 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_retry_failed_task&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;110 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: failing_task\nERROR:core.services.task:Task failing_task failed: Test error\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-497&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Exception(&amp;#x27;Test error&amp;#x27;)&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\backend_tests\\services\\test_task_service.py&amp;quot;, line 128, in failing_task\n    raise Exception(&amp;quot;Test error&amp;quot;)\nException: Test error\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: failing_task\nERROR    core.services.task:task.py:115 Task failing_task failed: Test error\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-497&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Exception(&amp;#x27;Test error&amp;#x27;)&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\backend_tests\\services\\test_task_service.py&amp;quot;, line 128, in failing_task\n    raise Exception(&amp;quot;Test error&amp;quot;)\nException: Test error\n\n&#34;}], &#34;backend_tests/services/test_task_service.py::test_cancel_task&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_cancel_task&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_cancel_task&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: test_task\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: test_task\n\n&#34;}], &#34;backend_tests/services/test_task_service.py::test_task_timeout&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_task_timeout&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_task_timeout&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: timeout_task\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: timeout_task\n\n&#34;}], &#34;backend_tests/services/test_task_service.py::test_task_dependencies&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_task_dependencies&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_task_dependencies&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_task_service.py:195: in test_task_dependencies\n    assert parent_status[&amp;quot;status&amp;quot;] == &amp;quot;completed&amp;quot;\nE   AssertionError: assert &amp;#x27;running&amp;#x27; == &amp;#x27;completed&amp;#x27;\nE     - completed\nE     + running\n        child_id   = &amp;#x27;child_task&amp;#x27;\n        child_status = {&amp;#x27;completed_at&amp;#x27;: None,\n &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-03-04T18:49:02.251892&amp;#x27;,\n &amp;#x27;error&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: &amp;#x27;child_task&amp;#x27;,\n &amp;#x27;started_at&amp;#x27;: &amp;#x27;2025-03-04T18:49:03.256806&amp;#x27;,\n &amp;#x27;status&amp;#x27;: &amp;#x27;running&amp;#x27;}\n        parent_id  = &amp;#x27;parent_task&amp;#x27;\n        parent_status = {&amp;#x27;completed_at&amp;#x27;: None,\n &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-03-04T18:49:02.249891&amp;#x27;,\n &amp;#x27;error&amp;#x27;: None,\n &amp;#x27;id&amp;#x27;: &amp;#x27;parent_task&amp;#x27;,\n &amp;#x27;started_at&amp;#x27;: &amp;#x27;2025-03-04T18:49:02.252894&amp;#x27;,\n &amp;#x27;status&amp;#x27;: &amp;#x27;running&amp;#x27;}\n        task_service = &amp;lt;core.services.task.TaskService object at 0x00000297997D3D50&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: parent_task\nINFO:core.services.task:Creating task: child_task\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-515&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-516&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: parent_task\nINFO     core.services.task:task.py:52 Creating task: child_task\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-515&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-516&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n&#34;}], &#34;backend_tests/services/test_task_service.py::test_task_cleanup&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_task_service.py::test_task_cleanup&#34;, &#34;duration&#34;: &#34;506 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_task_service.py::test_task_cleanup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;506 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;backend_tests\\services\\test_task_service.py:215: in test_task_cleanup\n    assert cleaned &amp;gt;= 3  # Should clean up all completed tasks\nE   assert 0 &amp;gt;= 3\n        cleaned    = 0\n        i          = 2\n        task_id    = &amp;#x27;task_2&amp;#x27;\n        task_ids   = [&amp;#x27;task_0&amp;#x27;, &amp;#x27;task_1&amp;#x27;, &amp;#x27;task_2&amp;#x27;]\n        task_service = &amp;lt;core.services.task.TaskService object at 0x0000029799607A90&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nINFO:core.services.task:Creating task: task_0\nINFO:core.services.task:Creating task: task_1\nINFO:core.services.task:Creating task: task_2\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-522&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-523&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR:asyncio:Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-524&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n------------------------------ Captured log call -------------------------------\nINFO     core.services.task:task.py:52 Creating task: task_0\nINFO     core.services.task:task.py:52 Creating task: task_1\nINFO     core.services.task:task.py:52 Creating task: task_2\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-522&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-523&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\nERROR    asyncio:base_events.py:1771 Task exception was never retrieved\nfuture: &amp;lt;Task finished name=&amp;#x27;Task-524&amp;#x27; coro=&amp;lt;TaskService.create_task.&amp;lt;locals&amp;gt;.wrapped_task() done, defined at C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py:55&amp;gt; exception=Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.&amp;gt;\nTraceback (most recent call last):\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\backend\\core\\services\\task.py&amp;quot;, line 80, in wrapped_task\n    result = await func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\fixtures.py&amp;quot;, line 1168, in result\n    fail(message, pytrace=False)\n  File &amp;quot;C:\\Active Projects\\AI AGENTIC DEALS SYSTEM\\venv\\Lib\\site-packages\\_pytest\\outcomes.py&amp;quot;, line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: Fixture &amp;quot;mock_task_function&amp;quot; called directly. Fixtures are not meant to be called directly,\nbut are created automatically when test functions request them as parameters.\nSee https://docs.pytest.org/en/stable/explanation/fixtures.html for more information about fixtures, and\nhttps://docs.pytest.org/en/stable/deprecations.html#calling-fixtures-directly about how to update your code.\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_get_balance&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_get_balance&#34;, &#34;duration&#34;: &#34;271 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_get_balance&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;271 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:04,549 - core.services.token - DEBUG - Retrieved balance for user f1c0083b-cda0-46f0-8453-bb73f85c7421: &amp;lt;TokenBalance(id=91bd6885-555d-4365-9fd5-0604ec62d4bc, balance=50.00000000)&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nDEBUG:core.services.token:Retrieved balance for user f1c0083b-cda0-46f0-8453-bb73f85c7421: &amp;lt;TokenBalance(id=91bd6885-555d-4365-9fd5-0604ec62d4bc, balance=50.00000000)&amp;gt;\n\n------------------------------ Captured log call -------------------------------\nDEBUG    core.services.token:token.py:157 Retrieved balance for user f1c0083b-cda0-46f0-8453-bb73f85c7421: &amp;lt;TokenBalance(id=91bd6885-555d-4365-9fd5-0604ec62d4bc, balance=50.00000000)&amp;gt;\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_transfer_tokens&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_transfer_tokens&#34;, &#34;duration&#34;: &#34;517 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_transfer_tokens&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;517 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:05,057 - core.services.token - DEBUG - Retrieved balance for user 5dd71a20-0237-4ea4-bbb5-aaaa813b4a71: &amp;lt;TokenBalance(id=6deca806-9cac-4f69-a054-3cb2f409e483, balance=100.00000000)&amp;gt;\n2025-03-05 02:49:05,069 - core.services.token - DEBUG - Retrieved balance for user 5dd71a20-0237-4ea4-bbb5-aaaa813b4a71: &amp;lt;TokenBalance(id=6deca806-9cac-4f69-a054-3cb2f409e483, balance=50.00000000)&amp;gt;\n2025-03-05 02:49:05,070 - core.services.token - DEBUG - Retrieved balance for user 1d92e52b-67d2-43a0-80cb-a9263a73db63: &amp;lt;TokenBalance(id=16abf827-4420-499e-a517-3c6e9142a421, balance=50.00000000)&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nDEBUG:core.services.token:Retrieved balance for user 5dd71a20-0237-4ea4-bbb5-aaaa813b4a71: &amp;lt;TokenBalance(id=6deca806-9cac-4f69-a054-3cb2f409e483, balance=100.00000000)&amp;gt;\nDEBUG:core.services.token:Retrieved balance for user 5dd71a20-0237-4ea4-bbb5-aaaa813b4a71: &amp;lt;TokenBalance(id=6deca806-9cac-4f69-a054-3cb2f409e483, balance=50.00000000)&amp;gt;\nDEBUG:core.services.token:Retrieved balance for user 1d92e52b-67d2-43a0-80cb-a9263a73db63: &amp;lt;TokenBalance(id=16abf827-4420-499e-a517-3c6e9142a421, balance=50.00000000)&amp;gt;\n\n------------------------------ Captured log call -------------------------------\nDEBUG    core.services.token:token.py:157 Retrieved balance for user 5dd71a20-0237-4ea4-bbb5-aaaa813b4a71: &amp;lt;TokenBalance(id=6deca806-9cac-4f69-a054-3cb2f409e483, balance=100.00000000)&amp;gt;\nDEBUG    core.services.token:token.py:157 Retrieved balance for user 5dd71a20-0237-4ea4-bbb5-aaaa813b4a71: &amp;lt;TokenBalance(id=6deca806-9cac-4f69-a054-3cb2f409e483, balance=50.00000000)&amp;gt;\nDEBUG    core.services.token:token.py:157 Retrieved balance for user 1d92e52b-67d2-43a0-80cb-a9263a73db63: &amp;lt;TokenBalance(id=16abf827-4420-499e-a517-3c6e9142a421, balance=50.00000000)&amp;gt;\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_insufficient_balance&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_insufficient_balance&#34;, &#34;duration&#34;: &#34;484 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_insufficient_balance&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;484 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:05,554 - core.services.token - DEBUG - Retrieved balance for user c2272054-b7dc-4456-9d93-76f57b8c6394: None\n2025-03-05 02:49:05,554 - core.services.token - ERROR - Token balance error during transfer: Token balance error during transfer: Insufficient balance for transfer. Required: 100.0, Available: 0.0\n\n----------------------------- Captured stderr call -----------------------------\nDEBUG:core.services.token:Retrieved balance for user c2272054-b7dc-4456-9d93-76f57b8c6394: None\nERROR:core.services.token:Token balance error during transfer: Token balance error during transfer: Insufficient balance for transfer. Required: 100.0, Available: 0.0\n\n------------------------------ Captured log call -------------------------------\nDEBUG    core.services.token:token.py:157 Retrieved balance for user c2272054-b7dc-4456-9d93-76f57b8c6394: None\nERROR    core.services.token:token.py:467 Token balance error during transfer: Token balance error during transfer: Insufficient balance for transfer. Required: 100.0, Available: 0.0\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_service_fee&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_service_fee&#34;, &#34;duration&#34;: &#34;259 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_service_fee&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;259 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:05,813 - core.services.token - DEBUG - Retrieved balance for user 526ed2bc-2449-4f71-948c-a1945ad2c093: &amp;lt;TokenBalance(id=557ecd82-417d-41d1-b28a-4ab118ff7ff1, balance=100.00000000)&amp;gt;\n2025-03-05 02:49:05,820 - core.services.token - DEBUG - Retrieved balance for user 526ed2bc-2449-4f71-948c-a1945ad2c093: &amp;lt;TokenBalance(id=557ecd82-417d-41d1-b28a-4ab118ff7ff1, balance=90.00000000)&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nDEBUG:core.services.token:Retrieved balance for user 526ed2bc-2449-4f71-948c-a1945ad2c093: &amp;lt;TokenBalance(id=557ecd82-417d-41d1-b28a-4ab118ff7ff1, balance=100.00000000)&amp;gt;\nDEBUG:core.services.token:Retrieved balance for user 526ed2bc-2449-4f71-948c-a1945ad2c093: &amp;lt;TokenBalance(id=557ecd82-417d-41d1-b28a-4ab118ff7ff1, balance=90.00000000)&amp;gt;\n\n------------------------------ Captured log call -------------------------------\nDEBUG    core.services.token:token.py:157 Retrieved balance for user 526ed2bc-2449-4f71-948c-a1945ad2c093: &amp;lt;TokenBalance(id=557ecd82-417d-41d1-b28a-4ab118ff7ff1, balance=100.00000000)&amp;gt;\nDEBUG    core.services.token:token.py:157 Retrieved balance for user 526ed2bc-2449-4f71-948c-a1945ad2c093: &amp;lt;TokenBalance(id=557ecd82-417d-41d1-b28a-4ab118ff7ff1, balance=90.00000000)&amp;gt;\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_transaction_history&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_transaction_history&#34;, &#34;duration&#34;: &#34;271 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_transaction_history&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;271 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:06,094 - core.services.token - DEBUG - Retrieved 3 transactions for user 4d09e97c-2029-4642-8dc7-fe5cab5fd5c1\n\n----------------------------- Captured stderr call -----------------------------\nDEBUG:core.services.token:Retrieved 3 transactions for user 4d09e97c-2029-4642-8dc7-fe5cab5fd5c1\n\n------------------------------ Captured log call -------------------------------\nDEBUG    core.services.token:token.py:213 Retrieved 3 transactions for user 4d09e97c-2029-4642-8dc7-fe5cab5fd5c1\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_balance_cache&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_balance_cache&#34;, &#34;duration&#34;: &#34;256 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_balance_cache&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;256 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:06,352 - core.services.token - DEBUG - Retrieved balance for user ee886133-d784-41b1-b030-bccadb19429a: &amp;lt;TokenBalance(id=171dc1f0-0c67-4094-b902-4377d6c47831, balance=100.00000000)&amp;gt;\n2025-03-05 02:49:06,353 - core.services.token - DEBUG - Cleared balance cache for user ee886133-d784-41b1-b030-bccadb19429a\n2025-03-05 02:49:06,353 - core.services.token - DEBUG - Retrieved balance for user ee886133-d784-41b1-b030-bccadb19429a: &amp;lt;TokenBalance(id=171dc1f0-0c67-4094-b902-4377d6c47831, balance=100.00000000)&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nDEBUG:core.services.token:Retrieved balance for user ee886133-d784-41b1-b030-bccadb19429a: &amp;lt;TokenBalance(id=171dc1f0-0c67-4094-b902-4377d6c47831, balance=100.00000000)&amp;gt;\nDEBUG:core.services.token:Cleared balance cache for user ee886133-d784-41b1-b030-bccadb19429a\nDEBUG:core.services.token:Retrieved balance for user ee886133-d784-41b1-b030-bccadb19429a: &amp;lt;TokenBalance(id=171dc1f0-0c67-4094-b902-4377d6c47831, balance=100.00000000)&amp;gt;\n\n------------------------------ Captured log call -------------------------------\nDEBUG    core.services.token:token.py:157 Retrieved balance for user ee886133-d784-41b1-b030-bccadb19429a: &amp;lt;TokenBalance(id=171dc1f0-0c67-4094-b902-4377d6c47831, balance=100.00000000)&amp;gt;\nDEBUG    core.services.token:token.py:504 Cleared balance cache for user ee886133-d784-41b1-b030-bccadb19429a\nDEBUG    core.services.token:token.py:157 Retrieved balance for user ee886133-d784-41b1-b030-bccadb19429a: &amp;lt;TokenBalance(id=171dc1f0-0c67-4094-b902-4377d6c47831, balance=100.00000000)&amp;gt;\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_transaction_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_transaction_validation&#34;, &#34;duration&#34;: &#34;243 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_transaction_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;243 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;backend_tests/services/test_token_service.py::test_token_transaction_creation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_token_transaction_creation&#34;, &#34;duration&#34;: &#34;253 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_token_transaction_creation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;253 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:06,858 - core.services.token - DEBUG - Cleared balance cache for user e911f1da-2cac-4fdc-a23f-e840d84c8f17\n\n----------------------------- Captured stderr call -----------------------------\nDEBUG:core.services.token:Cleared balance cache for user e911f1da-2cac-4fdc-a23f-e840d84c8f17\n\n------------------------------ Captured log call -------------------------------\nDEBUG    core.services.token:token.py:504 Cleared balance cache for user e911f1da-2cac-4fdc-a23f-e840d84c8f17\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_token_balance_calculation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_token_balance_calculation&#34;, &#34;duration&#34;: &#34;260 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_token_balance_calculation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;260 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-03-05 02:49:07,115 - core.services.token - DEBUG - Cleared balance cache for user cdeab538-6848-4e83-a8ad-278c8efaddc6\n2025-03-05 02:49:07,116 - core.services.token - DEBUG - Retrieved balance for user cdeab538-6848-4e83-a8ad-278c8efaddc6: &amp;lt;TokenBalance(id=a8af3666-ee69-49ec-9537-7c0ed5ad1cd1, balance=1.00000000)&amp;gt;\n2025-03-05 02:49:07,121 - core.services.token - DEBUG - Cleared balance cache for user cdeab538-6848-4e83-a8ad-278c8efaddc6\n2025-03-05 02:49:07,122 - core.services.token - DEBUG - Retrieved balance for user cdeab538-6848-4e83-a8ad-278c8efaddc6: &amp;lt;TokenBalance(id=a8af3666-ee69-49ec-9537-7c0ed5ad1cd1, balance=1.50000000)&amp;gt;\n\n----------------------------- Captured stderr call -----------------------------\nDEBUG:core.services.token:Cleared balance cache for user cdeab538-6848-4e83-a8ad-278c8efaddc6\nDEBUG:core.services.token:Retrieved balance for user cdeab538-6848-4e83-a8ad-278c8efaddc6: &amp;lt;TokenBalance(id=a8af3666-ee69-49ec-9537-7c0ed5ad1cd1, balance=1.00000000)&amp;gt;\nDEBUG:core.services.token:Cleared balance cache for user cdeab538-6848-4e83-a8ad-278c8efaddc6\nDEBUG:core.services.token:Retrieved balance for user cdeab538-6848-4e83-a8ad-278c8efaddc6: &amp;lt;TokenBalance(id=a8af3666-ee69-49ec-9537-7c0ed5ad1cd1, balance=1.50000000)&amp;gt;\n\n------------------------------ Captured log call -------------------------------\nDEBUG    core.services.token:token.py:504 Cleared balance cache for user cdeab538-6848-4e83-a8ad-278c8efaddc6\nDEBUG    core.services.token:token.py:157 Retrieved balance for user cdeab538-6848-4e83-a8ad-278c8efaddc6: &amp;lt;TokenBalance(id=a8af3666-ee69-49ec-9537-7c0ed5ad1cd1, balance=1.00000000)&amp;gt;\nDEBUG    core.services.token:token.py:504 Cleared balance cache for user cdeab538-6848-4e83-a8ad-278c8efaddc6\nDEBUG    core.services.token:token.py:157 Retrieved balance for user cdeab538-6848-4e83-a8ad-278c8efaddc6: &amp;lt;TokenBalance(id=a8af3666-ee69-49ec-9537-7c0ed5ad1cd1, balance=1.50000000)&amp;gt;\n\n&#34;}], &#34;backend_tests/services/test_token_service.py::test_token_transaction_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;backend_tests/services/test_token_service.py::test_token_transaction_validation&#34;, &#34;duration&#34;: &#34;402 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;backend_tests/services/test_token_service.py::test_token_transaction_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;402 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}]}, &#34;renderCollapsed&#34;: [&#34;passed&#34;], &#34;initialSort&#34;: &#34;result&#34;, &#34;title&#34;: &#34;Service_report.html&#34;}"></div>
    <script>
      (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const { getCollapsedCategory, setCollapsedIds } = require('./storage.js')

class DataManager {
    setManager(data) {
        const collapsedCategories = [...getCollapsedCategory(data.renderCollapsed)]
        const collapsedIds = []
        const tests = Object.values(data.tests).flat().map((test, index) => {
            const collapsed = collapsedCategories.includes(test.result.toLowerCase())
            const id = `test_${index}`
            if (collapsed) {
                collapsedIds.push(id)
            }
            return {
                ...test,
                id,
                collapsed,
            }
        })
        const dataBlob = { ...data, tests }
        this.data = { ...dataBlob }
        this.renderData = { ...dataBlob }
        setCollapsedIds(collapsedIds)
    }

    get allData() {
        return { ...this.data }
    }

    resetRender() {
        this.renderData = { ...this.data }
    }

    setRender(data) {
        this.renderData.tests = [...data]
    }

    toggleCollapsedItem(id) {
        this.renderData.tests = this.renderData.tests.map((test) =>
            test.id === id ? { ...test, collapsed: !test.collapsed } : test,
        )
    }

    set allCollapsed(collapsed) {
        this.renderData = { ...this.renderData, tests: [...this.renderData.tests.map((test) => (
            { ...test, collapsed }
        ))] }
    }

    get testSubset() {
        return [...this.renderData.tests]
    }

    get environment() {
        return this.renderData.environment
    }

    get initialSort() {
        return this.data.initialSort
    }
}

module.exports = {
    manager: new DataManager(),
}

},{"./storage.js":8}],2:[function(require,module,exports){
const mediaViewer = require('./mediaviewer.js')
const templateEnvRow = document.getElementById('template_environment_row')
const templateResult = document.getElementById('template_results-table__tbody')

function htmlToElements(html) {
    const temp = document.createElement('template')
    temp.innerHTML = html
    return temp.content.childNodes
}

const find = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return elem.querySelector(selector)
}

const findAll = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return [...elem.querySelectorAll(selector)]
}

const dom = {
    getStaticRow: (key, value) => {
        const envRow = templateEnvRow.content.cloneNode(true)
        const isObj = typeof value === 'object' && value !== null
        const values = isObj ? Object.keys(value).map((k) => `${k}: ${value[k]}`) : null

        const valuesElement = htmlToElements(
            values ? `<ul>${values.map((val) => `<li>${val}</li>`).join('')}<ul>` : `<div>${value}</div>`)[0]
        const td = findAll('td', envRow)
        td[0].textContent = key
        td[1].appendChild(valuesElement)

        return envRow
    },
    getResultTBody: ({ testId, id, log, extras, resultsTableRow, tableHtml, result, collapsed }) => {
        const resultBody = templateResult.content.cloneNode(true)
        resultBody.querySelector('tbody').classList.add(result.toLowerCase())
        resultBody.querySelector('tbody').id = testId
        resultBody.querySelector('.collapsible').dataset.id = id

        resultsTableRow.forEach((html) => {
            const t = document.createElement('template')
            t.innerHTML = html
            resultBody.querySelector('.collapsible').appendChild(t.content)
        })

        if (log) {
            // Wrap lines starting with "E" with span.error to color those lines red
            const wrappedLog = log.replace(/^E.*$/gm, (match) => `<span class="error">${match}</span>`)
            resultBody.querySelector('.log').innerHTML = wrappedLog
        } else {
            resultBody.querySelector('.log').remove()
        }

        if (collapsed) {
            resultBody.querySelector('.collapsible > td')?.classList.add('collapsed')
            resultBody.querySelector('.extras-row').classList.add('hidden')
        } else {
            resultBody.querySelector('.collapsible > td')?.classList.remove('collapsed')
        }

        const media = []
        extras?.forEach(({ name, format_type, content }) => {
            if (['image', 'video'].includes(format_type)) {
                media.push({ path: content, name, format_type })
            }

            if (format_type === 'html') {
                resultBody.querySelector('.extraHTML').insertAdjacentHTML('beforeend', `<div>${content}</div>`)
            }
        })
        mediaViewer.setup(resultBody, media)

        // Add custom html from the pytest_html_results_table_html hook
        tableHtml?.forEach((item) => {
            resultBody.querySelector('td[class="extra"]').insertAdjacentHTML('beforeend', item)
        })

        return resultBody
    },
}

module.exports = {
    dom,
    htmlToElements,
    find,
    findAll,
}

},{"./mediaviewer.js":6}],3:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const storageModule = require('./storage.js')

const getFilteredSubSet = (filter) =>
    manager.allData.tests.filter(({ result }) => filter.includes(result.toLowerCase()))

const doInitFilter = () => {
    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)
}

const doFilter = (type, show) => {
    if (show) {
        storageModule.showCategory(type)
    } else {
        storageModule.hideCategory(type)
    }

    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)

    const sortColumn = storageModule.getSort()
    doSort(sortColumn, true)
}

module.exports = {
    doFilter,
    doInitFilter,
}

},{"./datamanager.js":1,"./sort.js":7,"./storage.js":8}],4:[function(require,module,exports){
const { redraw, bindEvents, renderStatic } = require('./main.js')
const { doInitFilter } = require('./filter.js')
const { doInitSort } = require('./sort.js')
const { manager } = require('./datamanager.js')
const data = JSON.parse(document.getElementById('data-container').dataset.jsonblob)

function init() {
    manager.setManager(data)
    doInitFilter()
    doInitSort()
    renderStatic()
    redraw()
    bindEvents()
}

init()

},{"./datamanager.js":1,"./filter.js":3,"./main.js":5,"./sort.js":7}],5:[function(require,module,exports){
const { dom, find, findAll } = require('./dom.js')
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const { doFilter } = require('./filter.js')
const {
    getVisible,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    getSortDirection,
    possibleFilters,
} = require('./storage.js')

const removeChildren = (node) => {
    while (node.firstChild) {
        node.removeChild(node.firstChild)
    }
}

const renderStatic = () => {
    const renderEnvironmentTable = () => {
        const environment = manager.environment
        const rows = Object.keys(environment).map((key) => dom.getStaticRow(key, environment[key]))
        const table = document.getElementById('environment')
        removeChildren(table)
        rows.forEach((row) => table.appendChild(row))
    }
    renderEnvironmentTable()
}

const addItemToggleListener = (elem) => {
    elem.addEventListener('click', ({ target }) => {
        const id = target.parentElement.dataset.id
        manager.toggleCollapsedItem(id)

        const collapsedIds = getCollapsedIds()
        if (collapsedIds.includes(id)) {
            const updated = collapsedIds.filter((item) => item !== id)
            setCollapsedIds(updated)
        } else {
            collapsedIds.push(id)
            setCollapsedIds(collapsedIds)
        }
        redraw()
    })
}

const renderContent = (tests) => {
    const sortAttr = getSort(manager.initialSort)
    const sortAsc = JSON.parse(getSortDirection())
    const rows = tests.map(dom.getResultTBody)
    const table = document.getElementById('results-table')
    const tableHeader = document.getElementById('results-table-head')

    const newTable = document.createElement('table')
    newTable.id = 'results-table'

    // remove all sorting classes and set the relevant
    findAll('.sortable', tableHeader).forEach((elem) => elem.classList.remove('asc', 'desc'))
    tableHeader.querySelector(`.sortable[data-column-type="${sortAttr}"]`)?.classList.add(sortAsc ? 'desc' : 'asc')
    newTable.appendChild(tableHeader)

    if (!rows.length) {
        const emptyTable = document.getElementById('template_results-table__body--empty').content.cloneNode(true)
        newTable.appendChild(emptyTable)
    } else {
        rows.forEach((row) => {
            if (!!row) {
                findAll('.collapsible td:not(.col-links', row).forEach(addItemToggleListener)
                find('.logexpander', row).addEventListener('click',
                    (evt) => evt.target.parentNode.classList.toggle('expanded'),
                )
                newTable.appendChild(row)
            }
        })
    }

    table.replaceWith(newTable)
}

const renderDerived = () => {
    const currentFilter = getVisible()
    possibleFilters.forEach((result) => {
        const input = document.querySelector(`input[data-test-result="${result}"]`)
        input.checked = currentFilter.includes(result)
    })
}

const bindEvents = () => {
    const filterColumn = (evt) => {
        const { target: element } = evt
        const { testResult } = element.dataset

        doFilter(testResult, element.checked)
        const collapsedIds = getCollapsedIds()
        const updated = manager.renderData.tests.map((test) => {
            return {
                ...test,
                collapsed: collapsedIds.includes(test.id),
            }
        })
        manager.setRender(updated)
        redraw()
    }

    const header = document.getElementById('environment-header')
    header.addEventListener('click', () => {
        const table = document.getElementById('environment')
        table.classList.toggle('hidden')
        header.classList.toggle('collapsed')
    })

    findAll('input[name="filter_checkbox"]').forEach((elem) => {
        elem.addEventListener('click', filterColumn)
    })

    findAll('.sortable').forEach((elem) => {
        elem.addEventListener('click', (evt) => {
            const { target: element } = evt
            const { columnType } = element.dataset
            doSort(columnType)
            redraw()
        })
    })

    document.getElementById('show_all_details').addEventListener('click', () => {
        manager.allCollapsed = false
        setCollapsedIds([])
        redraw()
    })
    document.getElementById('hide_all_details').addEventListener('click', () => {
        manager.allCollapsed = true
        const allIds = manager.renderData.tests.map((test) => test.id)
        setCollapsedIds(allIds)
        redraw()
    })
}

const redraw = () => {
    const { testSubset } = manager

    renderContent(testSubset)
    renderDerived()
}

module.exports = {
    redraw,
    bindEvents,
    renderStatic,
}

},{"./datamanager.js":1,"./dom.js":2,"./filter.js":3,"./sort.js":7,"./storage.js":8}],6:[function(require,module,exports){
class MediaViewer {
    constructor(assets) {
        this.assets = assets
        this.index = 0
    }

    nextActive() {
        this.index = this.index === this.assets.length - 1 ? 0 : this.index + 1
        return [this.activeFile, this.index]
    }

    prevActive() {
        this.index = this.index === 0 ? this.assets.length - 1 : this.index -1
        return [this.activeFile, this.index]
    }

    get currentIndex() {
        return this.index
    }

    get activeFile() {
        return this.assets[this.index]
    }
}


const setup = (resultBody, assets) => {
    if (!assets.length) {
        resultBody.querySelector('.media').classList.add('hidden')
        return
    }

    const mediaViewer = new MediaViewer(assets)
    const container = resultBody.querySelector('.media-container')
    const leftArrow = resultBody.querySelector('.media-container__nav--left')
    const rightArrow = resultBody.querySelector('.media-container__nav--right')
    const mediaName = resultBody.querySelector('.media__name')
    const counter = resultBody.querySelector('.media__counter')
    const imageEl = resultBody.querySelector('img')
    const sourceEl = resultBody.querySelector('source')
    const videoEl = resultBody.querySelector('video')

    const setImg = (media, index) => {
        if (media?.format_type === 'image') {
            imageEl.src = media.path

            imageEl.classList.remove('hidden')
            videoEl.classList.add('hidden')
        } else if (media?.format_type === 'video') {
            sourceEl.src = media.path

            videoEl.classList.remove('hidden')
            imageEl.classList.add('hidden')
        }

        mediaName.innerText = media?.name
        counter.innerText = `${index + 1} / ${assets.length}`
    }
    setImg(mediaViewer.activeFile, mediaViewer.currentIndex)

    const moveLeft = () => {
        const [media, index] = mediaViewer.prevActive()
        setImg(media, index)
    }
    const doRight = () => {
        const [media, index] = mediaViewer.nextActive()
        setImg(media, index)
    }
    const openImg = () => {
        window.open(mediaViewer.activeFile.path, '_blank')
    }
    if (assets.length === 1) {
        container.classList.add('media-container--fullscreen')
    } else {
        leftArrow.addEventListener('click', moveLeft)
        rightArrow.addEventListener('click', doRight)
    }
    imageEl.addEventListener('click', openImg)
}

module.exports = {
    setup,
}

},{}],7:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const storageModule = require('./storage.js')

const genericSort = (list, key, ascending, customOrder) => {
    let sorted
    if (customOrder) {
        sorted = list.sort((a, b) => {
            const aValue = a.result.toLowerCase()
            const bValue = b.result.toLowerCase()

            const aIndex = customOrder.findIndex((item) => item.toLowerCase() === aValue)
            const bIndex = customOrder.findIndex((item) => item.toLowerCase() === bValue)

            // Compare the indices to determine the sort order
            return aIndex - bIndex
        })
    } else {
        sorted = list.sort((a, b) => a[key] === b[key] ? 0 : a[key] > b[key] ? 1 : -1)
    }

    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const durationSort = (list, ascending) => {
    const parseDuration = (duration) => {
        if (duration.includes(':')) {
            // If it's in the format "HH:mm:ss"
            const [hours, minutes, seconds] = duration.split(':').map(Number)
            return (hours * 3600 + minutes * 60 + seconds) * 1000
        } else {
            // If it's in the format "nnn ms"
            return parseInt(duration)
        }
    }
    const sorted = list.sort((a, b) => parseDuration(a['duration']) - parseDuration(b['duration']))
    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const doInitSort = () => {
    const type = storageModule.getSort(manager.initialSort)
    const ascending = storageModule.getSortDirection()
    const list = manager.testSubset
    const initialOrder = ['Error', 'Failed', 'Rerun', 'XFailed', 'XPassed', 'Skipped', 'Passed']

    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    if (type?.toLowerCase() === 'original') {
        manager.setRender(list)
    } else {
        let sortedList
        switch (type) {
        case 'duration':
            sortedList = durationSort(list, ascending)
            break
        case 'result':
            sortedList = genericSort(list, type, ascending, initialOrder)
            break
        default:
            sortedList = genericSort(list, type, ascending)
            break
        }
        manager.setRender(sortedList)
    }
}

const doSort = (type, skipDirection) => {
    const newSortType = storageModule.getSort(manager.initialSort) !== type
    const currentAsc = storageModule.getSortDirection()
    let ascending
    if (skipDirection) {
        ascending = currentAsc
    } else {
        ascending = newSortType ? false : !currentAsc
    }
    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    const list = manager.testSubset
    const sortedList = type === 'duration' ? durationSort(list, ascending) : genericSort(list, type, ascending)
    manager.setRender(sortedList)
}

module.exports = {
    doInitSort,
    doSort,
}

},{"./datamanager.js":1,"./storage.js":8}],8:[function(require,module,exports){
const possibleFilters = [
    'passed',
    'skipped',
    'failed',
    'error',
    'xfailed',
    'xpassed',
    'rerun',
]

const getVisible = () => {
    const url = new URL(window.location.href)
    const settings = new URLSearchParams(url.search).get('visible')
    const lower = (item) => {
        const lowerItem = item.toLowerCase()
        if (possibleFilters.includes(lowerItem)) {
            return lowerItem
        }
        return null
    }
    return settings === null ?
        possibleFilters :
        [...new Set(settings?.split(',').map(lower).filter((item) => item))]
}

const hideCategory = (categoryToHide) => {
    const url = new URL(window.location.href)
    const visibleParams = new URLSearchParams(url.search).get('visible')
    const currentVisible = visibleParams ? visibleParams.split(',') : [...possibleFilters]
    const settings = [...new Set(currentVisible)].filter((f) => f !== categoryToHide).join(',')

    url.searchParams.set('visible', settings)
    window.history.pushState({}, null, unescape(url.href))
}

const showCategory = (categoryToShow) => {
    if (typeof window === 'undefined') {
        return
    }
    const url = new URL(window.location.href)
    const currentVisible = new URLSearchParams(url.search).get('visible')?.split(',').filter(Boolean) ||
        [...possibleFilters]
    const settings = [...new Set([categoryToShow, ...currentVisible])]
    const noFilter = possibleFilters.length === settings.length || !settings.length

    noFilter ? url.searchParams.delete('visible') : url.searchParams.set('visible', settings.join(','))
    window.history.pushState({}, null, unescape(url.href))
}

const getSort = (initialSort) => {
    const url = new URL(window.location.href)
    let sort = new URLSearchParams(url.search).get('sort')
    if (!sort) {
        sort = initialSort || 'result'
    }
    return sort
}

const setSort = (type) => {
    const url = new URL(window.location.href)
    url.searchParams.set('sort', type)
    window.history.pushState({}, null, unescape(url.href))
}

const getCollapsedCategory = (renderCollapsed) => {
    let categories
    if (typeof window !== 'undefined') {
        const url = new URL(window.location.href)
        const collapsedItems = new URLSearchParams(url.search).get('collapsed')
        switch (true) {
        case !renderCollapsed && collapsedItems === null:
            categories = ['passed']
            break
        case collapsedItems?.length === 0 || /^["']{2}$/.test(collapsedItems):
            categories = []
            break
        case /^all$/.test(collapsedItems) || collapsedItems === null && /^all$/.test(renderCollapsed):
            categories = [...possibleFilters]
            break
        default:
            categories = collapsedItems?.split(',').map((item) => item.toLowerCase()) || renderCollapsed
            break
        }
    } else {
        categories = []
    }
    return categories
}

const getSortDirection = () => JSON.parse(sessionStorage.getItem('sortAsc')) || false
const setSortDirection = (ascending) => sessionStorage.setItem('sortAsc', ascending)

const getCollapsedIds = () => JSON.parse(sessionStorage.getItem('collapsedIds')) || []
const setCollapsedIds = (list) => sessionStorage.setItem('collapsedIds', JSON.stringify(list))

module.exports = {
    getVisible,
    hideCategory,
    showCategory,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    setSort,
    getSortDirection,
    setSortDirection,
    getCollapsedCategory,
    possibleFilters,
}

},{}]},{},[4]);
    </script>
  </footer>
</html>